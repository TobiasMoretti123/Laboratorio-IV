import{a as P}from"./chunk-VLODAJ2O.js";import{h as K}from"./chunk-G2BCKOD2.js";import{$ as U,V as N,ka as J,la as q,ma as L}from"./chunk-5LNGFYFJ.js";import{a as F,b as A,c as D,g as H,h as $,j as M}from"./chunk-TERAQOSY.js";import"./chunk-WXI33M2S.js";import{k as B,l as j,r as z}from"./chunk-MZ2EVUCB.js";import{Gb as c,Hb as I,Ib as k,Jb as V,Ma as E,Pa as p,Qa as h,ba as T,ca as x,eb as b,ga as w,gb as l,lb as a,ma as R,mb as r,na as _,nb as C,rb as v,wa as f,wb as u,x as y,xa as g,yb as d}from"./chunk-EPM2LCS5.js";var O=(()=>{let t=class t{constructor(e){this.http=e,this.preguntasApi="https://opentdb.com/api.php",this.imagenesApi="https://api.pexels.com/v1",this.imagenApiKey="U6FWFzzQItjBVRovp1i3nQiuOjygxNIesmHrgo01hVZ6Rx3xkhxH4nKn"}ObtenerPreguntas(e){return this.http.get(`${this.preguntasApi}?amount=1&category=12&difficulty=${e}&type=multiple&encode=url3986`)}ObtenerImagenes(e){let n=new F({Authorization:this.imagenApiKey});return this.http.get(`${this.imagenesApi}/search?query=${e}`,{headers:n}).pipe(y(s=>s.photos.map(m=>m.src.original)))}};t.\u0275fac=function(n){return new(n||t)(w(A))},t.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function G(i,t){if(i&1&&(a(0,"div",11),c(1),r()),i&2){let o=d();p(),I(o.auth.currentUser==null?null:o.auth.currentUser.email)}}function X(i,t){if(i&1){let o=v();a(0,"div",12)(1,"h2"),c(2,"Selecciona una Dificultad Para Todo El Juego"),r(),a(3,"button",13),u("click",function(){f(o);let n=d();return g(n.SeleccionarDificultad("easy"))}),c(4,"Facil"),r(),a(5,"button",14),u("click",function(){f(o);let n=d();return g(n.SeleccionarDificultad("medium"))}),c(6,"Medio"),r(),a(7,"button",15),u("click",function(){f(o);let n=d();return g(n.SeleccionarDificultad("hard"))}),c(8,"Dificil"),r()()}}function Y(i,t){i&1&&C(0,"mat-progress-spinner",16)}function tt(i,t){i&1&&C(0,"mat-progress-spinner",17)}function et(i,t){if(i&1){let o=v();a(0,"div",29)(1,"button",30),u("click",function(){let n=f(o).$implicit,s=d(2);return g(s.VerificarRespuesta(n))}),c(2),r()()}if(i&2){let o=t.$implicit,e=t.index,n=d(2);p(),l("disabled",n.blockearRespuestas),p(),V(" ",e+1,". ",o," ")}}function nt(i,t){if(i&1){let o=v();a(0,"div",18)(1,"div",19)(2,"div",20)(3,"p",21),c(4),r(),a(5,"h2"),c(6),r(),a(7,"div",22),C(8,"img",23),r(),b(9,et,3,3,"div",24),r(),a(10,"div",25)(11,"p",26),c(12),r(),a(13,"p",27),c(14),r()(),a(15,"button",28),u("click",function(){f(o);let n=d();return g(n.Reintentar())}),c(16,"Volver a Jugar"),r()()()}if(i&2){let o=d();p(4),k("Difultad: ",o.dificultad,""),p(2),I(o.pregunta),p(2),l("src",o.urlImagen,E),p(),l("ngForOf",o.respuestas),p(3),k("Puntos: ",o.puntos,""),p(2),k("Intentos: ",o.intentos,""),p(),l("disabled",o.blockearReintento)}}var Q=(()=>{let t=class t{constructor(e,n,s,m){this.servicio=e,this.snackbar=n,this.router=s,this.auth=m,this.mostrarSpinner=!1,this.mostrarImagenSpinner=!1,this.pregunta="",this.respuestas=[],this.respuestaCorrecta="",this.dificultad="",this.mostrarBotones=!0,this.blockearRespuestas=!1,this.urlImagen="",this.intentos=10,this.puntos=0,this.mostrarTooltip=!1,this.blockearReintento=!0}ngOnInit(){}ObtenerPreguntas(){this.intentos>0&&this.servicio.ObtenerPreguntas(this.dificultad).subscribe(e=>{if(e.response_code===0){let n=e.results[0];this.pregunta=decodeURIComponent(n.question);let s=n.incorrect_answers.concat(n.correct_answer);this.respuestas=s.map(m=>decodeURIComponent(m)),this.respuestas.sort(),this.respuestaCorrecta=decodeURIComponent(n.correct_answer),this.ObtenerImagenes()}})}ObtenerImagenes(){this.servicio.ObtenerImagenes("music").subscribe(e=>{this.urlImagen=e[Math.floor(Math.random()*e.length)]})}SeleccionarDificultad(e){this.dificultad=e,this.mostrarBotones=!1,this.mostrarSpinner=!0,setTimeout(()=>{this.ObtenerPreguntas(),setTimeout(()=>{this.mostrarSpinner=!1},1e3)},4e3)}VerificarRespuesta(e){if(this.intentos>0){if(e==this.respuestaCorrecta){switch(this.AbrirSnackBar("Respuesta correcta"),this.blockearRespuestas=!0,this.intentos--,this.puntos++,this.mostrarImagenSpinner=!0,this.dificultad){case"easy":this.puntos=this.puntos*1;break;case"medium":this.puntos=this.puntos*2;break;case"hard":this.puntos=this.puntos*3;break;default:break}setTimeout(()=>{setTimeout(()=>{this.mostrarImagenSpinner=!1,this.blockearRespuestas=!1},1e3),this.ObtenerPreguntas()},4e3)}else this.AbrirSnackBar(`Respuesta incorrecta la Respuesta Correcta era: ${this.respuestaCorrecta}`),this.blockearRespuestas=!0,this.intentos--,this.mostrarImagenSpinner=!0,setTimeout(()=>{setTimeout(()=>{this.mostrarImagenSpinner=!1,this.blockearRespuestas=!1},1e3),this.ObtenerPreguntas()},4e3);this.EstadoDeJuego()}}EstadoDeJuego(){this.intentos==0&&setTimeout(()=>{this.AbrirSnackBar(`Obtuviste ${this.puntos} Puntos`),this.blockearRespuestas=!0,this.blockearReintento=!1},4500)}AbrirSnackBar(e){this.snackbar.open(e,"Cerrar",{duration:4e3})}Volver(){this.RuteoHome()}RuteoHome(){this.router.navigate(["/home"])}mostrarTexto(){this.mostrarTooltip=!0}ocultarTexto(){this.mostrarTooltip=!1}CerrarSession(){U(this.auth),this.AbrirSnackBar("Se a cerrado la sesion"),setTimeout(()=>{this.RuteoHome()},1e3)}Reintentar(){this.intentos=10,this.puntos=0,this.mostrarBotones=!0}};t.\u0275fac=function(n){return new(n||t)(h(O),h(L),h(H),h(N))},t.\u0275cmp=R({type:t,selectors:[["app-preguntados"]],decls:16,vars:5,consts:[[1,"button-grid"],["mat-raised-button","",3,"click"],["mat-raised-button","","routerLink","/chat"],["mat-raised-button","","routerLink","/quien-soy"],["mat-raised-button","","color","warn",3,"click"],[1,"material-icons",3,"mouseover","mouseleave"],["class","tooltip",4,"ngIf"],["class","dificultad",4,"ngIf"],["class","spinner","diameter","100","color","accent","mode","indeterminate",4,"ngIf"],["class","spinnerImagen","diameter","100","color","accent","mode","indeterminate",4,"ngIf"],["class","container",4,"ngIf"],[1,"tooltip"],[1,"dificultad"],[1,"facil",3,"click"],[1,"medio",3,"click"],[1,"dificil",3,"click"],["diameter","100","color","accent","mode","indeterminate",1,"spinner"],["diameter","100","color","accent","mode","indeterminate",1,"spinnerImagen"],[1,"container"],[1,"preguntas-container"],[1,"preguntas"],[1,"texto"],[1,"imagen-container"],["alt","foto",1,"imagen",3,"src"],["class","botones",4,"ngFor","ngForOf"],[1,"sidebar"],[1,"puntos"],[1,"intentos"],["mat-raised-button","","color","primary","mat-raised-button","",1,"reintentar",3,"click","disabled"],[1,"botones"],["mat-raised-button","","color","accent",3,"click","disabled"]],template:function(n,s){n&1&&(a(0,"div",0)(1,"button",1),u("click",function(){return s.Volver()}),c(2,"Volver"),r(),a(3,"button",2),c(4,"Chat"),r(),a(5,"button",3),c(6,"Sobre M\xED"),r(),a(7,"button",4),u("click",function(){return s.CerrarSession()}),c(8,"Cerrar Sesi\xF3n"),r(),a(9,"i",5),u("mouseover",function(){return s.mostrarTexto()})("mouseleave",function(){return s.ocultarTexto()}),c(10,"account_circle"),r(),b(11,G,2,1,"div",6),r(),b(12,X,9,0,"div",7)(13,Y,1,0,"mat-progress-spinner",8)(14,tt,1,0,"mat-progress-spinner",9)(15,nt,17,7,"div",10)),n&2&&(p(11),l("ngIf",s.mostrarTooltip),p(),l("ngIf",s.mostrarBotones),p(),l("ngIf",s.mostrarSpinner),p(),l("ngIf",s.mostrarImagenSpinner),p(),l("ngIf",!s.mostrarBotones&&!s.mostrarSpinner))},dependencies:[B,j,$,J,P],styles:['.dificultad[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#ffffff80;padding:10%;border-radius:10px;text-align:center}.button-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;background-image:url("./media/grid-TFSRBOBQ.png");padding:10px;display:flex;justify-content:flex-end}.button-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;margin-bottom:10px;padding:20px 30px;font-size:20px}.content[_ngcontent-%COMP%]{padding-top:50px}.material-icons[_ngcontent-%COMP%]{margin-left:10px;margin-top:2px;font-size:40px}.dificultad[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;font-size:24px}.facil[_ngcontent-%COMP%]{background-color:#4caf50;width:100%}.medio[_ngcontent-%COMP%]{background-color:#2196f3;width:100%}.dificil[_ngcontent-%COMP%]{background-color:#f44336;width:100%}.dificultad[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:10px auto;padding:20px 30px;font-size:20px;color:#fff;border:none;border-radius:5px;cursor:pointer}.dificultad[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}.preguntas-container[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#ffffff80;padding:10px;border-radius:10px;text-align:center;margin-top:40px}.preguntas[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;font-size:30px}.botones[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:flex-end;flex-direction:column;margin:10px auto}.botones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;padding:20px 30px;font-size:15px;border:none;border-radius:5px;cursor:pointer;text-align:center;line-height:0}.container[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.sidebar[_ngcontent-%COMP%]{width:100%}.intentos[_ngcontent-%COMP%]{color:#fff;background-color:#ff000080;border-radius:20px;padding:10px 20px;font-size:18px;text-align:left}.puntos[_ngcontent-%COMP%]{color:#fff;background-color:#0000ff80;border-radius:20px;padding:10px 20px;font-size:18px;text-align:left}.imagen-container[_ngcontent-%COMP%]{margin-bottom:20px}.imagen[_ngcontent-%COMP%]{max-width:100%;max-height:200px}.spinner[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%}.spinnerImagen[_ngcontent-%COMP%]{top:60%;left:40%;position:absolute}.tooltip[_ngcontent-%COMP%]{position:absolute;background-color:#000c;color:#fff;padding:5px;border-radius:3px;z-index:9999}.texto[_ngcontent-%COMP%]{color:#fff;background-color:#00000080;border-radius:20px;padding:10px 20px;font-size:18px;text-align:left}.reintentar[_ngcontent-%COMP%]{display:block;padding:20px 30px;font-size:20px;border:none;border-radius:5px;cursor:pointer;text-align:center;line-height:0}']});let i=t;return i})();var it=[{path:"",component:Q}],W=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=_({type:t}),t.\u0275inj=x({imports:[M.forChild(it),M]});let i=t;return i})();var St=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=_({type:t}),t.\u0275inj=x({providers:[O],imports:[z,W,D,K,q,P]});let i=t;return i})();export{St as PreguntadosModule};
