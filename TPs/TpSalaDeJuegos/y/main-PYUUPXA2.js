var g1=Object.defineProperty,_1=Object.defineProperties;var v1=Object.getOwnPropertyDescriptors;var B0=Object.getOwnPropertySymbols,y1=Object.getPrototypeOf,b1=Object.prototype.hasOwnProperty,w1=Object.prototype.propertyIsEnumerable,I1=Reflect.get;var $0=(t,e,n)=>e in t?g1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w=(t,e)=>{for(var n in e||={})b1.call(e,n)&&$0(t,n,e[n]);if(B0)for(var n of B0(e))w1.call(e,n)&&$0(t,n,e[n]);return t},_e=(t,e)=>_1(t,v1(e));var Wi=(t,e,n)=>I1(y1(t),n,e);var p=(t,e,n)=>new Promise((i,r)=>{var o=c=>{try{a(n.next(c))}catch(l){r(l)}},s=c=>{try{a(n.throw(c))}catch(l){r(l)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var H0=null;var Gp=1,Kp=Symbol("SIGNAL");function le(t){let e=H0;return H0=t,e}var z0={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function E1(t){if(!(Zp(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Gp)){if(!t.producerMustRecompute(t)&&!Qp(t)){t.dirty=!1,t.lastCleanEpoch=Gp;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Gp}}function q0(t){return t&&(t.nextProducerIndex=0),le(t)}function W0(t,e){if(le(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Zp(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Yp(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Qp(t){_u(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(E1(n),i!==n.version))return!0}return!1}function G0(t){if(_u(t),Zp(t))for(let e=0;e<t.producerNode.length;e++)Yp(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Yp(t,e){if(x1(t),_u(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)Yp(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];_u(r),r.producerIndexOfThis[i]=e}}function Zp(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function _u(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function x1(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function C1(){throw new Error}var D1=C1;function K0(t){D1=t}function B(t){return typeof t=="function"}function Zo(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var vu=Zo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Or(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Pe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(B(i))try{i()}catch(o){e=o instanceof vu?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{Q0(o)}catch(s){e=e??[],s instanceof vu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new vu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Q0(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Or(n,e)}remove(e){let{_finalizers:n}=this;n&&Or(n,e),e instanceof t&&e._removeParent(this)}};Pe.EMPTY=(()=>{let t=new Pe;return t.closed=!0,t})();var Xp=Pe.EMPTY;function yu(t){return t instanceof Pe||t&&"closed"in t&&B(t.remove)&&B(t.add)&&B(t.unsubscribe)}function Q0(t){B(t)?t():t.unsubscribe()}var gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Xo={setTimeout(t,e,...n){let{delegate:i}=Xo;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Xo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function bu(t){Xo.setTimeout(()=>{let{onUnhandledError:e}=gn;if(e)e(t);else throw t})}function $a(){}var Y0=Jp("C",void 0,void 0);function Z0(t){return Jp("E",void 0,t)}function X0(t){return Jp("N",t,void 0)}function Jp(t,e,n){return{kind:t,value:e,error:n}}var Fr=null;function Jo(t){if(gn.useDeprecatedSynchronousErrorHandling){let e=!Fr;if(e&&(Fr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=Fr;if(Fr=null,n)throw i}}else t()}function J0(t){gn.useDeprecatedSynchronousErrorHandling&&Fr&&(Fr.errorThrown=!0,Fr.error=t)}var Lr=class extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yu(e)&&e.add(this)):this.destination=A1}static create(e,n,i){return new es(e,n,i)}next(e){this.isStopped?tm(X0(e),this):this._next(e)}error(e){this.isStopped?tm(Z0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?tm(Y0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},T1=Function.prototype.bind;function em(t,e){return T1.call(t,e)}var nm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){wu(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){wu(i)}else wu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){wu(n)}}},es=class extends Lr{constructor(e,n,i){super();let r;if(B(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&gn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&em(e.next,o),error:e.error&&em(e.error,o),complete:e.complete&&em(e.complete,o)}):r=e}this.destination=new nm(r)}};function wu(t){gn.useDeprecatedSynchronousErrorHandling?J0(t):bu(t)}function S1(t){throw t}function tm(t,e){let{onStoppedNotification:n}=gn;n&&Xo.setTimeout(()=>n(t,e))}var A1={closed:!0,next:$a,error:S1,complete:$a};var ts=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Tt(t){return t}function Iu(...t){return im(t)}function im(t){return t.length===0?Tt:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var Q=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=M1(n)?n:new es(n,i,r);return Jo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=eE(i),new i((r,o)=>{let s=new es({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[ts](){return this}pipe(...n){return im(n)(this)}toPromise(n){return n=eE(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function eE(t){var e;return(e=t??gn.Promise)!==null&&e!==void 0?e:Promise}function R1(t){return t&&B(t.next)&&B(t.error)&&B(t.complete)}function M1(t){return t&&t instanceof Lr||R1(t)&&yu(t)}function rm(t){return B(t?.lift)}function Y(t){return e=>{if(rm(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function K(t,e,n,i,r){return new om(t,e,n,i,r)}var om=class extends Lr{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ns(){return Y((t,e)=>{let n=null;t._refCount++;let i=K(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var is=class extends Q{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,rm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pe;let n=this.getSubject();e.add(this.source.subscribe(K(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pe.EMPTY)}return e}refCount(){return ns()(this)}};var tE=Zo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var He=(()=>{class t extends Q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new Eu(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new tE}next(n){Jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Xp:(this.currentObservers=null,o.push(n),new Pe(()=>{this.currentObservers=null,Or(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new Q;return n.source=this,n}}return t.create=(e,n)=>new Eu(e,n),t})(),Eu=class extends He{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:Xp}};var Xe=class extends He{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var sm={now(){return(sm.delegate||Date).now()},delegate:void 0};var xu=class extends Pe{constructor(e,n){super()}schedule(e,n=0){return this}};var Ha={setInterval(t,e,...n){let{delegate:i}=Ha;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ha;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var rs=class extends xu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return Ha.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Ha.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Or(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var os=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};os.now=sm.now;var ss=class extends os{constructor(e,n=os.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var za=new ss(rs);var Cu=class extends rs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var Du=class extends ss{};var am=new Du(Cu);var Ut=new Q(t=>t.complete());function nE(t){return t&&B(t.schedule)}function iE(t){return t[t.length-1]}function Tu(t){return B(iE(t))?t.pop():void 0}function Gi(t){return nE(iE(t))?t.pop():void 0}function cm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function oE(t,e,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(d){s(d)}}function c(u){try{l(i.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):r(u.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}function rE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vr(t){return this instanceof Vr?(this.v=t,this):new Vr(t)}function sE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(h){i[h]&&(r[h]=function(f){return new Promise(function(m,g){o.push([h,f,m,g])>1||a(h,f)})})}function a(h,f){try{c(i[h](f))}catch(m){d(o[0][3],m)}}function c(h){h.value instanceof Vr?Promise.resolve(h.value.v).then(l,u):d(o[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function aE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rE=="function"?rE(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),r(a,c,s.done,s.value)})}}function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Su=t=>t&&typeof t.length=="number"&&typeof t!="function";function Au(t){return B(t?.then)}function Ru(t){return B(t[ts])}function Mu(t){return Symbol.asyncIterator&&B(t?.[Symbol.asyncIterator])}function Nu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function N1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Pu=N1();function ku(t){return B(t?.[Pu])}function Ou(t){return sE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield Vr(n.read());if(r)return yield Vr(void 0);yield yield Vr(i)}}finally{n.releaseLock()}})}function Fu(t){return B(t?.getReader)}function ze(t){if(t instanceof Q)return t;if(t!=null){if(Ru(t))return P1(t);if(Su(t))return k1(t);if(Au(t))return O1(t);if(Mu(t))return cE(t);if(ku(t))return F1(t);if(Fu(t))return L1(t)}throw Nu(t)}function P1(t){return new Q(e=>{let n=t[ts]();if(B(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function k1(t){return new Q(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function O1(t){return new Q(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,bu)})}function F1(t){return new Q(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function cE(t){return new Q(e=>{V1(t,e).catch(n=>e.error(n))})}function L1(t){return cE(Ou(t))}function V1(t,e){var n,i,r,o;return oE(this,void 0,void 0,function*(){try{for(n=aE(t);i=yield n.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function Pt(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function Ki(t,e=0){return Y((n,i)=>{n.subscribe(K(i,r=>Pt(i,t,()=>i.next(r),e),()=>Pt(i,t,()=>i.complete(),e),r=>Pt(i,t,()=>i.error(r),e)))})}function Qi(t,e=0){return Y((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function lE(t,e){return ze(t).pipe(Qi(e),Ki(e))}function uE(t,e){return ze(t).pipe(Qi(e),Ki(e))}function dE(t,e){return new Q(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function hE(t,e){return new Q(n=>{let i;return Pt(n,e,()=>{i=t[Pu](),Pt(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>B(i?.return)&&i.return()})}function Lu(t,e){if(!t)throw new Error("Iterable cannot be null");return new Q(n=>{Pt(n,e,()=>{let i=t[Symbol.asyncIterator]();Pt(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function fE(t,e){return Lu(Ou(t),e)}function pE(t,e){if(t!=null){if(Ru(t))return lE(t,e);if(Su(t))return dE(t,e);if(Au(t))return uE(t,e);if(Mu(t))return Lu(t,e);if(ku(t))return hE(t,e);if(Fu(t))return fE(t,e)}throw Nu(t)}function Ae(t,e){return e?pE(t,e):ze(t)}function k(...t){let e=Gi(t);return Ae(t,e)}function as(t,e){let n=B(t)?t:()=>t,i=r=>r.error(n());return new Q(e?r=>e.schedule(i,0,r):i)}function lm(t){return!!t&&(t instanceof Q||B(t.lift)&&B(t.subscribe))}var di=Zo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function $(t,e){return Y((n,i)=>{let r=0;n.subscribe(K(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:j1}=Array;function U1(t,e){return j1(e)?t(...e):t(e)}function Vu(t){return $(e=>U1(t,e))}var{isArray:B1}=Array,{getPrototypeOf:$1,prototype:H1,keys:z1}=Object;function ju(t){if(t.length===1){let e=t[0];if(B1(e))return{args:e,keys:null};if(q1(e)){let n=z1(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function q1(t){return t&&typeof t=="object"&&$1(t)===H1}function Uu(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function jr(...t){let e=Gi(t),n=Tu(t),{args:i,keys:r}=ju(t);if(i.length===0)return Ae([],e);let o=new Q(W1(i,e,r?s=>Uu(r,s):Tt));return n?o.pipe(Vu(n)):o}function W1(t,e,n=Tt){return i=>{mE(e,()=>{let{length:r}=t,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)mE(e,()=>{let l=Ae(t[c],e),u=!1;l.subscribe(K(i,d=>{o[c]=d,u||(u=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function mE(t,e,n){t?Pt(n,t,e):e()}function gE(t,e,n,i,r,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<i?m(g):c.push(g),m=g=>{o&&e.next(g),l++;let _=!1;ze(n(g,u++)).subscribe(K(e,C=>{r?.(C),o?f(C):e.next(C)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;c.length&&l<i;){let C=c.shift();s?Pt(e,s,()=>m(C)):m(C)}h()}catch(C){e.error(C)}}))};return t.subscribe(K(e,f,()=>{d=!0,h()})),()=>{a?.()}}function qe(t,e,n=1/0){return B(e)?qe((i,r)=>$((o,s)=>e(i,o,r,s))(ze(t(i,r))),n):(typeof e=="number"&&(n=e),Y((i,r)=>gE(i,r,t,n)))}function cs(t=1/0){return qe(Tt,t)}function _E(){return cs(1)}function Yi(...t){return _E()(Ae(t,Gi(t)))}function Bu(t){return new Q(e=>{ze(t()).subscribe(e)})}function um(...t){let e=Tu(t),{args:n,keys:i}=ju(t),r=new Q(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;ze(n[u]).subscribe(K(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(i?Uu(i,a):a),o.complete())}))}});return e?r.pipe(Vu(e)):r}function _t(t,e){return Y((n,i)=>{let r=0;n.subscribe(K(i,o=>t.call(e,o,r++)&&i.next(o)))})}function Zi(t){return Y((e,n)=>{let i=null,r=!1,o;i=e.subscribe(K(n,void 0,void 0,s=>{o=ze(t(s,Zi(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function vE(t,e,n,i,r){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(K(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function Ur(t,e){return B(e)?qe(t,e,1):qe(t,1)}function $u(t,e=za){return Y((n,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let l=o;o=null,i.next(l)}};function c(){let l=s+t,u=e.now();if(u<l){r=this.schedule(void 0,l-u),i.add(r);return}a()}n.subscribe(K(i,l=>{o=l,s=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function Xi(t){return Y((e,n)=>{let i=!1;e.subscribe(K(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function en(t){return t<=0?()=>Ut:Y((e,n)=>{let i=0;e.subscribe(K(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function dm(t){return $(()=>t)}function Hu(t,e=Tt){return t=t??G1,Y((n,i)=>{let r,o=!0;n.subscribe(K(i,s=>{let a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function G1(t,e){return t===e}function zu(t=K1){return Y((e,n)=>{let i=!1;e.subscribe(K(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function K1(){return new di}function qa(t){return Y((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Fn(t,e){let n=arguments.length>=2;return i=>i.pipe(t?_t((r,o)=>t(r,o,i)):Tt,en(1),n?Xi(e):zu(()=>new di))}function ls(t){return t<=0?()=>Ut:Y((e,n)=>{let i=[];e.subscribe(K(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function hm(t,e){let n=arguments.length>=2;return i=>i.pipe(t?_t((r,o)=>t(r,o,i)):Tt,ls(1),n?Xi(e):zu(()=>new di))}function qu(t,e){return Y(vE(t,e,arguments.length>=2,!0))}function Wa(t){return _t((e,n)=>t<=n)}function us(...t){let e=Gi(t);return Y((n,i)=>{(e?Yi(t,n,e):Yi(t,n)).subscribe(i)})}function tn(t,e){return Y((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(K(i,c=>{r?.unsubscribe();let l=0,u=o++;ze(t(c,u)).subscribe(r=K(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Br(t){return Y((e,n)=>{ze(t).subscribe(K(n,()=>n.complete(),$a)),!n.closed&&e.subscribe(n)})}function We(t,e,n){let i=B(t)||e||n?{next:t,error:e,complete:n}:t;return i?Y((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(K(o,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),o.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),o.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):Tt}var Q1="https://g.co/ng/security#xss",R=class extends Error{constructor(e,n){super(bg(e,n)),this.code=e}};function bg(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function oc(t){return{toString:t}.toString()}var Wu="__parameters__";function Y1(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function XE(t,e,n){return oc(()=>{let i=Y1(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Wu)?c[Wu]:Object.defineProperty(c,Wu,{value:[]})[Wu];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var hi=globalThis;function we(t){for(let e in t)if(t[e]===we)return e;throw Error("Could not find renamed property on target object.")}function Z1(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function At(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(At).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Am(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var X1=we({__forward_ref__:we});function sc(t){return t.__forward_ref__=sc,t.toString=function(){return At(this())},t}function St(t){return JE(t)?t():t}function JE(t){return typeof t=="function"&&t.hasOwnProperty(X1)&&t.__forward_ref__===sc}function D(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ie(t){return{providers:t.providers||[],imports:t.imports||[]}}function wd(t){return yE(t,tx)||yE(t,nx)}function ex(t){return wd(t)!==null}function yE(t,e){return t.hasOwnProperty(e)?t[e]:null}function J1(t){let e=t&&(t[tx]||t[nx]);return e||null}function bE(t){return t&&(t.hasOwnProperty(wE)||t.hasOwnProperty(eO))?t[wE]:null}var tx=we({\u0275prov:we}),wE=we({\u0275inj:we}),nx=we({ngInjectableDef:we}),eO=we({ngInjectorDef:we}),T=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=D({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ix(t){return t&&!!t.\u0275providers}var tO=we({\u0275cmp:we}),nO=we({\u0275dir:we}),iO=we({\u0275pipe:we}),rO=we({\u0275mod:we}),ed=we({\u0275fac:we}),Ga=we({__NG_ELEMENT_ID__:we}),IE=we({__NG_ENV_ID__:we});function wg(t){return typeof t=="string"?t:t==null?"":String(t)}function oO(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():wg(t)}function sO(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new R(-200,t)}function Ig(t,e){throw new R(-201,!1)}var Z=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Z||{}),Rm;function rx(){return Rm}function kt(t){let e=Rm;return Rm=t,e}function ox(t,e,n){let i=wd(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&Z.Optional)return null;if(e!==void 0)return e;Ig(t,"Injector")}var aO={},Ka=aO,Mm="__NG_DI_FLAG__",td="ngTempTokenPath",cO="ngTokenPath",lO=/\n/gm,uO="\u0275",EE="__source",ms;function dO(){return ms}function Ji(t){let e=ms;return ms=t,e}function hO(t,e=Z.Default){if(ms===void 0)throw new R(-203,!1);return ms===null?ox(t,void 0,e):ms.get(t,e&Z.Optional?null:void 0,e)}function x(t,e=Z.Default){return(rx()||hO)(St(t),e)}function y(t,e=Z.Default){return x(t,Id(e))}function Id(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Nm(t){let e=[];for(let n=0;n<t.length;n++){let i=St(t[n]);if(Array.isArray(i)){if(i.length===0)throw new R(900,!1);let r,o=Z.Default;for(let s=0;s<i.length;s++){let a=i[s],c=fO(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(x(r,o))}else e.push(x(i))}return e}function sx(t,e){return t[Mm]=e,t.prototype[Mm]=e,t}function fO(t){return t[Mm]}function pO(t,e,n,i){let r=t[td];throw e[EE]&&r.unshift(e[EE]),t.message=mO(`
`+t.message,r,n,i),t[cO]=r,t[td]=null,t}function mO(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==uO?t.slice(2):t;let r=At(e);if(Array.isArray(e))r=e.map(At).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):At(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(lO,`
  `)}`}var Ue=sx(XE("Optional"),8);var Eg=sx(XE("SkipSelf"),4);function qr(t,e){let n=t.hasOwnProperty(ed);return n?t[ed]:null}function xg(t,e){t.forEach(n=>Array.isArray(n)?xg(n,e):e(n))}function ax(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function nd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function gO(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function _O(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function Cg(t,e,n){let i=ac(t,e);return i>=0?t[i|1]=n:(i=~i,_O(t,i,e,n)),i}function fm(t,e){let n=ac(t,e);if(n>=0)return t[n|1]}function ac(t,e){return vO(t,e,1)}function vO(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}var _s={},Ot=[],vs=new T(""),cx=new T("",-1),lx=new T(""),id=class{get(e,n=Ka){if(n===Ka){let i=new Error(`NullInjectorError: No provider for ${At(e)}!`);throw i.name="NullInjectorError",i}return n}},ux=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ux||{}),jn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(jn||{}),pe=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(pe||{});function yO(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function Pm(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{let o=r,s=n[++i];wO(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function bO(t){return t===3||t===4||t===6}function wO(t){return t.charCodeAt(0)===64}function Qa(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?xE(t,n,r,null,e[++i]):xE(t,n,r,null,null))}}return t}function xE(t,e,n,i,r){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var dx="ng-template";function IO(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&yO(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(Dg(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Dg(t){return t.type===4&&t.value!==dx}function EO(t,e,n){let i=t.type===4&&!n?dx:t.value;return e===i}function xO(t,e,n){let i=4,r=t.attrs,o=r!==null?TO(r):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!_n(i)&&!_n(c))return!1;if(s&&_n(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!EO(t,c,n)||c===""&&e.length===1){if(_n(i))return!1;s=!0}}else if(i&8){if(r===null||!IO(t,r,c,n)){if(_n(i))return!1;s=!0}}else{let l=e[++a],u=CO(c,r,Dg(t),n);if(u===-1){if(_n(i))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=r[u+1].toLowerCase(),i&2&&l!==d){if(_n(i))return!1;s=!0}}}}return _n(i)||s}function _n(t){return(t&1)===0}function CO(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return SO(e,t)}function hx(t,e,n=!1){for(let i=0;i<e.length;i++)if(xO(t,e[i],n))return!0;return!1}function DO(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function TO(t){for(let e=0;e<t.length;e++){let n=t[e];if(bO(n))return e}return t.length}function SO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function AO(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function CE(t,e){return t?":not("+e.trim()+")":e}function RO(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(i&2){let a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!_n(s)&&(e+=CE(o,r),r=""),i=s,o=o||!_n(i);n++}return r!==""&&(e+=CE(o,r)),e}function MO(t){return t.map(RO).join(",")}function NO(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!_n(r))break;r=o}i++}return{attrs:e,classes:n}}function nt(t){return oc(()=>{let e=vx(t),n=_e(w({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ux.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||jn.Emulated,styles:t.styles||Ot,_:null,schemas:t.schemas||null,tView:null,id:""});yx(n);let i=t.dependencies;return n.directiveDefs=TE(i,!1),n.pipeDefs=TE(i,!0),n.id=OO(n),n})}function PO(t){return tr(t)||px(t)}function kO(t){return t!==null}function re(t){return oc(()=>({type:t.type,bootstrap:t.bootstrap||Ot,declarations:t.declarations||Ot,imports:t.imports||Ot,exports:t.exports||Ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function DE(t,e){if(t==null)return _s;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,s,a=pe.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(n[o]=a!==pe.None?[i,a]:i,e[o]=s):n[o]=i}return n}function Be(t){return oc(()=>{let e=vx(t);return yx(e),e})}function fx(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function tr(t){return t[tO]||null}function px(t){return t[nO]||null}function mx(t){return t[iO]||null}function gx(t){let e=tr(t)||px(t)||mx(t);return e!==null?e.standalone:!1}function _x(t,e){let n=t[rO]||null;if(!n&&e===!0)throw new Error(`Type ${At(t)} does not have '\u0275mod' property.`);return n}function vx(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||_s,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ot,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:DE(t.inputs,e),outputs:DE(t.outputs),debugInfo:null}}function yx(t){t.features?.forEach(e=>e(t))}function TE(t,e){if(!t)return null;let n=e?mx:PO;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(kO)}function OO(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ed(t){return{\u0275providers:t}}function Cs(...t){return{\u0275providers:bx(!0,t),\u0275fromNgModule:!0}}function bx(t,...e){let n=[],i=new Set,r,o=s=>{n.push(s)};return xg(e,s=>{let a=s;km(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&wx(r,o),n}function wx(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];Tg(r,o=>{e(o,i)})}}function km(t,e,n,i){if(t=St(t),!t)return!1;let r=null,o=bE(t),s=!o&&tr(t);if(!o&&!s){let c=t.ngModule;if(o=bE(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)km(l,e,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let l;try{xg(o.imports,u=>{km(u,e,n,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&wx(l,e)}if(!a){let l=qr(r)||(()=>new r);e({provide:r,useFactory:l,deps:Ot},r),e({provide:lx,useValue:r,multi:!0},r),e({provide:vs,useValue:()=>x(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let l=t;Tg(c,u=>{e(u,l)})}}else return!1;return r!==t&&t.providers!==void 0}function Tg(t,e){for(let n of t)ix(n)&&(n=n.\u0275providers),Array.isArray(n)?Tg(n,e):e(n)}var FO=we({provide:String,useValue:we});function Ix(t){return t!==null&&typeof t=="object"&&FO in t}function LO(t){return!!(t&&t.useExisting)}function VO(t){return!!(t&&t.useFactory)}function ys(t){return typeof t=="function"}function jO(t){return!!t.useClass}var xd=new T(""),Qu={},UO={},pm;function Sg(){return pm===void 0&&(pm=new id),pm}var $t=class{},Ya=class extends $t{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fm(e,s=>this.processProvider(s)),this.records.set(cx,ds(void 0,this)),r.has("environment")&&this.records.set($t,ds(void 0,this));let o=this.records.get(xd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(lx,Ot,Z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=le(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),le(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Ji(this),i=kt(void 0),r;try{return e()}finally{Ji(n),kt(i)}}get(e,n=Ka,i=Z.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(IE))return e[IE](this);i=Id(i);let r,o=Ji(this),s=kt(void 0);try{if(!(i&Z.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=qO(e)&&wd(e);l&&this.injectableDefInScope(l)?c=ds(Om(e),Qu):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&Z.Self?Sg():this.parent;return n=i&Z.Optional&&n===Ka?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[td]=a[td]||[]).unshift(At(e)),o)throw a;return pO(a,e,"R3InjectorError",this.source)}else throw a}finally{kt(s),Ji(o)}}resolveInjectorInitializers(){let e=le(null),n=Ji(this),i=kt(void 0),r;try{let o=this.get(vs,Ot,Z.Self);for(let s of o)s()}finally{Ji(n),kt(i),le(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(At(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new R(205,!1)}processProvider(e){e=St(e);let n=ys(e)?e:St(e&&e.provide),i=$O(e);if(!ys(e)&&e.multi===!0){let r=this.records.get(n);r||(r=ds(void 0,Qu,!0),r.factory=()=>Nm(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=le(null);try{return n.value===Qu&&(n.value=UO,n.value=n.factory()),typeof n.value=="object"&&n.value&&zO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{le(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=St(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Om(t){let e=wd(t),n=e!==null?e.factory:qr(t);if(n!==null)return n;if(t instanceof T)throw new R(204,!1);if(t instanceof Function)return BO(t);throw new R(204,!1)}function BO(t){if(t.length>0)throw new R(204,!1);let n=J1(t);return n!==null?()=>n.factory(t):()=>new t}function $O(t){if(Ix(t))return ds(void 0,t.useValue);{let e=Ex(t);return ds(e,Qu)}}function Ex(t,e,n){let i;if(ys(t)){let r=St(t);return qr(r)||Om(r)}else if(Ix(t))i=()=>St(t.useValue);else if(VO(t))i=()=>t.useFactory(...Nm(t.deps||[]));else if(LO(t))i=()=>x(St(t.useExisting));else{let r=St(t&&(t.useClass||t.provide));if(HO(t))i=()=>new r(...Nm(t.deps));else return qr(r)||Om(r)}return i}function ds(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function HO(t){return!!t.deps}function zO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function qO(t){return typeof t=="function"||typeof t=="object"&&t instanceof T}function Fm(t,e){for(let n of t)Array.isArray(n)?Fm(n,e):n&&ix(n)?Fm(n.\u0275providers,e):e(n)}function mi(t,e){t instanceof Ya&&t.assertNotDestroyed();let n,i=Ji(t),r=kt(void 0);try{return e()}finally{Ji(i),kt(r)}}function xx(){return rx()!==void 0||dO()!=null}function WO(t){if(!xx())throw new R(-203,!1)}function GO(t){return typeof t=="function"}var gi=0,X=1,V=2,vt=3,yn=4,zt=5,Za=6,Xa=7,nn=8,bs=9,Un=10,je=11,Ja=12,SE=13,Ds=14,bn=15,Cd=16,hs=17,ws=18,Dd=19,Cx=20,er=21,mm=22,Wr=23,Ht=25,Dx=1;var Gr=7,rd=8,od=9,Bt=10,Ag=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ag||{});function Hr(t){return Array.isArray(t)&&typeof t[Dx]=="object"}function _i(t){return Array.isArray(t)&&t[Dx]===!0}function Tx(t){return(t.flags&4)!==0}function Td(t){return t.componentOffset>-1}function Rg(t){return(t.flags&1)===1}function nr(t){return!!t.template}function KO(t){return(t[V]&512)!==0}var Lm=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function Sx(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function rr(){return Ax}function Ax(t){return t.type.prototype.ngOnChanges&&(t.setInput=YO),QO}rr.ngInherit=!0;function QO(){let t=Mx(this),e=t?.current;if(e){let n=t.previous;if(n===_s)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function YO(t,e,n,i,r){let o=this.declaredInputs[i],s=Mx(t)||ZO(t,{previous:_s,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Lm(l&&l.currentValue,n,c===_s),Sx(t,e,r,n)}var Rx="__ngSimpleChanges__";function Mx(t){return t[Rx]||null}function ZO(t,e){return t[Rx]=e}var AE=null;var Ln=function(t,e,n){AE?.(t,e,n)},XO="svg",JO="math",eF=!1;function tF(){return eF}function Bn(t){for(;Array.isArray(t);)t=t[gi];return t}function Nx(t,e){return Bn(e[t])}function rn(t,e){return Bn(e[t.index])}function Mg(t,e){return t.data[e]}function nF(t,e){return t[e]}function or(t,e){let n=e[t];return Hr(n)?n:n[gi]}function Ng(t){return(t[V]&128)===128}function iF(t){return _i(t[vt])}function sd(t,e){return e==null?null:t[e]}function Px(t){t[hs]=0}function rF(t){t[V]&1024||(t[V]|=1024,Ng(t)&&ec(t))}function oF(t,e){for(;t>0;)e=e[Ds],t--;return e}function Pg(t){return!!(t[V]&9216||t[Wr]?.dirty)}function Vm(t){t[Un].changeDetectionScheduler?.notify(1),Pg(t)?ec(t):t[V]&64&&(tF()?(t[V]|=1024,ec(t)):t[Un].changeDetectionScheduler?.notify())}function ec(t){t[Un].changeDetectionScheduler?.notify();let e=tc(t);for(;e!==null&&!(e[V]&8192||(e[V]|=8192,!Ng(e)));)e=tc(e)}function kx(t,e){if((t[V]&256)===256)throw new R(911,!1);t[er]===null&&(t[er]=[]),t[er].push(e)}function sF(t,e){if(t[er]===null)return;let n=t[er].indexOf(e);n!==-1&&t[er].splice(n,1)}function tc(t){let e=t[vt];return _i(e)?e[vt]:e}var ee={lFrame:zx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function aF(){return ee.lFrame.elementDepthCount}function cF(){ee.lFrame.elementDepthCount++}function lF(){ee.lFrame.elementDepthCount--}function Ox(){return ee.bindingsEnabled}function Fx(){return ee.skipHydrationRootTNode!==null}function uF(t){return ee.skipHydrationRootTNode===t}function dF(){ee.skipHydrationRootTNode=null}function me(){return ee.lFrame.lView}function yt(){return ee.lFrame.tView}function Sd(t){return ee.lFrame.contextLView=t,t[nn]}function Ad(t){return ee.lFrame.contextLView=null,t}function qt(){let t=Lx();for(;t!==null&&t.type===64;)t=t.parent;return t}function Lx(){return ee.lFrame.currentTNode}function hF(){let t=ee.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function cc(t,e){let n=ee.lFrame;n.currentTNode=t,n.isParent=e}function Vx(){return ee.lFrame.isParent}function jx(){ee.lFrame.isParent=!1}function fF(){let t=ee.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function pF(t){return ee.lFrame.bindingIndex=t}function lc(){return ee.lFrame.bindingIndex++}function Ux(t){let e=ee.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function mF(){return ee.lFrame.inI18n}function gF(t,e){let n=ee.lFrame;n.bindingIndex=n.bindingRootIndex=t,jm(e)}function _F(){return ee.lFrame.currentDirectiveIndex}function jm(t){ee.lFrame.currentDirectiveIndex=t}function vF(t){let e=ee.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Bx(t){ee.lFrame.currentQueryIndex=t}function yF(t){let e=t[X];return e.type===2?e.declTNode:e.type===1?t[zt]:null}function $x(t,e,n){if(n&Z.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&Z.Host);)if(r=yF(o),r===null||(o=o[Ds],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=ee.lFrame=Hx();return i.currentTNode=e,i.lView=t,!0}function kg(t){let e=Hx(),n=t[X];ee.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Hx(){let t=ee.lFrame,e=t===null?null:t.child;return e===null?zx(t):e}function zx(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function qx(){let t=ee.lFrame;return ee.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Wx=qx;function Og(){let t=qx();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function bF(t){return(ee.lFrame.contextLView=oF(t,ee.lFrame.contextLView))[nn]}function Jr(){return ee.lFrame.selectedIndex}function Kr(t){ee.lFrame.selectedIndex=t}function Fg(){let t=ee.lFrame;return Mg(t.tView,t.selectedIndex)}function wF(){return ee.lFrame.currentNamespace}var Gx=!0;function Lg(){return Gx}function Vg(t){Gx=t}function IF(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=Ax(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function jg(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Yu(t,e,n){Kx(t,e,3,n)}function Zu(t,e,n,i){(t[V]&3)===n&&Kx(t,e,n,i)}function gm(t,e){let n=t[V];(n&3)===e&&(n&=16383,n+=1,t[V]=n)}function Kx(t,e,n,i){let r=i!==void 0?t[hs]&65535:0,o=i??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(t[hs]+=65536),(a<o||o==-1)&&(EF(t,n,e,c),t[hs]=(t[hs]&4294901760)+c+2),c++}function RE(t,e){Ln(4,t,e);let n=le(null);try{e.call(t)}finally{le(n),Ln(5,t,e)}}function EF(t,e,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=t[s];r?t[V]>>14<t[hs]>>16&&(t[V]&3)===e&&(t[V]+=16384,RE(a,o)):RE(a,o)}var gs=-1,Qr=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function xF(t){return t instanceof Qr}function CF(t){return(t.flags&8)!==0}function DF(t){return(t.flags&16)!==0}function Qx(t){return t!==gs}function ad(t){return t&32767}function TF(t){return t>>16}function cd(t,e){let n=TF(t),i=e;for(;n>0;)i=i[Ds],n--;return i}var Um=!0;function ld(t){let e=Um;return Um=t,e}var SF=256,Yx=SF-1,Zx=5,AF=0,Vn={};function RF(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Ga)&&(i=n[Ga]),i==null&&(i=n[Ga]=AF++);let r=i&Yx,o=1<<r;e.data[t+(r>>Zx)]|=o}function ud(t,e){let n=Xx(t,e);if(n!==-1)return n;let i=e[X];i.firstCreatePass&&(t.injectorIndex=e.length,_m(i.data,t),_m(e,null),_m(i.blueprint,null));let r=Ug(t,e),o=t.injectorIndex;if(Qx(r)){let s=ad(r),a=cd(r,e),c=a[X].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function _m(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Xx(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Ug(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=iC(r),i===null)return gs;if(n++,r=r[Ds],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return gs}function Bm(t,e,n){RF(t,e,n)}function Jx(t,e,n){if(n&Z.Optional||t!==void 0)return t;Ig(e,"NodeInjector")}function eC(t,e,n,i){if(n&Z.Optional&&i===void 0&&(i=null),!(n&(Z.Self|Z.Host))){let r=t[bs],o=kt(void 0);try{return r?r.get(e,i,n&Z.Optional):ox(e,i,n&Z.Optional)}finally{kt(o)}}return Jx(i,e,n)}function tC(t,e,n,i=Z.Default,r){if(t!==null){if(e[V]&2048&&!(i&Z.Self)){let s=OF(t,e,n,i,Vn);if(s!==Vn)return s}let o=nC(t,e,n,i,Vn);if(o!==Vn)return o}return eC(e,n,i,r)}function nC(t,e,n,i,r){let o=PF(n);if(typeof o=="function"){if(!$x(e,t,i))return i&Z.Host?Jx(r,n,i):eC(e,n,i,r);try{let s;if(s=o(i),s==null&&!(i&Z.Optional))Ig(n);else return s}finally{Wx()}}else if(typeof o=="number"){let s=null,a=Xx(t,e),c=gs,l=i&Z.Host?e[bn][zt]:null;for((a===-1||i&Z.SkipSelf)&&(c=a===-1?Ug(t,e):e[a+8],c===gs||!NE(i,!1)?a=-1:(s=e[X],a=ad(c),e=cd(c,e)));a!==-1;){let u=e[X];if(ME(o,a,u.data)){let d=MF(a,e,n,s,i,l);if(d!==Vn)return d}c=e[a+8],c!==gs&&NE(i,e[X].data[a+8]===l)&&ME(o,a,e)?(s=u,a=ad(c),e=cd(c,e)):a=-1}}return r}function MF(t,e,n,i,r,o){let s=e[X],a=s.data[t+8],c=i==null?Td(a)&&Um:i!=s&&(a.type&3)!==0,l=r&Z.Host&&o===a,u=NF(a,s,n,c,l);return u!==null?Is(e,s,u,a):Vn}function NF(t,e,n,i,r){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=i?a:a+u,h=r?a+u:l;for(let f=d;f<h;f++){let m=s[f];if(f<c&&n===m||f>=c&&m.type===n)return f}if(r){let f=s[c];if(f&&nr(f)&&f.type===n)return c}return null}function Is(t,e,n,i){let r=t[n],o=e.data;if(xF(r)){let s=r;s.resolving&&sO(oO(o[n]));let a=ld(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?kt(s.injectImpl):null,u=$x(t,i,Z.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&IF(n,o[n],e)}finally{l!==null&&kt(l),ld(a),s.resolving=!1,Wx()}}return r}function PF(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ga)?t[Ga]:void 0;return typeof e=="number"?e>=0?e&Yx:kF:e}function ME(t,e,n){let i=1<<t;return!!(n[e+(t>>Zx)]&i)}function NE(t,e){return!(t&Z.Self)&&!(t&Z.Host&&e)}var zr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return tC(this._tNode,this._lView,e,Id(i),n)}};function kF(){return new zr(qt(),me())}function uc(t){return oc(()=>{let e=t.prototype.constructor,n=e[ed]||$m(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[ed]||$m(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function $m(t){return JE(t)?()=>{let e=$m(St(t));return e&&e()}:qr(t)}function OF(t,e,n,i,r){let o=t,s=e;for(;o!==null&&s!==null&&s[V]&2048&&!(s[V]&512);){let a=nC(o,s,n,i|Z.Self,Vn);if(a!==Vn)return a;let c=o.parent;if(!c){let l=s[Cx];if(l){let u=l.get(n,Vn,i);if(u!==Vn)return u}c=iC(s),s=s[Ds]}o=c}return r}function iC(t){let e=t[X],n=e.type;return n===2?e.declTNode:n===1?t[zt]:null}function PE(t,e=null,n=null,i){let r=rC(t,e,n,i);return r.resolveInjectorInitializers(),r}function rC(t,e=null,n=null,i,r=new Set){let o=[n||Ot,Cs(t)];return i=i||(typeof t=="object"?void 0:At(t)),new Ya(o,e||Sg(),i||null,r)}var ht=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return PE({name:""},r,i,"");{let o=i.name??"";return PE({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=Ka,e.NULL=new id,e.\u0275prov=D({token:e,providedIn:"any",factory:()=>x(cx)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var FF="ngOriginalError";function vm(t){return t[FF]}var $n=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&vm(e);for(;n&&vm(n);)n=vm(n);return n||null}},oC=new T("",{providedIn:"root",factory:()=>y($n).handleError.bind(void 0)}),Bg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=LF,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),Hm=class extends Bg{constructor(e){super(),this._lView=e}onDestroy(e){return kx(this._lView,e),()=>sF(this._lView,e)}};function LF(){return new Hm(me())}function VF(){return Rd(qt(),me())}function Rd(t,e){return new Ge(rn(t,e))}var Ge=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=VF;let t=e;return t})();var zm=class extends He{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,xx()&&(this.destroyRef=y(Bg,{optional:!0})??void 0)}emit(e){let n=le(null);try{super.next(e)}finally{le(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=ym(o),r&&(r=ym(r)),s&&(s=ym(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof Pe&&e.add(a),a}};function ym(t){return e=>{setTimeout(t,void 0,e)}}var dt=zm;function sC(t){return(t.flags&128)===128}var aC=new Map,jF=0;function UF(){return jF++}function BF(t){aC.set(t[Dd],t)}function $F(t){aC.delete(t[Dd])}var kE="__ngContext__";function Yr(t,e){Hr(e)?(t[kE]=e[Dd],BF(e)):t[kE]=e}function cC(t){return uC(t[Ja])}function lC(t){return uC(t[yn])}function uC(t){for(;t!==null&&!_i(t);)t=t[yn];return t}var qm;function dC(t){qm=t}function HF(){if(qm!==void 0)return qm;if(typeof document<"u")return document;throw new R(210,!1)}var Md=new T("",{providedIn:"root",factory:()=>zF}),zF="ng",$g=new T(""),on=new T("",{providedIn:"platform",factory:()=>"unknown"});var dc=new T(""),hc=new T("",{providedIn:"root",factory:()=>HF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var qF="h",WF="b";var GF=()=>null;function Hg(t,e,n=!1){return GF(t,e,n)}var hC=!1,KF=new T("",{providedIn:"root",factory:()=>hC});var Wm=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Q1})`}};function Nd(t){return t instanceof Wm?t.changingThisBreaksApplicationSecurity:t}function fC(t){return t instanceof Function?t():t}function QF(t){return(t??y(ht)).get(on)==="browser"}var fi=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(fi||{}),YF;function zg(t,e){return YF(t,e)}function fs(t,e,n,i,r){if(i!=null){let o,s=!1;_i(i)?o=i:Hr(i)&&(s=!0,i=i[gi]);let a=Bn(i);t===0&&n!==null?r==null?vC(e,n,a):hd(e,n,a,r||null,!0):t===1&&n!==null?hd(e,n,a,r||null,!0):t===2?dL(e,a,s):t===3&&e.destroyNode(a),o!=null&&fL(e,t,o,n,r)}}function ZF(t,e){return t.createText(e)}function XF(t,e,n){t.setValue(e,n)}function pC(t,e,n){return t.createElement(e,n)}function JF(t,e){mC(t,e),e[gi]=null,e[zt]=null}function eL(t,e,n,i,r,o){i[gi]=r,i[zt]=e,Pd(t,i,n,1,r,o)}function mC(t,e){e[Un].changeDetectionScheduler?.notify(1),Pd(t,e,e[je],2,null,null)}function tL(t){let e=t[Ja];if(!e)return bm(t[X],t);for(;e;){let n=null;if(Hr(e))n=e[Ja];else{let i=e[Bt];i&&(n=i)}if(!n){for(;e&&!e[yn]&&e!==t;)Hr(e)&&bm(e[X],e),e=e[vt];e===null&&(e=t),Hr(e)&&bm(e[X],e),n=e&&e[yn]}e=n}}function nL(t,e,n,i){let r=Bt+i,o=n.length;i>0&&(n[r-1][yn]=e),i<o-Bt?(e[yn]=n[r],ax(n,Bt+i,e)):(n.push(e),e[yn]=null),e[vt]=n;let s=e[Cd];s!==null&&n!==s&&iL(s,e);let a=e[ws];a!==null&&a.insertView(t),Vm(e),e[V]|=128}function iL(t,e){let n=t[od],r=e[vt][vt][bn];e[bn]!==r&&(t[V]|=Ag.HasTransplantedViews),n===null?t[od]=[e]:n.push(e)}function gC(t,e){let n=t[od],i=n.indexOf(e);n.splice(i,1)}function dd(t,e){if(t.length<=Bt)return;let n=Bt+e,i=t[n];if(i){let r=i[Cd];r!==null&&r!==t&&gC(r,i),e>0&&(t[n-1][yn]=i[yn]);let o=nd(t,Bt+e);JF(i[X],i);let s=o[ws];s!==null&&s.detachView(o[X]),i[vt]=null,i[yn]=null,i[V]&=-129}return i}function qg(t,e){if(!(e[V]&256)){let n=e[je];n.destroyNode&&Pd(t,e,n,3,null,null),tL(e)}}function bm(t,e){if(e[V]&256)return;let n=le(null);try{e[V]&=-129,e[V]|=256,e[Wr]&&G0(e[Wr]),oL(t,e),rL(t,e),e[X].type===1&&e[je].destroy();let i=e[Cd];if(i!==null&&_i(e[vt])){i!==e[vt]&&gC(i,e);let r=e[ws];r!==null&&r.detachView(t)}$F(e)}finally{le(n)}}function rL(t,e){let n=t.cleanup,i=e[Xa];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[n[o+1]];n[o].call(s)}i!==null&&(e[Xa]=null);let r=e[er];if(r!==null){e[er]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function oL(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof Qr)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];Ln(4,a,c);try{c.call(a)}finally{Ln(5,a,c)}}else{Ln(4,r,o);try{o.call(r)}finally{Ln(5,r,o)}}}}}function _C(t,e,n){return sL(t,e.parent,n)}function sL(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[gi];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===jn.None||o===jn.Emulated)return null}return rn(i,n)}}function hd(t,e,n,i,r){t.insertBefore(e,n,i,r)}function vC(t,e,n){t.appendChild(e,n)}function OE(t,e,n,i,r){i!==null?hd(t,e,n,i,r):vC(t,e,n)}function aL(t,e,n,i){t.removeChild(e,n,i)}function Wg(t,e){return t.parentNode(e)}function cL(t,e){return t.nextSibling(e)}function yC(t,e,n){return uL(t,e,n)}function lL(t,e,n){return t.type&40?rn(t,n):null}var uL=lL,FE;function Gg(t,e,n,i){let r=_C(t,i,e),o=e[je],s=i.parent||e[zt],a=yC(s,i,e);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)OE(o,r,n[c],a,!1);else OE(o,r,n,a,!1);FE!==void 0&&FE(o,i,e,n,r)}function Xu(t,e){if(e!==null){let n=e.type;if(n&3)return rn(e,t);if(n&4)return Gm(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return Xu(t,i);{let r=t[e.index];return _i(r)?Gm(-1,r):Bn(r)}}else{if(n&32)return zg(e,t)()||Bn(t[e.index]);{let i=bC(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=tc(t[bn]);return Xu(r,i)}else return Xu(t,e.next)}}}return null}function bC(t,e){if(e!==null){let i=t[bn][zt],r=e.projection;return i.projection[r]}return null}function Gm(t,e){let n=Bt+t+1;if(n<e.length){let i=e[n],r=i[X].firstChild;if(r!==null)return Xu(i,r)}return e[Gr]}function dL(t,e,n){let i=Wg(t,e);i&&aL(t,i,e,n)}function Kg(t,e,n,i,r,o,s){for(;n!=null;){let a=i[n.index],c=n.type;if(s&&e===0&&(a&&Yr(Bn(a),i),n.flags|=2),(n.flags&32)!==32)if(c&8)Kg(t,e,n.child,i,r,o,!1),fs(e,t,r,a,o);else if(c&32){let l=zg(n,i),u;for(;u=l();)fs(e,t,r,u,o);fs(e,t,r,a,o)}else c&16?wC(t,e,i,n,r,o):fs(e,t,r,a,o);n=s?n.projectionNext:n.next}}function Pd(t,e,n,i,r,o){Kg(n,i,t.firstChild,e,r,o,!1)}function hL(t,e,n){let i=e[je],r=_C(t,n,e),o=n.parent||e[zt],s=yC(o,n,e);wC(i,0,e,n,r,s)}function wC(t,e,n,i,r,o){let s=n[bn],c=s[zt].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];fs(e,t,r,u,o)}else{let l=c,u=s[vt];sC(i)&&(l.flags|=128),Kg(t,e,l,u,r,o,!0)}}function fL(t,e,n,i,r){let o=n[Gr],s=Bn(n);o!==s&&fs(e,t,i,o,r);for(let a=Bt;a<n.length;a++){let c=n[a];Pd(c[X],c,t,e,i,o)}}function pL(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:fi.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=fi.Important),t.setStyle(n,i,r,o))}}function mL(t,e,n){t.setAttribute(e,"style",n)}function IC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function EC(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&Pm(t,e,i),r!==null&&IC(t,e,r),o!==null&&mL(t,e,o)}var vi={};function Me(t=1){xC(yt(),me(),Jr()+t,!1)}function xC(t,e,n,i){if(!i)if((e[V]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Yu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Zu(e,o,0,n)}Kr(n)}function M(t,e=Z.Default){let n=me();if(n===null)return x(t,e);let i=qt();return tC(i,n,St(t),e)}function kd(){let t="invalid";throw new Error(t)}function CC(t,e,n,i,r,o){let s=le(null);try{let a=null;r&pe.SignalBased&&(a=e[i][Kp]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&pe.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,i):Sx(e,a,i,o)}finally{le(s)}}function gL(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Kr(~r);else{let o=r,s=n[++i],a=n[++i];gF(s,o);let c=e[o];a(2,c)}}}finally{Kr(-1)}}function Od(t,e,n,i,r,o,s,a,c,l,u){let d=e.blueprint.slice();return d[gi]=r,d[V]=i|4|128|8|64,(l!==null||t&&t[V]&2048)&&(d[V]|=2048),Px(d),d[vt]=d[Ds]=t,d[nn]=n,d[Un]=s||t&&t[Un],d[je]=a||t&&t[je],d[bs]=c||t&&t[bs]||null,d[zt]=o,d[Dd]=UF(),d[Za]=u,d[Cx]=l,d[bn]=e.type==2?t[bn]:d,d}function fc(t,e,n,i,r){let o=t.data[e];if(o===null)o=_L(t,e,n,i,r),mF()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=hF();o.injectorIndex=s===null?-1:s.injectorIndex}return cc(o,!0),o}function _L(t,e,n,i,r){let o=Lx(),s=Vx(),a=s?o:o&&o.parent,c=t.data[e]=IL(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function DC(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function TC(t,e,n,i,r){let o=Jr(),s=i&2;try{Kr(-1),s&&e.length>Ht&&xC(t,e,Ht,!1),Ln(s?2:0,r),n(i,r)}finally{Kr(o),Ln(s?3:1,r)}}function SC(t,e,n){if(Tx(e)){let i=le(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{le(i)}}}function AC(t,e,n){Ox()&&(SL(t,e,n,rn(n,e)),(n.flags&64)===64&&OC(t,e,n))}function RC(t,e,n=rn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(e,t):t[s];t[r++]=a}}}function MC(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Qg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Qg(t,e,n,i,r,o,s,a,c,l,u){let d=Ht+i,h=d+r,f=vL(d,h),m=typeof l=="function"?l():l;return f[X]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function vL(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:vi);return n}function yL(t,e,n,i){let o=i.get(KF,hC)||n===jn.ShadowDom,s=t.selectRootElement(e,o);return bL(s),s}function bL(t){wL(t)}var wL=()=>null;function IL(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return Fx()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function LE(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;i??={};let a,c=pe.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(r!==null){if(!r.hasOwnProperty(o))continue;l=r[o]}t===0?VE(i,n,l,a,c):VE(i,n,l,a)}return i}function VE(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function EL(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=i;u<r;u++){let d=o[u],h=n?n.get(d):null,f=h?h.inputs:null,m=h?h.outputs:null;c=LE(0,d.inputs,u,c,f),l=LE(1,d.outputs,u,l,m);let g=c!==null&&s!==null&&!Dg(e)?jL(c,u,s):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function xL(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function NC(t,e,n,i,r,o,s,a){let c=rn(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[i])?(Yg(t,n,u,i,r),Td(e)&&CL(n,e.index)):e.type&3?(i=xL(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(c,i,r)):e.type&12}function CL(t,e){let n=or(e,t);n[V]&16||(n[V]|=64)}function PC(t,e,n,i){if(Ox()){let r=i===null?null:{"":-1},o=RL(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&kC(t,e,n,s,r,a),r&&ML(n,i,r)}n.mergedAttrs=Qa(n.mergedAttrs,n.attrs)}function kC(t,e,n,i,r,o){for(let l=0;l<i.length;l++)Bm(ud(n,e),t,i[l].type);PL(n,t.data.length,i.length);for(let l=0;l<i.length;l++){let u=i[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=DC(t,e,i.length,null);for(let l=0;l<i.length;l++){let u=i[l];n.mergedAttrs=Qa(n.mergedAttrs,u.hostAttrs),kL(t,n,e,c,u),NL(c,u,r),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}EL(t,n,o)}function DL(t,e,n,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;TL(s)!=a&&s.push(a),s.push(n,i,o)}}function TL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function SL(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;Td(n)&&OL(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||ud(n,e),Yr(i,e);let s=n.initialInputs;for(let a=r;a<o;a++){let c=t.data[a],l=Is(e,t,a,n);if(Yr(l,e),s!==null&&VL(e,a-r,l,c,n,s),nr(c)){let u=or(n.index,e);u[nn]=Is(e,t,a,n)}}}function OC(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=_F();try{Kr(o);for(let a=i;a<r;a++){let c=t.data[a],l=e[a];jm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&AL(c,l)}}finally{Kr(-1),jm(s)}}function AL(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function RL(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(hx(e,s.selectors,!1))if(i||(i=[]),nr(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let c=a.length;Km(t,e,c)}else i.unshift(s),Km(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function Km(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ML(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new R(-301,!1);i.push(e[r],o)}}}function NL(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;nr(e)&&(n[""]=t)}}function PL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function kL(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=qr(r.type,!0)),s=new Qr(o,nr(r),M);t.blueprint[i]=s,n[i]=s,DL(t,e,i,DC(t,n,r.hostVars,vi),r)}function OL(t,e,n){let i=rn(e,t),r=MC(n),o=t[Un].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Fd(t,Od(t,r,null,s,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=a}function FL(t,e,n,i,r,o){let s=rn(t,e);LL(e[je],s,o,t.value,n,i,r)}function LL(t,e,n,i,r,o,s){if(o==null)t.removeAttribute(e,r,n);else{let a=s==null?wg(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}function VL(t,e,n,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];CC(i,n,c,l,u,d)}}function jL(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){i.push(o,s[a+1],s[a+2],n[r+1]);break}}r+=2}return i}function FC(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function LC(t,e){let n=t.contentQueries;if(n!==null){let i=le(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=t.data[s];Bx(o),a.contentQueries(2,e[s],s)}}}finally{le(i)}}}function Fd(t,e){return t[Ja]?t[SE][yn]=e:t[Ja]=e,t[SE]=e,e}function Qm(t,e,n){Bx(0);let i=le(null);try{e(t,n)}finally{le(i)}}function UL(t){return t[Xa]||(t[Xa]=[])}function BL(t){return t.cleanup||(t.cleanup=[])}function VC(t,e){let n=t[bs],i=n?n.get($n,null):null;i&&i.handleError(e)}function Yg(t,e,n,i,r){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],u=t.data[s];CC(u,l,i,a,c,r)}}function $L(t,e,n){let i=Nx(e,t);XF(t[je],i,n)}function HL(t,e){let n=or(e,t),i=n[X];zL(i,n);let r=n[gi];r!==null&&n[Za]===null&&(n[Za]=Hg(r,n[bs])),Zg(i,n,n[nn])}function zL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Zg(t,e,n){kg(e);try{let i=t.viewQuery;i!==null&&Qm(1,i,n);let r=t.template;r!==null&&TC(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ws]?.finishViewCreation(t),t.staticContentQueries&&LC(t,e),t.staticViewQueries&&Qm(2,t.viewQuery,n);let o=t.components;o!==null&&qL(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[V]&=-5,Og()}}function qL(t,e){for(let n=0;n<e.length;n++)HL(t,e[n])}function jC(t,e,n,i){let r=le(null);try{let o=e.tView,a=t[V]&4096?4096:16,c=Od(t,o,n,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=t[e.index];c[Cd]=l;let u=t[ws];return u!==null&&(c[ws]=u.createEmbeddedView(o)),Zg(o,c,n),c}finally{le(r)}}function WL(t,e){let n=Bt+e;if(n<t.length)return t[n]}function Ym(t,e){return!e||e.firstChild===null||sC(t)}function UC(t,e,n,i=!0){let r=e[X];if(nL(r,e,t,n),i){let s=Gm(n,t),a=e[je],c=Wg(a,t[Gr]);c!==null&&eL(r,t[zt],a,e,c,s)}let o=e[Za];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function GL(t,e){let n=dd(t,e);return n!==void 0&&qg(n[X],n),n}function fd(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(Bn(o)),_i(o)&&KL(o,i);let s=n.type;if(s&8)fd(t,e,n.child,i);else if(s&32){let a=zg(n,e),c;for(;c=a();)i.push(c)}else if(s&16){let a=bC(e,n);if(Array.isArray(a))i.push(...a);else{let c=tc(e[bn]);fd(c[X],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function KL(t,e){for(let n=Bt;n<t.length;n++){let i=t[n],r=i[X].firstChild;r!==null&&fd(i[X],i,r,e)}t[Gr]!==t[gi]&&e.push(t[Gr])}var BC=[];function QL(t){return t[Wr]??YL(t)}function YL(t){let e=BC.pop()??Object.create(XL);return e.lView=t,e}function ZL(t){t.lView[Wr]!==t&&(t.lView=null,BC.push(t))}var XL=_e(w({},z0),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ec(t.lView)},consumerOnSignalRead(){this.lView[Wr]=this}}),$C=100;function HC(t,e=!0,n=0){let i=t[Un],r=i.rendererFactory,o=!1;o||r.begin?.();try{JL(t,n)}catch(s){throw e&&VC(t,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function JL(t,e){Zm(t,e);let n=0;for(;Pg(t);){if(n===$C)throw new R(103,!1);n++,Zm(t,1)}}function eV(t,e,n,i){let r=e[V];if((r&256)===256)return;let o=!1;!o&&e[Un].inlineEffectRunner?.flush(),kg(e);let s=null,a=null;!o&&tV(t)&&(a=QL(e),s=q0(a));try{Px(e),pF(t.bindingStartIndex),n!==null&&TC(t,e,n,2,i);let c=(r&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&Yu(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Zu(e,d,0,null),gm(e,0)}if(nV(e),zC(e,0),t.contentQueries!==null&&LC(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&Yu(e,d)}else{let d=t.contentHooks;d!==null&&Zu(e,d,1),gm(e,1)}gL(t,e);let l=t.components;l!==null&&WC(e,l,0);let u=t.viewQuery;if(u!==null&&Qm(2,u,i),!o)if(c){let d=t.viewCheckHooks;d!==null&&Yu(e,d)}else{let d=t.viewHooks;d!==null&&Zu(e,d,2),gm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[mm]){for(let d of e[mm])d();e[mm]=null}o||(e[V]&=-73)}catch(c){throw ec(e),c}finally{a!==null&&(W0(a,s),ZL(a)),Og()}}function tV(t){return t.type!==2}function zC(t,e){for(let n=cC(t);n!==null;n=lC(n))for(let i=Bt;i<n.length;i++){let r=n[i];qC(r,e)}}function nV(t){for(let e=cC(t);e!==null;e=lC(e)){if(!(e[V]&Ag.HasTransplantedViews))continue;let n=e[od];for(let i=0;i<n.length;i++){let r=n[i],o=r[vt];rF(r)}}}function iV(t,e,n){let i=or(e,t);qC(i,n)}function qC(t,e){Ng(t)&&Zm(t,e)}function Zm(t,e){let i=t[X],r=t[V],o=t[Wr],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&Qp(o)),o&&(o.dirty=!1),t[V]&=-9217,s)eV(i,t,i.template,t[nn]);else if(r&8192){zC(t,1);let a=i.components;a!==null&&WC(t,a,1)}}function WC(t,e,n){for(let i=0;i<e.length;i++)iV(t,e[i],n)}function Xg(t){for(t[Un].changeDetectionScheduler?.notify();t;){t[V]|=64;let e=tc(t);if(KO(t)&&!e)return t;t=e}return null}var Zr=class{get rootNodes(){let e=this._lView,n=e[X];return fd(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nn]}set context(e){this._lView[nn]=e}get destroyed(){return(this._lView[V]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vt];if(_i(e)){let n=e[rd],i=n?n.indexOf(this):-1;i>-1&&(dd(e,i),nd(n,i))}this._attachedToViewContainer=!1}qg(this._lView[X],this._lView)}onDestroy(e){kx(this._lView,e)}markForCheck(){Xg(this._cdRefInjectingView||this._lView)}detach(){this._lView[V]&=-129}reattach(){Vm(this._lView),this._lView[V]|=128}detectChanges(){this._lView[V]|=1024,HC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,mC(this._lView[X],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=e,Vm(this._lView)}},Ld=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=sV;let t=e;return t})(),rV=Ld,oV=class extends rV{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=jC(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new Zr(r)}};function sV(){return aV(qt(),me())}function aV(t,e){return t.type&4?new oV(e,t,Rd(t,e)):null}var pX=new RegExp(`^(\\d+)*(${WF}|${qF})*(.*)`);var cV=()=>null;function Xm(t,e){return cV(t,e)}var pd=class{},Jm=class{},md=class{};function lV(t){let e=Error(`No component factory found for ${At(t)}.`);return e[uV]=t,e}var uV="ngComponent";var eg=class{resolveComponentFactory(e){throw lV(e)}},Vd=(()=>{let e=class e{};e.NULL=new eg;let t=e;return t})(),nc=class{},Ts=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>dV();let t=e;return t})();function dV(){let t=me(),e=qt(),n=or(e.index,t);return(Hr(n)?n:t)[je]}var hV=(()=>{let e=class e{};e.\u0275prov=D({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),wm={};var jE=new Set;function jd(t){jE.has(t)||(jE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function UE(...t){}function fV(){let t=typeof hi.requestAnimationFrame=="function",e=hi[t?"requestAnimationFrame":"setTimeout"],n=hi[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var O=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new dt(!1),this.onMicrotaskEmpty=new dt(!1),this.onStable=new dt(!1),this.onError=new dt(!1),typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=fV().nativeRequestAnimationFrame,gV(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new R(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,pV,UE,UE);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},pV={};function Jg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function mV(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(hi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,tg(t),t.isCheckStableRunning=!0,Jg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),tg(t))}function gV(t){let e=()=>{mV(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{if(_V(a))return n.invokeTask(r,o,s,a);try{return BE(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),$E(t)}},onInvoke:(n,i,r,o,s,a,c)=>{try{return BE(t),n.invoke(r,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),$E(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,tg(t),Jg(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function tg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function BE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function $E(t){t._nesting--,Jg(t)}function _V(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var ps=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ps||{}),vV={destroy(){}};function e_(t,e){!e&&WO(e_);let n=e?.injector??y(ht);if(!QF(n))return vV;jd("NgAfterNextRender");let i=n.get(t_),r=i.handler??=new ig,o=e?.phase??ps.MixedReadWrite,s=()=>{r.unregister(c),a()},a=n.get(Bg).onDestroy(s),c=mi(n,()=>new ng(o,()=>{s(),t()}));return r.register(c),{destroy:s}}var ng=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=y(O),this.errorHandler=y($n,{optional:!0}),y(pd,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},ig=class{constructor(){this.executingCallbacks=!1,this.buckets={[ps.EarlyRead]:new Set,[ps.Write]:new Set,[ps.MixedReadWrite]:new Set,[ps.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},t_=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=D({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function rg(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=Am(r,a);else if(o==2){let c=a,l=e[++s];i=Am(i,c+": "+l+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var gd=class extends Vd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=tr(e);return new Es(n,this.ngModule)}};function HE(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function yV(t){let e=t.toLowerCase();return e==="svg"?XO:e==="math"?JO:null}var og=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Id(i);let r=this.injector.get(e,wm,i);return r!==wm||n===wm?r:this.parentInjector.get(e,n,i)}},Es=class extends md{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=HE(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return HE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=MO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=le(null);try{r=r||this.ngModule;let s=r instanceof $t?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new og(e,s):e,c=a.get(nc,null);if(c===null)throw new R(407,!1);let l=a.get(hV,null),u=a.get(t_,null),d=a.get(pd,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",g=i?yL(f,i,this.componentDef.encapsulation,a):pC(f,m,yV(m)),_=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let C=null;g!==null&&(C=Hg(g,a,!0));let z=Qg(0,null,null,1,0,null,null,null,null,null,null),G=Od(null,z,null,_,null,null,h,f,a,null,C);kg(G);let ye,ut;try{let fe=this.componentDef,gt,On=null;fe.findHostDirectiveDefs?(gt=[],On=new Map,fe.findHostDirectiveDefs(fe,gt,On),gt.push(fe)):gt=[fe];let kr=bV(G,g),Yo=wV(kr,g,fe,gt,G,h,f);ut=Mg(z,Ht),g&&xV(f,fe,g,i),n!==void 0&&CV(ut,this.ngContentSelectors,n),ye=EV(Yo,fe,gt,On,G,[DV]),Zg(z,G,null)}finally{Og()}return new sg(this.componentType,ye,Rd(ut,G),G,ut)}finally{le(o)}}},sg=class extends Jm{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Zr(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Yg(o[X],o,r,e,n),this.previousInputValues.set(e,n);let s=or(this._tNode.index,o);Xg(s)}}get injector(){return new zr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function bV(t,e){let n=t[X],i=Ht;return t[i]=e,fc(n,i,2,"#host",null)}function wV(t,e,n,i,r,o,s){let a=r[X];IV(i,t,e,s);let c=null;e!==null&&(c=Hg(e,r[bs]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Od(r,MC(n),null,u,r[t.index],t,o,l,null,null,c);return a.firstCreatePass&&Km(a,t,i.length-1),Fd(r,d),r[t.index]=d}function IV(t,e,n,i){for(let r of t)e.mergedAttrs=Qa(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(rg(e,e.mergedAttrs,!0),n!==null&&EC(i,n,e))}function EV(t,e,n,i,r,o){let s=qt(),a=r[X],c=rn(s,r);kC(a,r,s,n,null,i);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=Is(r,a,d,s);Yr(h,r)}OC(a,r,s),c&&Yr(c,r);let l=Is(r,a,s.directiveStart+s.componentOffset,s);if(t[nn]=r[nn]=l,o!==null)for(let u of o)u(l,e);return SC(a,s,r),l}function xV(t,e,n,i){if(i)Pm(t,n,["ng-version","17.3.5"]);else{let{attrs:r,classes:o}=NO(e.selectors[0]);r&&Pm(t,n,r),o&&o.length>0&&IC(t,n,o.join(" "))}}function CV(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function DV(){let t=qt();jg(me()[X],t)}var Ss=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=TV;let t=e;return t})();function TV(){let t=qt();return AV(t,me())}var SV=Ss,GC=class extends SV{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Rd(this._hostTNode,this._hostLView)}get injector(){return new zr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ug(this._hostTNode,this._hostLView);if(Qx(e)){let n=cd(e,this._hostLView),i=ad(e),r=n[X].data[i+8];return new zr(r,n)}else return new zr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=zE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Bt}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Xm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,Ym(this._hostTNode,s)),a}createComponent(e,n,i,r,o){let s=e&&!GO(e),a;if(s)a=n;else{let m=n||{};a=m.index,i=m.injector,r=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let c=s?e:new Es(tr(e)),l=i||this.parentInjector;if(!o&&c.ngModule==null){let g=(s?l:this.parentInjector).get($t,null);g&&(o=g)}let u=tr(c.componentType??{}),d=Xm(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,r,h,o);return this.insertImpl(f.hostView,a,Ym(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(iF(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[vt],l=new GC(c,c[zt],c[vt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return UC(s,r,o,i),e.attachToViewContainerRef(),ax(Im(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=zE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=dd(this._lContainer,n);i&&(nd(Im(this._lContainer),n),qg(i[X],i))}detach(e){let n=this._adjustIndex(e,-1),i=dd(this._lContainer,n);return i&&nd(Im(this._lContainer),n)!=null?new Zr(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function zE(t){return t[rd]}function Im(t){return t[rd]||(t[rd]=[])}function AV(t,e){let n,i=e[t.index];return _i(i)?n=i:(n=FC(i,e,null,t),e[t.index]=n,Fd(e,n)),MV(n,e,t,i),new GC(n,t,e)}function RV(t,e){let n=t[je],i=n.createComment(""),r=rn(e,t),o=Wg(n,r);return hd(n,o,i,cL(n,r),!1),i}var MV=kV,NV=()=>!1;function PV(t,e,n){return NV(t,e,n)}function kV(t,e,n,i){if(t[Gr])return;let r;n.type&8?r=Bn(i):r=RV(e,n),t[Gr]=r}function KC(t){return typeof t=="function"&&t[Kp]!==void 0}function QC(t){return KC(t)&&typeof t.set=="function"}function OV(t){return Object.getPrototypeOf(t.prototype).constructor}function sr(t){let e=OV(t.type),n=!0,i=[t];for(;e;){let r;if(nr(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new R(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let s=t;s.inputs=Gu(t.inputs),s.inputTransforms=Gu(t.inputTransforms),s.declaredInputs=Gu(t.declaredInputs),s.outputs=Gu(t.outputs);let a=r.hostBindings;a&&UV(t,a);let c=r.viewQuery,l=r.contentQueries;if(c&&VV(t,c),l&&jV(t,l),FV(t,r),Z1(t.outputs,r.outputs),nr(r)&&r.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===sr&&(n=!1)}}e=Object.getPrototypeOf(e)}LV(i)}function FV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function LV(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Qa(r.hostAttrs,n=Qa(n,r.hostAttrs))}}function Gu(t){return t===_s?{}:t===Ot?[]:t}function VV(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function jV(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function UV(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function ar(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}var ir=class{},ic=class{};var ag=class extends ir{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gd(this);let r=_x(e);this._bootstrapComponents=fC(r.bootstrap),this._r3Injector=rC(e,n,[{provide:ir,useValue:this},{provide:Vd,useValue:this.componentFactoryResolver},...i],At(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},cg=class extends ic{constructor(e){super(),this.moduleType=e}create(e){return new ag(this.moduleType,e,[])}};var _d=class extends ir{constructor(e){super(),this.componentFactoryResolver=new gd(this),this.instance=null;let n=new Ya([...e.providers,{provide:ir,useValue:this},{provide:Vd,useValue:this.componentFactoryResolver}],e.parent||Sg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ud(t,e,n=null){return new _d({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Bd=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Xe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function YC(t){return $V(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function BV(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),i;for(;!(i=n.next()).done;)e(i.value)}}function $V(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function HV(t,e,n){return t[e]=n}function pi(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function zV(t,e,n,i){let r=pi(t,e,n);return pi(t,e+1,i)||r}function qV(t){return(t.flags&32)===32}function WV(t,e,n,i,r,o,s,a,c){let l=e.consts,u=fc(e,t,4,s||null,sd(l,a));PC(e,n,u,sd(l,c)),jg(e,u);let d=u.tView=Qg(2,u,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function wn(t,e,n,i,r,o,s,a){let c=me(),l=yt(),u=t+Ht,d=l.firstCreatePass?WV(u,l,c,e,n,i,r,o,s):l.data[u];cc(d,!1);let h=GV(l,c,d,t);Lg()&&Gg(l,c,h,d),Yr(h,c);let f=FC(h,c,h,d);return c[u]=f,Fd(c,f),PV(f,d,c),Rg(d)&&AC(l,c,d),s!=null&&RC(c,d,a),wn}var GV=KV;function KV(t,e,n,i){return Vg(!0),e[je].createComment("")}function yi(t,e,n,i){let r=me(),o=lc();if(pi(r,o,e)){let s=yt(),a=Fg();FL(a,r,t,e,n,i)}return yi}function QV(t,e,n,i){return pi(t,lc(),n)?e+wg(n)+i:vi}function Ku(t,e){return t<<17|e<<2}function Xr(t){return t>>17&32767}function YV(t){return(t&2)==2}function ZV(t,e){return t&131071|e<<17}function lg(t){return t|2}function xs(t){return(t&131068)>>2}function Em(t,e){return t&-131069|e<<2}function XV(t){return(t&1)===1}function ug(t){return t|1}function JV(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Xr(s),c=xs(s);t[i]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||ac(d,u)>0)&&(l=!0)}else u=n;if(r)if(c!==0){let h=Xr(t[a+1]);t[i+1]=Ku(h,a),h!==0&&(t[h+1]=Em(t[h+1],i)),t[a+1]=ZV(t[a+1],i)}else t[i+1]=Ku(a,0),a!==0&&(t[a+1]=Em(t[a+1],i)),a=i;else t[i+1]=Ku(c,0),a===0?a=i:t[c+1]=Em(t[c+1],i),c=i;l&&(t[i+1]=lg(t[i+1])),qE(t,u,i,!0),qE(t,u,i,!1),e2(e,u,t,i,o),s=Ku(a,c),o?e.classBindings=s:e.styleBindings=s}function e2(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ac(o,e)>=0&&(n[i+1]=ug(n[i+1]))}function qE(t,e,n,i){let r=t[n+1],o=e===null,s=i?Xr(r):xs(r),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];t2(c,e)&&(a=!0,t[s+1]=i?ug(l):lg(l)),s=i?Xr(l):xs(l)}a&&(t[n+1]=i?lg(r):ug(r))}function t2(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ac(t,e)>=0:!1}var vn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function n2(t){return t.substring(vn.key,vn.keyEnd)}function i2(t){return r2(t),ZC(t,XC(t,0,vn.textEnd))}function ZC(t,e){let n=vn.textEnd;return n===e?-1:(e=vn.keyEnd=o2(t,vn.key=e,n),XC(t,e,n))}function r2(t){vn.key=0,vn.keyEnd=0,vn.value=0,vn.valueEnd=0,vn.textEnd=t.length}function XC(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function o2(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function As(t,e,n){let i=me(),r=lc();if(pi(i,r,e)){let o=yt(),s=Fg();NC(o,s,i,t,e,i[je],n,!1)}return As}function dg(t,e,n,i,r){let o=e.inputs,s=r?"class":"style";Yg(t,n,o[s],s,i)}function zn(t,e){return a2(t,e,null,!0),zn}function JC(t){c2(p2,s2,t,!0)}function s2(t,e){for(let n=i2(e);n>=0;n=ZC(e,n))Cg(t,n2(e),!0)}function a2(t,e,n,i){let r=me(),o=yt(),s=Ux(2);if(o.firstUpdatePass&&tD(o,t,s,i),e!==vi&&pi(r,s,e)){let a=o.data[Jr()];nD(o,a,r,r[je],t,r[s+1]=g2(e,n),i,s)}}function c2(t,e,n,i){let r=yt(),o=Ux(2);r.firstUpdatePass&&tD(r,null,o,i);let s=me();if(n!==vi&&pi(s,o,n)){let a=r.data[Jr()];if(iD(a,i)&&!eD(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Am(c,n||"")),dg(r,a,s,n,i)}else m2(r,a,s,s[je],s[o+1],s[o+1]=f2(t,e,n),i,o)}}function eD(t,e){return e>=t.expandoStartIndex}function tD(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[Jr()],s=eD(t,n);iD(o,i)&&e===null&&!s&&(e=!1),e=l2(r,o,e,i),JV(r,o,e,n,s,i)}}function l2(t,e,n,i){let r=vF(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=xm(null,t,e,n,i),n=rc(n,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=xm(r,t,e,n,i),o===null){let c=u2(t,e,i);c!==void 0&&Array.isArray(c)&&(c=xm(null,t,e,c[1],i),c=rc(c,e.attrs,i),d2(t,e,i,c))}else o=h2(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function u2(t,e,n){let i=n?e.classBindings:e.styleBindings;if(xs(i)!==0)return t[Xr(i)]}function d2(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Xr(r)]=i}function h2(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=rc(i,s,n)}return rc(i,e.attrs,n)}function xm(t,e,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],i=rc(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function rc(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Cg(t,s,n?!0:e[++o]))}return t===void 0?null:t}function f2(t,e,n){if(n==null||n==="")return Ot;let i=[],r=Nd(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function p2(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&Cg(t,i,n)}function m2(t,e,n,i,r,o,s,a){r===vi&&(r=Ot);let c=0,l=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=c<r.length?r[c+1]:void 0,f=l<o.length?o[l+1]:void 0,m=null,g;u===d?(c+=2,l+=2,h!==f&&(m=d,g=f)):d===null||u!==null&&u<d?(c+=2,m=u):(l+=2,m=d,g=f),m!==null&&nD(t,e,n,i,m,g,s,a),u=c<r.length?r[c]:null,d=l<o.length?o[l]:null}}function nD(t,e,n,i,r,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=XV(l)?WE(c,e,n,r,xs(l),s):void 0;if(!vd(u)){vd(o)||YV(l)&&(o=WE(c,null,n,r,a,s));let d=Nx(Jr(),n);pL(i,s,d,r,o)}}function WE(t,e,n,i,r,o){let s=e===null,a;for(;r>0;){let c=t[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[r+1];h===vi&&(h=d?Ot:void 0);let f=d?fm(h,i):u===i?h:void 0;if(l&&!vd(f)&&(f=fm(c,i)),vd(f)&&(a=f,s))return a;let m=t[r+1];r=s?Xr(m):xs(m)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=fm(c,i))}return a}function vd(t){return t!==void 0}function g2(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=At(Nd(t)))),t}function iD(t,e){return(t.flags&(e?8:16))!==0}function cr(t,e,n){jd("NgControlFlow");let i=me(),r=lc(),o=_2(i,Ht+t),s=0;if(pi(i,r,e)){let a=le(null);try{if(GL(o,s),e!==-1){let c=v2(i[X],Ht+e),l=Xm(o,c.tView.ssrId),u=jC(i,c,n,{dehydratedView:l});UC(o,u,s,Ym(c,l))}}finally{le(a)}}else{let a=WL(o,s);a!==void 0&&(a[nn]=n)}}function _2(t,e){return t[e]}function v2(t,e){return Mg(t,e)}function y2(t,e,n,i,r,o){let s=e.consts,a=sd(s,r),c=fc(e,t,2,i,a);return PC(e,n,c,sd(s,o)),c.attrs!==null&&rg(c,c.attrs,!1),c.mergedAttrs!==null&&rg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function j(t,e,n,i){let r=me(),o=yt(),s=Ht+t,a=r[je],c=o.firstCreatePass?y2(s,o,r,e,n,i):o.data[s],l=b2(o,r,c,a,e,t);r[s]=l;let u=Rg(c);return cc(c,!0),EC(a,l,c),!qV(c)&&Lg()&&Gg(o,r,l,c),aF()===0&&Yr(l,r),cF(),u&&(AC(o,r,c),SC(o,c,r)),i!==null&&RC(r,c),j}function P(){let t=qt();Vx()?jx():(t=t.parent,cc(t,!1));let e=t;uF(e)&&dF(),lF();let n=yt();return n.firstCreatePass&&(jg(n,t),Tx(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&CF(e)&&dg(n,e,me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&DF(e)&&dg(n,e,me(),e.stylesWithoutHost,!1),P}function sn(t,e,n,i){return j(t,e,n,i),P(),sn}var b2=(t,e,n,i,r,o)=>(Vg(!0),pC(i,r,wF()));function $d(){return me()}var $r=void 0;function w2(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:5}var I2=["en",[["a","p"],["AM","PM"],$r],[["AM","PM"],$r,$r],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$r,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$r,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$r,"{1} 'at' {0}",$r],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",w2],Cm={};function an(t){let e=E2(t),n=GE(e);if(n)return n;let i=e.split("-")[0];if(n=GE(i),n)return n;if(i==="en")return I2;throw new R(701,!1)}function GE(t){return t in Cm||(Cm[t]=hi.ng&&hi.ng.common&&hi.ng.common.locales&&hi.ng.common.locales[t]),Cm[t]}var $e=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}($e||{});function E2(t){return t.toLowerCase().replace(/_/g,"-")}var yd="en-US";var x2=yd;function C2(t){typeof t=="string"&&(x2=t.toLowerCase().replace(/_/g,"-"))}function Ke(t,e,n,i){let r=me(),o=yt(),s=qt();return rD(o,r,r[je],s,t,e,i),Ke}function D2(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=e[Xa],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function rD(t,e,n,i,r,o,s){let a=Rg(i),l=t.firstCreatePass&&BL(t),u=e[nn],d=UL(e),h=!0;if(i.type&3||s){let g=rn(i,e),_=s?s(g):g,C=d.length,z=s?ye=>s(Bn(ye[i.index])):i.index,G=null;if(!s&&a&&(G=D2(t,e,r,i.index)),G!==null){let ye=G.__ngLastListenerFn__||G;ye.__ngNextListenerFn__=o,G.__ngLastListenerFn__=o,h=!1}else{o=QE(i,e,u,o,!1);let ye=n.listen(_,r,o);d.push(o,ye),l&&l.push(r,z,C,C+1)}}else o=QE(i,e,u,o,!1);let f=i.outputs,m;if(h&&f!==null&&(m=f[r])){let g=m.length;if(g)for(let _=0;_<g;_+=2){let C=m[_],z=m[_+1],ut=e[C][z].subscribe(o),fe=d.length;d.push(o,ut),l&&l.push(r,i.index,fe,-(fe+1))}}}function KE(t,e,n,i){let r=le(null);try{return Ln(6,e,n),n(i)!==!1}catch(o){return VC(t,o),!1}finally{Ln(7,e,n),le(r)}}function QE(t,e,n,i,r){return function o(s){if(s===Function)return i;let a=t.componentOffset>-1?or(t.index,e):e;Xg(a);let c=KE(e,n,i,s),l=o.__ngNextListenerFn__;for(;l;)c=KE(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return r&&c===!1&&s.preventDefault(),c}}function In(t=1){return bF(t)}function T2(t,e){let n=null,i=DO(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?hx(t,o,!0):AO(i,o))return r}return n}function Hd(t){let e=me()[bn][zt];if(!e.projection){let n=t?t.length:1,i=e.projection=gO(n,null),r=i.slice(),o=e.child;for(;o!==null;){let s=t?T2(o,t):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Rs(t,e=0,n){let i=me(),r=yt(),o=fc(r,Ht+t,16,null,n||null);o.projection===null&&(o.projection=e),jx(),(!i[Za]||Fx())&&(o.flags&32)!==32&&hL(r,i,o)}function S2(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function oe(t,e=""){let n=me(),i=yt(),r=t+Ht,o=i.firstCreatePass?fc(i,r,1,e,null):i.data[r],s=A2(i,n,o,e,t);n[r]=s,Lg()&&Gg(i,n,s,o),cc(o,!1)}var A2=(t,e,n,i,r)=>(Vg(!0),ZF(e[je],i));function lr(t){return bi("",t,""),lr}function bi(t,e,n){let i=me(),r=QV(i,t,e,n);return r!==vi&&$L(i,Jr(),r),bi}function wi(t,e,n){QC(e)&&(e=e());let i=me(),r=lc();if(pi(i,r,e)){let o=yt(),s=Fg();NC(o,s,i,t,e,i[je],n,!1)}return wi}function ur(t,e){let n=QC(t);return n&&t.set(e),n}function Ii(t,e){let n=me(),i=yt(),r=qt();return rD(i,n,n[je],r,t,e),Ii}function R2(t,e,n){let i=yt();if(i.firstCreatePass){let r=nr(t);hg(n,i.data,i.blueprint,r,!0),hg(e,i.data,i.blueprint,r,!1)}}function hg(t,e,n,i,r){if(t=St(t),Array.isArray(t))for(let o=0;o<t.length;o++)hg(t[o],e,n,i,r);else{let o=yt(),s=me(),a=qt(),c=ys(t)?t:St(t.provide),l=Ex(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(ys(t)||!t.multi){let f=new Qr(l,r,M),m=Tm(c,e,r?u:u+h,d);m===-1?(Bm(ud(a,s),o,c),Dm(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[m]=f,s[m]=f)}else{let f=Tm(c,e,u+h,d),m=Tm(c,e,u,u+h),g=f>=0&&n[f],_=m>=0&&n[m];if(r&&!_||!r&&!g){Bm(ud(a,s),o,c);let C=P2(r?N2:M2,n.length,r,i,l);!r&&_&&(n[m].providerFactory=C),Dm(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(C),s.push(C)}else{let C=oD(n[r?m:f],l,!r&&i);Dm(o,t,f>-1?f:m,C)}!r&&i&&_&&n[m].componentProviders++}}}function Dm(t,e,n,i){let r=ys(e),o=jO(e);if(r||o){let c=(o?St(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[i,c]):l[u+1].push(i,c)}else l.push(n,c)}}}function oD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Tm(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function M2(t,e,n,i){return fg(this.multi,[])}function N2(t,e,n,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Is(n,n[X],this.providerFactory.index,i);o=a.slice(0,s),fg(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],fg(r,o);return o}function fg(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function P2(t,e,n,i,r){let o=new Qr(t,n,M);return o.multi=[],o.index=e,o.componentProviders=0,oD(o,r,i&&!n),o}function eo(t,e=[]){return n=>{n.providersResolver=(i,r)=>R2(i,r?r(t):t,e)}}var k2=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=bx(!1,i.type),o=r.length>0?Ud([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=D({token:e,providedIn:"environment",factory:()=>new e(x($t))});let t=e;return t})();function it(t){jd("NgStandalone"),t.getStandaloneInjector=e=>e.get(k2).getOrCreateStandaloneInjector(t)}function O2(t,e){let n=t[e];return n===vi?void 0:n}function F2(t,e,n,i,r,o,s){let a=e+n;return zV(t,a,r,o)?HV(t,a+2,s?i.call(s,r,o):i(r,o)):O2(t,a+2)}function sD(t,e){let n=yt(),i,r=t+Ht;n.firstCreatePass?(i=L2(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let o=i.factory||(i.factory=qr(i.type,!0)),s,a=kt(M);try{let c=ld(!1),l=o();return ld(c),S2(n,me(),r,l),l}finally{kt(a)}}function L2(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function aD(t,e,n,i){let r=t+Ht,o=me(),s=nF(o,r);return V2(o,r)?F2(o,fF(),e,s.transform,n,i,s):s.transform(n,i)}function V2(t,e){return t[X].data[e].pure}var Hn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},cD=new Hn("17.3.5"),zd=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var lD=new T("");function to(t){return!!t&&typeof t.then=="function"}function uD(t){return!!t&&typeof t.subscribe=="function"}var qd=new T(""),dD=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=y(qd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let s=o();if(to(s))i.push(s);else if(uD(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Wd=new T("");function j2(){K0(()=>{throw new R(600,!1)})}function U2(t){return t.isBoundToModule}function B2(t,e,n){try{let i=n();return to(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var pc=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=y(oC),this.afterRenderEffectManager=y(t_),this.externalTestViews=new Set,this.beforeRender=new He,this.afterTick=new He,this.componentTypes=[],this.components=[],this.isStable=y(Bd).hasPendingTasks.pipe($(i=>!i)),this._injector=y($t)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof md;if(!this._injector.get(dD).done){let f=!o&&gx(i),m=!1;throw new R(405,m)}let a;o?a=i:a=this._injector.get(Vd).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=U2(a)?void 0:this._injector.get(ir),l=r||a.selector,u=a.create(ht.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(lD,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Sm(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new R(101,!1);let r=le(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,le(r)}}detectChangesInAttachedViews(i){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===$C)throw new R(103,!1);if(i){let s=r===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)$2(a,s,c)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>pg(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>pg(s))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;Sm(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Wd,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Sm(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new R(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Sm(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function $2(t,e,n){!e&&!pg(t)||H2(t,n,e)}function pg(t){return Pg(t)}function H2(t,e,n){let i;n?(i=0,t[V]|=1024):t[V]&64?i=0:i=1,HC(t,e,i)}var mg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Gd=(()=>{let e=class e{compileModuleSync(i){return new cg(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=_x(i),s=fC(o.declarations).reduce((a,c)=>{let l=tr(c);return l&&a.push(new Es(l)),a},[]);return new mg(r,s)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var z2=(()=>{let e=class e{constructor(){this.zone=y(O),this.applicationRef=y(pc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function q2(t){return[{provide:O,useFactory:t},{provide:vs,multi:!0,useFactory:()=>{let e=y(z2,{optional:!0});return()=>e.initialize()}},{provide:vs,multi:!0,useFactory:()=>{let e=y(Q2);return()=>{e.initialize()}}},{provide:oC,useFactory:W2}]}function W2(){let t=y(O),e=y($n);return n=>t.runOutsideAngular(()=>e.handleError(n))}function G2(t){let e=q2(()=>new O(K2(t)));return Ed([[],e])}function K2(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Q2=(()=>{let e=class e{constructor(){this.subscription=new Pe,this.initialized=!1,this.zone=y(O),this.pendingTasks=y(Bd)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{O.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{O.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Y2(){return typeof $localize<"u"&&$localize.locale||yd}var mc=new T("",{providedIn:"root",factory:()=>y(mc,Z.Optional|Z.SkipSelf)||Y2()});var hD=new T("");var Ju=null;function Z2(t=[],e){return ht.create({name:e,providers:[{provide:xd,useValue:"platform"},{provide:hD,useValue:new Set([()=>Ju=null])},...t]})}function X2(t=[]){if(Ju)return Ju;let e=Z2(t);return Ju=e,j2(),J2(e),e}function J2(t){t.get($g,null)?.forEach(n=>n())}var Ei=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=ej;let t=e;return t})();function ej(t){return tj(qt(),me(),(t&16)===16)}function tj(t,e,n){if(Td(t)&&!n){let i=or(t.index,e);return new Zr(i,i)}else if(t.type&47){let i=e[bn];return new Zr(i,e)}return null}var gg=class{constructor(){}supports(e){return YC(e)}create(e){return new _g(e)}},nj=(t,e)=>e,_g=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||nj}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){let s=!i||n&&n.currentIndex<YE(i,r,o)?n:i,a=YE(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,s.previousIndex==null)r++;else{o||(o=[]);let l=a-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){let f=h<o.length?o[h]:o[h]=0,m=f+h;u<=m&&m<l&&(o[h]=f+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!YC(e))throw new R(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),i=!0):(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,BV(e,a=>{s=this._trackByFn(r,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new vg(n,i),o,r)),e}_verifyReinsertion(e,n,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new bd),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,i=e._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new bd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},vg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},yg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let n=e._prevDup,i=e._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},bd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,i=this.map.get(n);i||(i=new yg,this.map.set(n,i)),i.add(e)}get(e,n){let i=e,r=this.map.get(i);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function YE(t,e,n){let i=t.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function ZE(){return new n_([new gg])}var n_=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||ZE()),deps:[[e,new Eg,new Ue]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r!=null)return r;throw new R(901,!1)}};e.\u0275prov=D({token:e,providedIn:"root",factory:ZE});let t=e;return t})();function fD(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=X2(i),o=[G2(),...n||[]],a=new _d({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(O);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get($n,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:f=>{l.handleError(f)}})});let d=()=>a.destroy(),h=r.get(hD);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),B2(l,c,()=>{let f=a.get(dD);return f.runInitializers(),f.donePromise.then(()=>{let m=a.get(mc,yd);C2(m||yd);let g=a.get(pc);return e!==void 0&&g.bootstrap(e),g})})})}catch(e){return Promise.reject(e)}}function En(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function pD(t){let e=tr(t);if(!e)return null;let n=new Es(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var wD=null;function Ti(){return wD}function ID(t){wD??=t}var nh=class{};var ke=new T(""),u_=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>y(rj),providedIn:"platform"});let t=e;return t})(),ED=new T(""),rj=(()=>{let e=class e extends u_{constructor(){super(),this._doc=y(ke),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ti().getBaseHref(this._doc)}onPopState(i){let r=Ti().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Ti().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function d_(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function mD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function Ci(t){return t&&t[0]!=="?"?"?"+t:t}var no=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>y(h_),providedIn:"root"});let t=e;return t})(),xD=new T(""),h_=(()=>{let e=class e extends no{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??y(ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return d_(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Ci(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+Ci(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+Ci(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(x(u_),x(xD,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),CD=(()=>{let e=class e extends no{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(i){let r=d_(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+Ci(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+Ci(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(x(u_),x(xD,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),Ms=(()=>{let e=class e{constructor(i){this._subject=new dt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=aj(mD(gD(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Ci(r))}normalize(i){return e.stripTrailingSlash(sj(this._basePath,gD(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Ci(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Ci(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=Ci,e.joinWithSlash=d_,e.stripTrailingSlash=mD,e.\u0275fac=function(r){return new(r||e)(x(no))},e.\u0275prov=D({token:e,factory:()=>oj(),providedIn:"root"});let t=e;return t})();function oj(){return new Ms(x(no))}function sj(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function gD(t){return t.replace(/\/index.html$/,"")}function aj(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Rt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Rt||{}),Ie=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ie||{}),Wt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Wt||{}),dr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function cj(t){return an(t)[$e.LocaleId]}function lj(t,e,n){let i=an(t),r=[i[$e.DayPeriodsFormat],i[$e.DayPeriodsStandalone]],o=cn(r,e);return cn(o,n)}function uj(t,e,n){let i=an(t),r=[i[$e.DaysFormat],i[$e.DaysStandalone]],o=cn(r,e);return cn(o,n)}function dj(t,e,n){let i=an(t),r=[i[$e.MonthsFormat],i[$e.MonthsStandalone]],o=cn(r,e);return cn(o,n)}function hj(t,e){let i=an(t)[$e.Eras];return cn(i,e)}function Kd(t,e){let n=an(t);return cn(n[$e.DateFormat],e)}function Qd(t,e){let n=an(t);return cn(n[$e.TimeFormat],e)}function Yd(t,e){let i=an(t)[$e.DateTimeFormat];return cn(i,e)}function oh(t,e){let n=an(t),i=n[$e.NumberSymbols][e];if(typeof i>"u"){if(e===dr.CurrencyDecimal)return n[$e.NumberSymbols][dr.Decimal];if(e===dr.CurrencyGroup)return n[$e.NumberSymbols][dr.Group]}return i}function DD(t){if(!t[$e.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[$e.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function fj(t){let e=an(t);return DD(e),(e[$e.ExtraData][2]||[]).map(i=>typeof i=="string"?i_(i):[i_(i[0]),i_(i[1])])}function pj(t,e,n){let i=an(t);DD(i);let r=[i[$e.ExtraData][0],i[$e.ExtraData][1]],o=cn(r,e)||[];return cn(o,n)||[]}function cn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function i_(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var mj=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Zd={},gj=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Di=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Di||{}),de=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(de||{}),ue=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(ue||{});function _j(t,e,n,i){let r=Dj(t);e=xi(n,e)||e;let s=[],a;for(;e;)if(a=gj.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=r.getTimezoneOffset();i&&(c=SD(i,c),r=Cj(r,i,!0));let l="";return s.forEach(u=>{let d=Ej(u);l+=d?d(r,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function ih(t,e,n){let i=new Date(0);return i.setFullYear(t,e,n),i.setHours(0,0,0),i}function xi(t,e){let n=cj(t);if(Zd[n]??={},Zd[n][e])return Zd[n][e];let i="";switch(e){case"shortDate":i=Kd(t,Wt.Short);break;case"mediumDate":i=Kd(t,Wt.Medium);break;case"longDate":i=Kd(t,Wt.Long);break;case"fullDate":i=Kd(t,Wt.Full);break;case"shortTime":i=Qd(t,Wt.Short);break;case"mediumTime":i=Qd(t,Wt.Medium);break;case"longTime":i=Qd(t,Wt.Long);break;case"fullTime":i=Qd(t,Wt.Full);break;case"short":let r=xi(t,"shortTime"),o=xi(t,"shortDate");i=Xd(Yd(t,Wt.Short),[r,o]);break;case"medium":let s=xi(t,"mediumTime"),a=xi(t,"mediumDate");i=Xd(Yd(t,Wt.Medium),[s,a]);break;case"long":let c=xi(t,"longTime"),l=xi(t,"longDate");i=Xd(Yd(t,Wt.Long),[c,l]);break;case"full":let u=xi(t,"fullTime"),d=xi(t,"fullDate");i=Xd(Yd(t,Wt.Full),[u,d]);break}return i&&(Zd[n][e]=i),i}function Xd(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,i){return e!=null&&i in e?e[i]:n})),t}function xn(t,e,n="-",i,r){let o="";(t<0||r&&t<=0)&&(r?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return i&&(s=s.slice(s.length-e)),o+s}function vj(t,e){return xn(t,3).substring(0,e)}function Qe(t,e,n=0,i=!1,r=!1){return function(o,s){let a=yj(t,o);if((n>0||a>-n)&&(a+=n),t===de.Hours)a===0&&n===-12&&(a=12);else if(t===de.FractionalSeconds)return vj(a,e);let c=oh(s,dr.MinusSign);return xn(a,e,c,i,r)}}function yj(t,e){switch(t){case de.FullYear:return e.getFullYear();case de.Month:return e.getMonth();case de.Date:return e.getDate();case de.Hours:return e.getHours();case de.Minutes:return e.getMinutes();case de.Seconds:return e.getSeconds();case de.FractionalSeconds:return e.getMilliseconds();case de.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function xe(t,e,n=Rt.Format,i=!1){return function(r,o){return bj(r,o,t,e,n,i)}}function bj(t,e,n,i,r,o){switch(n){case ue.Months:return dj(e,r,i)[t.getMonth()];case ue.Days:return uj(e,r,i)[t.getDay()];case ue.DayPeriods:let s=t.getHours(),a=t.getMinutes();if(o){let l=fj(e),u=pj(e,r,i),d=l.findIndex(h=>{if(Array.isArray(h)){let[f,m]=h,g=s>=f.hours&&a>=f.minutes,_=s<m.hours||s===m.hours&&a<m.minutes;if(f.hours<m.hours){if(g&&_)return!0}else if(g||_)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return lj(e,r,i)[s<12?0:1];case ue.Eras:return hj(e,i)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function Jd(t){return function(e,n,i){let r=-1*i,o=oh(n,dr.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case Di.Short:return(r>=0?"+":"")+xn(s,2,o)+xn(Math.abs(r%60),2,o);case Di.ShortGMT:return"GMT"+(r>=0?"+":"")+xn(s,1,o);case Di.Long:return"GMT"+(r>=0?"+":"")+xn(s,2,o)+":"+xn(Math.abs(r%60),2,o);case Di.Extended:return i===0?"Z":(r>=0?"+":"")+xn(s,2,o)+":"+xn(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var wj=0,th=4;function Ij(t){let e=ih(t,wj,1).getDay();return ih(t,0,1+(e<=th?th:th+7)-e)}function TD(t){let e=t.getDay(),n=e===0?-3:th-e;return ih(t.getFullYear(),t.getMonth(),t.getDate()+n)}function r_(t,e=!1){return function(n,i){let r;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();r=1+Math.floor((s+o)/7)}else{let o=TD(n),s=Ij(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return xn(r,t,oh(i,dr.MinusSign))}}function eh(t,e=!1){return function(n,i){let o=TD(n).getFullYear();return xn(o,t,oh(i,dr.MinusSign),e)}}var o_={};function Ej(t){if(o_[t])return o_[t];let e;switch(t){case"G":case"GG":case"GGG":e=xe(ue.Eras,Ie.Abbreviated);break;case"GGGG":e=xe(ue.Eras,Ie.Wide);break;case"GGGGG":e=xe(ue.Eras,Ie.Narrow);break;case"y":e=Qe(de.FullYear,1,0,!1,!0);break;case"yy":e=Qe(de.FullYear,2,0,!0,!0);break;case"yyy":e=Qe(de.FullYear,3,0,!1,!0);break;case"yyyy":e=Qe(de.FullYear,4,0,!1,!0);break;case"Y":e=eh(1);break;case"YY":e=eh(2,!0);break;case"YYY":e=eh(3);break;case"YYYY":e=eh(4);break;case"M":case"L":e=Qe(de.Month,1,1);break;case"MM":case"LL":e=Qe(de.Month,2,1);break;case"MMM":e=xe(ue.Months,Ie.Abbreviated);break;case"MMMM":e=xe(ue.Months,Ie.Wide);break;case"MMMMM":e=xe(ue.Months,Ie.Narrow);break;case"LLL":e=xe(ue.Months,Ie.Abbreviated,Rt.Standalone);break;case"LLLL":e=xe(ue.Months,Ie.Wide,Rt.Standalone);break;case"LLLLL":e=xe(ue.Months,Ie.Narrow,Rt.Standalone);break;case"w":e=r_(1);break;case"ww":e=r_(2);break;case"W":e=r_(1,!0);break;case"d":e=Qe(de.Date,1);break;case"dd":e=Qe(de.Date,2);break;case"c":case"cc":e=Qe(de.Day,1);break;case"ccc":e=xe(ue.Days,Ie.Abbreviated,Rt.Standalone);break;case"cccc":e=xe(ue.Days,Ie.Wide,Rt.Standalone);break;case"ccccc":e=xe(ue.Days,Ie.Narrow,Rt.Standalone);break;case"cccccc":e=xe(ue.Days,Ie.Short,Rt.Standalone);break;case"E":case"EE":case"EEE":e=xe(ue.Days,Ie.Abbreviated);break;case"EEEE":e=xe(ue.Days,Ie.Wide);break;case"EEEEE":e=xe(ue.Days,Ie.Narrow);break;case"EEEEEE":e=xe(ue.Days,Ie.Short);break;case"a":case"aa":case"aaa":e=xe(ue.DayPeriods,Ie.Abbreviated);break;case"aaaa":e=xe(ue.DayPeriods,Ie.Wide);break;case"aaaaa":e=xe(ue.DayPeriods,Ie.Narrow);break;case"b":case"bb":case"bbb":e=xe(ue.DayPeriods,Ie.Abbreviated,Rt.Standalone,!0);break;case"bbbb":e=xe(ue.DayPeriods,Ie.Wide,Rt.Standalone,!0);break;case"bbbbb":e=xe(ue.DayPeriods,Ie.Narrow,Rt.Standalone,!0);break;case"B":case"BB":case"BBB":e=xe(ue.DayPeriods,Ie.Abbreviated,Rt.Format,!0);break;case"BBBB":e=xe(ue.DayPeriods,Ie.Wide,Rt.Format,!0);break;case"BBBBB":e=xe(ue.DayPeriods,Ie.Narrow,Rt.Format,!0);break;case"h":e=Qe(de.Hours,1,-12);break;case"hh":e=Qe(de.Hours,2,-12);break;case"H":e=Qe(de.Hours,1);break;case"HH":e=Qe(de.Hours,2);break;case"m":e=Qe(de.Minutes,1);break;case"mm":e=Qe(de.Minutes,2);break;case"s":e=Qe(de.Seconds,1);break;case"ss":e=Qe(de.Seconds,2);break;case"S":e=Qe(de.FractionalSeconds,1);break;case"SS":e=Qe(de.FractionalSeconds,2);break;case"SSS":e=Qe(de.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Jd(Di.Short);break;case"ZZZZZ":e=Jd(Di.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Jd(Di.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Jd(Di.Long);break;default:return null}return o_[t]=e,e}function SD(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function xj(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function Cj(t,e,n){let i=n?-1:1,r=t.getTimezoneOffset(),o=SD(e,r);return xj(t,i*(o-r))}function Dj(t){if(_D(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[r,o=1,s=1]=t.split("-").map(a=>+a);return ih(r,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let i;if(i=t.match(mj))return Tj(i)}let e=new Date(t);if(!_D(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function Tj(t){let e=new Date(0),n=0,i=0,r=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),i=Number(t[9]+t[11])),r.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-i,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,c,l),e}function _D(t){return t instanceof Date&&!isNaN(t.valueOf())}function AD(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var s_=class{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},RD=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,o){this._viewContainer=i,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((o,s,a)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new s_(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,a),vD(c,o)}});for(let o=0,s=r.length;o<s;o++){let c=r.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}i.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);vD(s,o)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(M(Ss),M(Ld),M(n_))},e.\u0275dir=Be({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function vD(t,e){t.context.$implicit=e.item}var MD=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new a_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){yD("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){yD("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(M(Ss),M(Ld))},e.\u0275dir=Be({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),a_=class{constructor(){this.$implicit=null,this.ngIf=null}};function yD(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${At(e)}'.`)}function Sj(t,e){return new R(2100,!1)}var Aj="mediumDate",Rj=new T(""),Mj=new T(""),ND=(()=>{let e=class e{constructor(i,r,o){this.locale=i,this.defaultTimezone=r,this.defaultOptions=o}transform(i,r,o,s){if(i==null||i===""||i!==i)return null;try{let a=r??this.defaultOptions?.dateFormat??Aj,c=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return _j(i,a,s||this.locale,c)}catch(a){throw Sj(e,a.message)}}};e.\u0275fac=function(r){return new(r||e)(M(mc,16),M(Rj,24),M(Mj,24))},e.\u0275pipe=fx({name:"date",type:e,pure:!0,standalone:!0});let t=e;return t})();var Si=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})(),f_="browser",Nj="server";function p_(t){return t===f_}function m_(t){return t===Nj}var PD=(()=>{let e=class e{};e.\u0275prov=D({token:e,providedIn:"root",factory:()=>p_(y(on))?new c_(y(ke),window):new l_});let t=e;return t})(),c_=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=Pj(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function Pj(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}var l_=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},rh=class{};var v_=class extends nh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},y_=class t extends v_{static makeCurrent(){ID(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Oj();return n==null?null:Fj(n)}resetBaseElement(){gc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return AD(document.cookie,e)}},gc=null;function Oj(){return gc=gc||document.querySelector("base"),gc?gc.getAttribute("href"):null}function Fj(t){return new URL(t,document.baseURI).pathname}var Lj=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),b_=new T(""),LD=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new R(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(x(b_),x(O))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),sh=class{constructor(e){this._doc=e}},g_="ng-app-id",VD=(()=>{let e=class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=m_(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${g_}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(g_),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(g_,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(x(ke),x(Md),x(hc,8),x(on))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),__={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},I_=/%COMP%/g,jD="%COMP%",Vj=`_nghost-${jD}`,jj=`_ngcontent-${jD}`,Uj=!0,Bj=new T("",{providedIn:"root",factory:()=>Uj});function $j(t){return jj.replace(I_,t)}function Hj(t){return Vj.replace(I_,t)}function UD(t,e){return e.map(n=>n.replace(I_,t))}var kD=(()=>{let e=class e{constructor(i,r,o,s,a,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=m_(c),this.defaultRenderer=new _c(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===jn.ShadowDom&&(r=_e(w({},r),{encapsulation:jn.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof ah?o.applyToHost(i):o instanceof vc&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case jn.Emulated:s=new ah(l,u,r,this.appId,d,a,c,h);break;case jn.ShadowDom:return new w_(l,u,i,r,a,c,this.nonce,h);default:s=new vc(l,u,r,d,a,c,h);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(x(LD),x(VD),x(Md),x(Bj),x(ke),x(on),x(O),x(hc))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),_c=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(__[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(OD(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(OD(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new R(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=__[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=__[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(fi.DashCase|fi.Important)?e.style.setProperty(n,i,r&fi.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&fi.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Ti().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function OD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var w_=class extends _c{constructor(e,n,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=UD(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},vc=class extends _c{constructor(e,n,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?UD(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ah=class extends vc{constructor(e,n,i,r,o,s,a,c){let l=r+"-"+i.id;super(e,n,i,o,s,a,c,l),this.contentAttr=$j(l),this.hostAttr=Hj(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},zj=(()=>{let e=class e extends sh{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(x(ke))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})(),FD=["alt","control","meta","shift"],qj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Gj=(()=>{let e=class e extends sh{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ti().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),FD.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let o=qj[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),FD.forEach(a=>{if(a!==o){let c=Wj[a];c(i)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(x(ke))},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function BD(t,e){return fD(w({rootComponent:t},Kj(e)))}function Kj(t){return{appProviders:[...Jj,...t?.providers??[]],platformProviders:Xj}}function Qj(){y_.makeCurrent()}function Yj(){return new $n}function Zj(){return dC(document),document}var Xj=[{provide:on,useValue:f_},{provide:$g,useValue:Qj,multi:!0},{provide:ke,useFactory:Zj,deps:[]}];var Jj=[{provide:xd,useValue:"root"},{provide:$n,useFactory:Yj,deps:[]},{provide:b_,useClass:zj,multi:!0,deps:[ke,O,on]},{provide:b_,useClass:Gj,multi:!0,deps:[ke]},kD,VD,LD,{provide:nc,useExisting:kD},{provide:rh,useClass:Lj,deps:[]},[]];var $D=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(x(ke))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var W="primary",kc=Symbol("RouteTitle"),T_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Fs(t){return new T_(t)}function nU(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=t[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function iU(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!qn(t[n],e[n]))return!1;return!0}function qn(t,e){let n=t?S_(t):void 0,i=e?S_(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!JD(t[r],e[r]))return!1;return!0}function S_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function JD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function eT(t){return t.length>0?t[t.length-1]:null}function mr(t){return lm(t)?t:to(t)?Ae(Promise.resolve(t)):k(t)}var rU={exact:nT,subset:iT},tT={exact:oU,subset:sU,ignored:()=>!0};function HD(t,e,n){return rU[n.paths](t.root,e.root,n.matrixParams)&&tT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function oU(t,e){return qn(t,e)}function nT(t,e,n){if(!ro(t.segments,e.segments)||!uh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!nT(t.children[i],e.children[i],n))return!1;return!0}function sU(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>JD(t[n],e[n]))}function iT(t,e,n){return rT(t,e,e.segments,n)}function rT(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!ro(r,n)||e.hasChildren()||!uh(r,n,i))}else if(t.segments.length===n.length){if(!ro(t.segments,n)||!uh(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!iT(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ro(t.segments,r)||!uh(t.segments,r,i)||!t.children[W]?!1:rT(t.children[W],e,o,i)}}function uh(t,e,n){return e.every((i,r)=>tT[n](t[r].parameters,i.parameters))}var hr=class{constructor(e=new ge([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Fs(this.queryParams),this._queryParamMap}toString(){return lU.serialize(this)}},ge=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dh(this)}},io=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Fs(this.parameters),this._parameterMap}toString(){return sT(this)}};function aU(t,e){return ro(t,e)&&t.every((n,i)=>qn(n.parameters,e[i].parameters))}function ro(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function cU(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===W&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==W&&(n=n.concat(e(r,i)))}),n}var Oc=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>new Cc,providedIn:"root"});let t=e;return t})(),Cc=class{parse(e){let n=new R_(e);return new hr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${yc(e.root,!0)}`,i=hU(e.queryParams),r=typeof e.fragment=="string"?`#${uU(e.fragment)}`:"";return`${n}${i}${r}`}},lU=new Cc;function dh(t){return t.segments.map(e=>sT(e)).join("/")}function yc(t,e){if(!t.hasChildren())return dh(t);if(e){let n=t.children[W]?yc(t.children[W],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==W&&i.push(`${r}:${yc(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=cU(t,(i,r)=>r===W?[yc(t.children[W],!1)]:[`${r}:${yc(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[W]!=null?`${dh(t)}/${n[0]}`:`${dh(t)}/(${n.join("//")})`}}function oT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ch(t){return oT(t).replace(/%3B/gi,";")}function uU(t){return encodeURI(t)}function A_(t){return oT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hh(t){return decodeURIComponent(t)}function zD(t){return hh(t.replace(/\+/g,"%20"))}function sT(t){return`${A_(t.path)}${dU(t.parameters)}`}function dU(t){return Object.entries(t).map(([e,n])=>`;${A_(e)}=${A_(n)}`).join("")}function hU(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${ch(n)}=${ch(r)}`).join("&"):`${ch(n)}=${ch(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var fU=/^[^\/()?;#]+/;function E_(t){let e=t.match(fU);return e?e[0]:""}var pU=/^[^\/()?;=#]+/;function mU(t){let e=t.match(pU);return e?e[0]:""}var gU=/^[^=?&#]+/;function _U(t){let e=t.match(gU);return e?e[0]:""}var vU=/^[^&#]+/;function yU(t){let e=t.match(vU);return e?e[0]:""}var R_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[W]=new ge(e,n)),i}parseSegment(){let e=E_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new R(4009,!1);return this.capture(e),new io(hh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=mU(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=E_(this.remaining);r&&(i=r,this.capture(i))}e[hh(n)]=hh(i)}parseQueryParam(e){let n=_U(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=yU(this.remaining);s&&(i=s,this.capture(i))}let r=zD(n),o=zD(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=E_(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new R(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=W);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[W]:new ge([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new R(4011,!1)}};function aT(t){return t.segments.length>0?new ge([],{[W]:t}):t}function cT(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=cT(r);if(i===W&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new ge(t.segments,e);return bU(n)}function bU(t){if(t.numberOfChildren===1&&t.children[W]){let e=t.children[W];return new ge(t.segments.concat(e.segments),e.children)}return t}function Ls(t){return t instanceof hr}function wU(t,e,n=null,i=null){let r=lT(t);return uT(r,e,n,i)}function lT(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new ge(o.url,s);return o===t&&(e=a),a}let i=n(t.root),r=aT(i);return e??r}function uT(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return x_(r,r,r,n,i);let o=IU(e);if(o.toRoot())return x_(r,r,new ge([],{}),n,i);let s=EU(o,r,t),a=s.processChildren?Ic(s.segmentGroup,s.index,o.commands):hT(s.segmentGroup,s.index,o.commands);return x_(r,s.segmentGroup,a,n,i)}function fh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Dc(t){return typeof t=="object"&&t!=null&&t.outlets}function x_(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=dT(t,e,n);let a=aT(cT(s));return new hr(a,o,r)}function dT(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=dT(o,e,n)}),new ge(t.segments,i)}var ph=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&fh(i[0]))throw new R(4003,!1);let r=i.find(Dc);if(r&&r!==eT(i))throw new R(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function IU(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ph(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new ph(n,e,i)}var ks=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function EU(t,e,n){if(t.isAbsolute)return new ks(e,!0,0);if(!n)return new ks(e,!1,NaN);if(n.parent===null)return new ks(n,!0,0);let i=fh(t.commands[0])?0:1,r=n.segments.length-1+i;return xU(n,r,t.numberOfDoubleDots)}function xU(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new R(4005,!1);r=i.segments.length}return new ks(i,!1,r-o)}function CU(t){return Dc(t[0])?t[0].outlets:{[W]:t}}function hT(t,e,n){if(t??=new ge([],{}),t.segments.length===0&&t.hasChildren())return Ic(t,e,n);let i=DU(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new ge(t.segments.slice(0,i.pathIndex),{});return o.children[W]=new ge(t.segments.slice(i.pathIndex),t.children),Ic(o,0,r)}else return i.match&&r.length===0?new ge(t.segments,{}):i.match&&!t.hasChildren()?M_(t,e,n):i.match?Ic(t,0,r):M_(t,e,n)}function Ic(t,e,n){if(n.length===0)return new ge(t.segments,{});{let i=CU(n),r={};if(Object.keys(i).some(o=>o!==W)&&t.children[W]&&t.numberOfChildren===1&&t.children[W].segments.length===0){let o=Ic(t.children[W],e,n);return new ge(t.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=hT(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new ge(t.segments,r)}}function DU(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let s=t.segments[r],a=n[i];if(Dc(a))break;let c=`${a}`,l=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!WD(c,l,s))return o;i+=2}else{if(!WD(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function M_(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(Dc(o)){let c=TU(o.outlets);return new ge(i,c)}if(r===0&&fh(n[0])){let c=t.segments[e];i.push(new io(c.path,qD(n[0]))),r++;continue}let s=Dc(o)?o.outlets[W]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&fh(a)?(i.push(new io(s,qD(a))),r+=2):(i.push(new io(s,{})),r++)}return new ge(i,{})}function TU(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=M_(new ge([],{}),0,i))}),e}function qD(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function WD(t,e,n){return t==n.path&&qn(e,n.parameters)}var Ec="imperative",rt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(rt||{}),ln=class{constructor(e,n){this.id=e,this.url=n}},Vs=class extends ln{constructor(e,n,i="imperative",r=null){super(e,n),this.type=rt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ai=class extends ln{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=rt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Kt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Kt||{}),mh=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(mh||{}),fr=class extends ln{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=rt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},pr=class extends ln{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=rt.NavigationSkipped}},Tc=class extends ln{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=rt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gh=class extends ln{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=rt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},N_=class extends ln{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=rt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},P_=class extends ln{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=rt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},k_=class extends ln{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=rt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},O_=class extends ln{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=rt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},F_=class{constructor(e){this.route=e,this.type=rt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},L_=class{constructor(e){this.route=e,this.type=rt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},V_=class{constructor(e){this.snapshot=e,this.type=rt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},j_=class{constructor(e){this.snapshot=e,this.type=rt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},U_=class{constructor(e){this.snapshot=e,this.type=rt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},B_=class{constructor(e){this.snapshot=e,this.type=rt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_h=class{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=rt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Sc=class{},Ac=class{constructor(e){this.url=e}};var $_=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Fc,this.attachRef=null}},Fc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new $_,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=H_(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=H_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=z_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return z_(e,this._root).map(n=>n.value)}};function H_(t,e){if(t===e.value)return e;for(let n of e.children){let i=H_(t,n);if(i)return i}return null}function z_(t,e){if(t===e.value)return[e];for(let n of e.children){let i=z_(t,n);if(i.length)return i.unshift(e),i}return[]}var Gt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ps(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var yh=class extends vh{constructor(e,n){super(e),this.snapshot=n,ev(this,e)}toString(){return this.snapshot.toString()}};function fT(t){let e=SU(t),n=new Xe([new io("",{})]),i=new Xe({}),r=new Xe({}),o=new Xe({}),s=new Xe(""),a=new oo(n,i,o,s,r,W,t,e.root);return a.snapshot=e.root,new yh(new Gt(a,[]),e)}function SU(t){let e={},n={},i={},r="",o=new Rc([],e,i,r,n,W,t,null,{});return new bh("",new Gt(o,[]))}var oo=class{constructor(e,n,i,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe($(l=>l[kc]))??k(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe($(e=>Fs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe($(e=>Fs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function J_(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:w(w({},e.params),t.params),data:w(w({},e.data),t.data),resolve:w(w(w(w({},t.data),e.data),r?.data),t._resolvedData)}:i={params:w({},t.params),data:w({},t.data),resolve:w(w({},t.data),t._resolvedData??{})},r&&mT(r)&&(i.resolve[kc]=r.title),i}var Rc=class{get title(){return this.data?.[kc]}constructor(e,n,i,r,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},bh=class extends vh{constructor(e,n){super(n),this.url=e,ev(this,n)}toString(){return pT(this._root)}};function ev(t,e){e.value._routerState=t,e.children.forEach(n=>ev(t,n))}function pT(t){let e=t.children.length>0?` { ${t.children.map(pT).join(", ")} } `:"";return`${t.value}${e}`}function C_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,qn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),qn(e.params,n.params)||t.paramsSubject.next(n.params),iU(e.url,n.url)||t.urlSubject.next(n.url),qn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function q_(t,e){let n=qn(t.params,e.params)&&aU(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||q_(t.parent,e.parent))}function mT(t){return typeof t.title=="string"||t.title===null}var tv=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=W,this.activateEvents=new dt,this.deactivateEvents=new dt,this.attachEvents=new dt,this.detachEvents=new dt,this.parentContexts=y(Fc),this.location=y(Ss),this.changeDetector=y(Ei),this.environmentInjector=y($t),this.inputBinder=y(xh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new R(4013,!1);this._activatedRoute=i;let o=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new W_(i,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Be({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[rr]});let t=e;return t})(),W_=class{constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i,this.__ngOutletInjector=!0}get(e,n){return e===oo?this.route:e===Fc?this.childContexts:this.parent.get(e,n)}},xh=new T(""),GD=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,o=jr([r.queryParams,r.params,r.data]).pipe(tn(([s,a,c],l)=>(c=w(w(w({},s),a),c),l===0?k(c):Promise.resolve(c)))).subscribe(s=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=pD(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(i,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function AU(t,e,n){let i=Mc(t,e._root,n?n._root:void 0);return new yh(i,e)}function Mc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=RU(t,e,n);return new Gt(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Mc(t,a)),s}}let i=MU(e.value),r=e.children.map(o=>Mc(t,o));return new Gt(i,r)}}function RU(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Mc(t,i,r);return Mc(t,i)})}function MU(t){return new oo(new Xe(t.url),new Xe(t.params),new Xe(t.queryParams),new Xe(t.fragment),new Xe(t.data),t.outlet,t.component,t)}var gT="ngNavigationCancelingError";function _T(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=Ls(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=vT(!1,Kt.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function vT(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[gT]=!0,n.cancellationCode=e,n}function NU(t){return yT(t)&&Ls(t.url)}function yT(t){return!!t&&t[gT]}var PU=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=nt({type:e,selectors:[["ng-component"]],standalone:!0,features:[it],decls:1,vars:0,template:function(r,o){r&1&&sn(0,"router-outlet")},dependencies:[tv],encapsulation:2});let t=e;return t})();function kU(t,e){return t.providers&&!t._injector&&(t._injector=Ud(t.providers,e,`Route: ${t.path}`)),t._injector??e}function nv(t){let e=t.children&&t.children.map(nv),n=e?_e(w({},t),{children:e}):w({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==W&&(n.component=PU),n}function Wn(t){return t.outlet||W}function OU(t,e){let n=t.filter(i=>Wn(i)===e);return n.push(...t.filter(i=>Wn(i)!==e)),n}function Lc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var FU=(t,e,n,i)=>$(r=>(new G_(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),G_=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),C_(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Ps(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Ps(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Ps(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Ps(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new B_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new j_(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(C_(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),C_(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Lc(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}},wh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Os=class{constructor(e,n){this.component=e,this.route=n}};function LU(t,e,n){let i=t._root,r=e?e._root:null;return bc(i,r,n,[i.value])}function VU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Us(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!ex(t)?t:e.get(t):i}function bc(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ps(e);return t.children.forEach(s=>{jU(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>xc(a,n.getContext(s),r)),r}function jU(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=UU(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new wh(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?bc(t,e,a?a.children:null,i,r):bc(t,e,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Os(a.outlet.component,s))}else s&&xc(e,a,r),r.canActivateChecks.push(new wh(i)),o.component?bc(t,null,a?a.children:null,i,r):bc(t,null,n,i,r);return r}function UU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ro(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ro(t.url,e.url)||!qn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!q_(t,e)||!qn(t.queryParams,e.queryParams);case"paramsChange":default:return!q_(t,e)}}function xc(t,e,n){let i=Ps(t),r=t.value;Object.entries(i).forEach(([o,s])=>{r.component?e?xc(s,e.children.getContext(o),n):xc(s,null,n):xc(s,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Os(e.outlet.component,r)):n.canDeactivateChecks.push(new Os(null,r)):n.canDeactivateChecks.push(new Os(null,r))}function Vc(t){return typeof t=="function"}function BU(t){return typeof t=="boolean"}function $U(t){return t&&Vc(t.canLoad)}function HU(t){return t&&Vc(t.canActivate)}function zU(t){return t&&Vc(t.canActivateChild)}function qU(t){return t&&Vc(t.canDeactivate)}function WU(t){return t&&Vc(t.canMatch)}function bT(t){return t instanceof di||t?.name==="EmptyError"}var lh=Symbol("INITIAL_VALUE");function js(){return tn(t=>jr(t.map(e=>e.pipe(en(1),us(lh)))).pipe($(e=>{for(let n of e)if(n!==!0){if(n===lh)return lh;if(n===!1||n instanceof hr)return n}return!0}),_t(e=>e!==lh),en(1)))}function GU(t,e){return qe(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?k(_e(w({},n),{guardsResult:!0})):KU(s,i,r,t).pipe(qe(a=>a&&BU(a)?QU(i,o,t,e):k(a)),$(a=>_e(w({},n),{guardsResult:a})))})}function KU(t,e,n,i){return Ae(t).pipe(qe(r=>eB(r.component,r.route,n,e,i)),Fn(r=>r!==!0,!0))}function QU(t,e,n,i){return Ae(e).pipe(Ur(r=>Yi(ZU(r.route.parent,i),YU(r.route,i),JU(t,r.path,n),XU(t,r.route,n))),Fn(r=>r!==!0,!0))}function YU(t,e){return t!==null&&e&&e(new U_(t)),k(!0)}function ZU(t,e){return t!==null&&e&&e(new V_(t)),k(!0)}function XU(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return k(!0);let r=i.map(o=>Bu(()=>{let s=Lc(e)??n,a=Us(o,s),c=HU(a)?a.canActivate(e,t):mi(s,()=>a(e,t));return mr(c).pipe(Fn())}));return k(r).pipe(js())}function JU(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>VU(s)).filter(s=>s!==null).map(s=>Bu(()=>{let a=s.guards.map(c=>{let l=Lc(s.node)??n,u=Us(c,l),d=zU(u)?u.canActivateChild(i,t):mi(l,()=>u(i,t));return mr(d).pipe(Fn())});return k(a).pipe(js())}));return k(o).pipe(js())}function eB(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return k(!0);let s=o.map(a=>{let c=Lc(e)??r,l=Us(a,c),u=qU(l)?l.canDeactivate(t,e,n,i):mi(c,()=>l(t,e,n,i));return mr(u).pipe(Fn())});return k(s).pipe(js())}function tB(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return k(!0);let o=r.map(s=>{let a=Us(s,t),c=$U(a)?a.canLoad(e,n):mi(t,()=>a(e,n));return mr(c)});return k(o).pipe(js(),wT(i))}function wT(t){return Iu(We(e=>{if(Ls(e))throw _T(t,e)}),$(e=>e===!0))}function nB(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return k(!0);let o=r.map(s=>{let a=Us(s,t),c=WU(a)?a.canMatch(e,n):mi(t,()=>a(e,n));return mr(c)});return k(o).pipe(js(),wT(i))}var Nc=class{constructor(e){this.segmentGroup=e||null}},Ih=class extends Error{constructor(e){super(),this.urlTree=e}};function Ns(t){return as(new Nc(t))}function iB(t){return as(new R(4e3,!1))}function rB(t){return as(vT(!1,Kt.GuardRejected))}var K_=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return k(i);if(r.numberOfChildren>1||!r.children[W])return iB(e.redirectTo);r=r.children[W]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new Ih(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new hr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,i,r)}),new ge(o,s)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new R(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},Q_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oB(t,e,n,i,r){let o=iv(t,e,n);return o.matched?(i=kU(e,i),nB(i,e,n,r).pipe($(s=>s===!0?o:w({},Q_)))):k(o)}function iv(t,e,n){if(e.path==="**")return sB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?w({},Q_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||nU)(n,t,e);if(!r)return w({},Q_);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?w(w({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function sB(t){return{matched:!0,parameters:t.length>0?eT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function KD(t,e,n,i){return n.length>0&&lB(t,n,i)?{segmentGroup:new ge(e,cB(i,new ge(n,t.children))),slicedSegments:[]}:n.length===0&&uB(t,n,i)?{segmentGroup:new ge(t.segments,aB(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new ge(t.segments,t.children),slicedSegments:n}}function aB(t,e,n,i){let r={};for(let o of n)if(Ch(t,e,o)&&!i[Wn(o)]){let s=new ge([],{});r[Wn(o)]=s}return w(w({},i),r)}function cB(t,e){let n={};n[W]=e;for(let i of t)if(i.path===""&&Wn(i)!==W){let r=new ge([],{});n[Wn(i)]=r}return n}function lB(t,e,n){return n.some(i=>Ch(t,e,i)&&Wn(i)!==W)}function uB(t,e,n){return n.some(i=>Ch(t,e,i))}function Ch(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function dB(t,e,n,i){return Wn(t)!==i&&(i===W||!Ch(e,n,t))?!1:iv(e,t,n).matched}function hB(t,e,n){return e.length===0&&!t.children[n]}var Y_=class{};function fB(t,e,n,i,r,o,s="emptyOnly"){return new Z_(t,e,n,i,r,s,o).recognize()}var pB=31,Z_=class{constructor(e,n,i,r,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new K_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new R(4002,`'${e.segmentGroup}'`)}recognize(){let e=KD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe($(n=>{let i=new Rc([],Object.freeze({}),Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,{},W,this.rootComponentType,null,{}),r=new Gt(i,n),o=new bh("",r),s=wU(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,W).pipe(Zi(i=>{if(i instanceof Ih)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Nc?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=J_(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe($(o=>o instanceof Gt?[o]:[]))}processChildren(e,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return Ae(r).pipe(Ur(o=>{let s=i.children[o],a=OU(n,o);return this.processSegmentGroup(e,a,s,o)}),qu((o,s)=>(o.push(...s),o)),Xi(null),hm(),qe(o=>{if(o===null)return Ns(i);let s=IT(o);return mB(s),k(s)}))}processSegment(e,n,i,r,o,s){return Ae(n).pipe(Ur(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,o,s).pipe(Zi(c=>{if(c instanceof Nc)return k(null);throw c}))),Fn(a=>!!a),Zi(a=>{if(bT(a))return hB(i,r,o)?k(new Y_):Ns(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,o,s,a){return dB(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,s):Ns(r):Ns(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=iv(n,r,o);if(!a)return Ns(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>pB&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,d).pipe(qe(h=>this.processSegment(e,i,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,i,r,o){let s=oB(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),s.pipe(tn(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(tn(({routes:c})=>{let l=i._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new Rc(u,h,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,_B(i),Wn(i),i.component??i._loadedComponent??null,i,vB(i)),{segmentGroup:m,slicedSegments:g}=KD(n,u,d,c);if(g.length===0&&m.hasChildren())return this.processChildren(l,c,m).pipe($(C=>C===null?null:new Gt(f,C)));if(c.length===0&&g.length===0)return k(new Gt(f,[]));let _=Wn(i)===o;return this.processSegment(l,c,m,g,_?W:o,!0).pipe($(C=>new Gt(f,C instanceof Gt?[C]:[])))}))):Ns(n)))}getChildConfig(e,n,i){return n.children?k({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?k({routes:n._loadedRoutes,injector:n._loadedInjector}):tB(e,n,i,this.urlSerializer).pipe(qe(r=>r?this.configLoader.loadChildren(e,n).pipe(We(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):rB(n))):k({routes:[],injector:e})}};function mB(t){t.sort((e,n)=>e.value.outlet===W?-1:n.value.outlet===W?1:e.value.outlet.localeCompare(n.value.outlet))}function gB(t){let e=t.value.routeConfig;return e&&e.path===""}function IT(t){let e=[],n=new Set;for(let i of t){if(!gB(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=IT(i.children);e.push(new Gt(i.value,r))}return e.filter(i=>!n.has(i))}function _B(t){return t.data||{}}function vB(t){return t.resolve||{}}function yB(t,e,n,i,r,o){return qe(s=>fB(t,e,n,i,s.extractedUrl,r,o).pipe($(({state:a,tree:c})=>_e(w({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function bB(t,e){return qe(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return k(n);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of ET(c))s.add(l);let a=0;return Ae(s).pipe(Ur(c=>o.has(c)?wB(c,i,t,e):(c.data=J_(c,c.parent,t).resolve,k(void 0))),We(()=>a++),ls(1),qe(c=>a===s.size?k(n):Ut))})}function ET(t){let e=t.children.map(n=>ET(n)).flat();return[t,...e]}function wB(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!mT(r)&&(o[kc]=r.title),IB(o,t,e,i).pipe($(s=>(t._resolvedData=s,t.data=J_(t,t.parent,n).resolve,null)))}function IB(t,e,n,i){let r=S_(t);if(r.length===0)return k({});let o={};return Ae(r).pipe(qe(s=>EB(t[s],e,n,i).pipe(Fn(),We(a=>{o[s]=a}))),ls(1),dm(o),Zi(s=>bT(s)?Ut:as(s)))}function EB(t,e,n,i){let r=Lc(e)??i,o=Us(t,r),s=o.resolve?o.resolve(e,n):mi(r,()=>o(e,n));return mr(s)}function D_(t){return tn(e=>{let n=t(e);return n?Ae(n).pipe($(()=>e)):k(e)})}var xT=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===W);return r}getResolvedTitleForRoute(i){return i.data[kc]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>y(xB),providedIn:"root"});let t=e;return t})(),xB=(()=>{let e=class e extends xT{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(x($D))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jc=new T("",{providedIn:"root",factory:()=>({})}),Pc=new T(""),rv=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=y(Gd)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return k(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=mr(i.loadComponent()).pipe($(CT),We(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),qa(()=>{this.componentLoaders.delete(i)})),o=new is(r,()=>new He).pipe(ns());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return k({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=CB(r,this.compiler,i,this.onLoadEndListener).pipe(qa(()=>{this.childrenLoaders.delete(r)})),a=new is(s,()=>new He).pipe(ns());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function CB(t,e,n,i){return mr(t.loadChildren()).pipe($(CT),qe(r=>r instanceof ic||Array.isArray(r)?k(r):Ae(e.compileModuleAsync(r))),$(r=>{i&&i(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(Pc,[],{optional:!0,self:!0}).flat()),{routes:s.map(nv),injector:o}}))}function DB(t){return t&&typeof t=="object"&&"default"in t}function CT(t){return DB(t)?t.default:t}var ov=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>y(TB),providedIn:"root"});let t=e;return t})(),TB=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),DT=new T(""),TT=new T("");function SB(t,e,n){let i=t.get(TT),r=t.get(ke);return t.get(O).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(l=>{o=l}),a=r.startViewTransition(()=>(o(),AB(t))),{onViewTransitionCreated:c}=i;return c&&mi(t,()=>c({transition:a,from:e,to:n})),s})}function AB(t){return new Promise(e=>{e_(e,{injector:t})})}var sv=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new He,this.transitionAbortSubject=new He,this.configLoader=y(rv),this.environmentInjector=y($t),this.urlSerializer=y(Oc),this.rootContexts=y(Fc),this.location=y(Ms),this.inputBindingEnabled=y(xh,{optional:!0})!==null,this.titleStrategy=y(xT),this.options=y(jc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=y(ov),this.createViewTransition=y(DT,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>k(void 0),this.rootComponentType=null;let i=o=>this.events.next(new F_(o)),r=o=>this.events.next(new L_(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(_e(w(w({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new Xe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ec,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_t(s=>s.id!==0),$(s=>_e(w({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),tn(s=>{let a=!1,c=!1;return k(s).pipe(tn(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Kt.SupersededByNewNavigation),Ut;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?_e(w({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new pr(l.id,this.urlSerializer.serialize(l.rawUrl),h,mh.IgnoredSameUrlNavigation)),l.resolve(null),Ut}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return k(l).pipe(tn(h=>{let f=this.transitions?.getValue();return this.events.next(new Vs(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Ut:Promise.resolve(h)}),yB(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),We(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=_e(w({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new gh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:m,restoredState:g,extras:_}=l,C=new Vs(h,this.urlSerializer.serialize(f),m,g);this.events.next(C);let z=fT(this.rootComponentType).snapshot;return this.currentTransition=s=_e(w({},l),{targetSnapshot:z,urlAfterRedirects:f,extras:_e(w({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,k(s)}else{let h="";return this.events.next(new pr(l.id,this.urlSerializer.serialize(l.extractedUrl),h,mh.IgnoredByUrlHandlingStrategy)),l.resolve(null),Ut}}),We(l=>{let u=new N_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),$(l=>(this.currentTransition=s=_e(w({},l),{guards:LU(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),GU(this.environmentInjector,l=>this.events.next(l)),We(l=>{if(s.guardsResult=l.guardsResult,Ls(l.guardsResult))throw _T(this.urlSerializer,l.guardsResult);let u=new P_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),_t(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Kt.GuardRejected),!1)),D_(l=>{if(l.guards.canActivateChecks.length)return k(l).pipe(We(u=>{let d=new k_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),tn(u=>{let d=!1;return k(u).pipe(bB(this.paramsInheritanceStrategy,this.environmentInjector),We({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Kt.NoDataFromResolver)}}))}),We(u=>{let d=new O_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),D_(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(We(f=>{d.component=f}),$(()=>{})));for(let f of d.children)h.push(...u(f));return h};return jr(u(l.targetSnapshot.root)).pipe(Xi(null),en(1))}),D_(()=>this.afterPreactivation()),tn(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?Ae(d).pipe($(()=>s)):k(s)}),$(l=>{let u=AU(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=_e(w({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),We(()=>{this.events.next(new Sc)}),FU(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),en(1),We({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ai(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Br(this.transitionAbortSubject.pipe(We(l=>{throw l}))),qa(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Kt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Zi(l=>{if(c=!0,yT(l))this.events.next(new fr(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),NU(l)?this.events.next(new Ac(l.url)):s.resolve(!1);else{this.events.next(new Tc(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(i.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return Ut}))}))}cancelNavigationTransition(i,r,o){let s=new fr(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function RB(t){return t!==Ec}var MB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>y(NB),providedIn:"root"});let t=e;return t})(),X_=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},NB=(()=>{let e=class e extends X_{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=uc(e)))(o||e)}})(),e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ST=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:()=>y(PB),providedIn:"root"});let t=e;return t})(),PB=(()=>{let e=class e extends ST{constructor(){super(...arguments),this.location=y(Ms),this.urlSerializer=y(Oc),this.options=y(jc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=y(ov),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new hr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=fT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Vs)this.stateMemento=this.createStateMemento();else if(i instanceof pr)this.rawUrlTree=r.initialUrl;else if(i instanceof gh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof Sc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof fr&&(i.code===Kt.GuardRejected||i.code===Kt.NoDataFromResolver)?this.restoreHistory(r):i instanceof Tc?this.restoreHistory(r,!0):i instanceof Ai&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=w(w({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=w(w({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=uc(e)))(o||e)}})(),e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(wc||{});function AT(t,e){t.events.pipe(_t(n=>n instanceof Ai||n instanceof fr||n instanceof Tc||n instanceof pr),$(n=>n instanceof Ai||n instanceof pr?wc.COMPLETE:(n instanceof fr?n.code===Kt.Redirect||n.code===Kt.SupersededByNewNavigation:!1)?wc.REDIRECTING:wc.FAILED),_t(n=>n!==wc.REDIRECTING),en(1)).subscribe(()=>{e()})}function kB(t){throw t}var OB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ft=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=y(zd),this.stateManager=y(ST),this.options=y(jc,{optional:!0})||{},this.pendingTasks=y(Bd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=y(sv),this.urlSerializer=y(Oc),this.location=y(Ms),this.urlHandlingStrategy=y(ov),this._events=new He,this.errorHandler=this.options.errorHandler||kB,this.navigated=!1,this.routeReuseStrategy=y(MB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=y(Pc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!y(xh,{optional:!0}),this.eventsSubscription=new Pe,this.isNgZoneEnabled=y(O)instanceof O&&O.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof fr&&r.code!==Kt.Redirect&&r.code!==Kt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ai)this.navigated=!0;else if(r instanceof Ac){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||RB(o.source)};this.scheduleNavigation(a,Ec,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}VB(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ec,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=w({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(nv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=w(w({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=lT(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return uT(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=Ls(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Ec,null,r)}navigate(i,r={skipLocationChange:!1}){return LB(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=w({},OB):r===!1?o=w({},FB):o=r,Ls(i))return HD(this.currentUrlTree,i,o);let s=this.parseUrl(i);return HD(this.currentUrlTree,s,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(i,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return AT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function LB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new R(4008,!1)}function VB(t){return!(t instanceof Sc)&&!(t instanceof Ac)}var Eh=class{};var jB=(()=>{let e=class e{constructor(i,r,o,s,a){this.router=i,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(_t(i=>i instanceof Ai),Ur(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Ud(s.providers,i,`Route: ${s.path}`));let a=s._injector??i,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Ae(o).pipe(cs())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(i,r):o=k(null);let s=o.pipe(qe(a=>a===null?k(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return Ae([s,a]).pipe(cs())}else return s})}};e.\u0275fac=function(r){return new(r||e)(x(Ft),x(Gd),x($t),x(Eh),x(rv))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),RT=new T(""),UB=(()=>{let e=class e{constructor(i,r,o,s,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Vs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof Ai?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof pr&&i.code===mh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof _h&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new _h(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){kd()},e.\u0275prov=D({token:e,factory:e.\u0275fac});let t=e;return t})();function MT(t,...e){return Ed([{provide:Pc,multi:!0,useValue:t},[],{provide:oo,useFactory:NT,deps:[Ft]},{provide:Wd,multi:!0,useFactory:PT},e.map(n=>n.\u0275providers)])}function NT(t){return t.routerState.root}function Uc(t,e){return{\u0275kind:t,\u0275providers:e}}function PT(){let t=y(ht);return e=>{let n=t.get(pc);if(e!==n.components[0])return;let i=t.get(Ft),r=t.get(kT);t.get(av)===1&&i.initialNavigation(),t.get(OT,null,Z.Optional)?.setUpPreloading(),t.get(RT,null,Z.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var kT=new T("",{factory:()=>new He}),av=new T("",{providedIn:"root",factory:()=>1});function BB(){return Uc(2,[{provide:av,useValue:0},{provide:qd,multi:!0,deps:[ht],useFactory:e=>{let n=e.get(ED,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=e.get(Ft),o=e.get(kT);AT(r,()=>{i(!0)}),e.get(sv).afterPreactivation=()=>(i(!0),o.closed?k(void 0):o),r.initialNavigation()}))}}])}function $B(){return Uc(3,[{provide:qd,multi:!0,useFactory:()=>{let e=y(Ft);return()=>{e.setUpLocationChangeListener()}}},{provide:av,useValue:2}])}var OT=new T("");function HB(t){return Uc(0,[{provide:OT,useExisting:jB},{provide:Eh,useExisting:t}])}function zB(){return Uc(8,[GD,{provide:xh,useExisting:GD}])}function qB(t){let e=[{provide:DT,useValue:SB},{provide:TT,useValue:w({skipNextTransition:!!t?.skipInitialTransition},t)}];return Uc(9,e)}var QD=new T("ROUTER_FORROOT_GUARD"),WB=[Ms,{provide:Oc,useClass:Cc},Ft,Fc,{provide:oo,useFactory:NT,deps:[Ft]},rv,[]],Dh=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[WB,[],{provide:Pc,multi:!0,useValue:i},{provide:QD,useFactory:YB,deps:[[Ft,new Ue,new Eg]]},{provide:jc,useValue:r||{}},r?.useHash?KB():QB(),GB(),r?.preloadingStrategy?HB(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?ZB(r):[],r?.bindToComponentInputs?zB().\u0275providers:[],r?.enableViewTransitions?qB().\u0275providers:[],XB()]}}static forChild(i){return{ngModule:e,providers:[{provide:Pc,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(x(QD,8))},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();function GB(){return{provide:RT,useFactory:()=>{let t=y(PD),e=y(O),n=y(jc),i=y(sv),r=y(Oc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new UB(r,i,t,e,n)}}}function KB(){return{provide:no,useClass:CD}}function QB(){return{provide:no,useClass:h_}}function YB(t){return"guarded"}function ZB(t){return[t.initialNavigation==="disabled"?$B().\u0275providers:[],t.initialNavigation==="enabledBlocking"?BB().\u0275providers:[]]}var YD=new T("");function XB(){return[{provide:YD,useFactory:PT},{provide:Wd,multi:!0,useExisting:YD}]}var lv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var I=function(t,e){if(!t)throw ao(e)},ao=function(t){return new Error("Firebase Database ("+lv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var LT=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},e$=function(t){let e=[],n=0,i=0;for(;n<t.length;){let r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){let o=t[n++],s=t[n++],a=t[n++],c=((r&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Sh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){let o=t[r],s=r+1<t.length,a=s?t[r+1]:0,c=r+2<t.length,l=c?t[r+2]:0,u=o>>2,d=(o&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,s||(h=64)),i.push(n[u],n[d],n[h],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(LT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):e$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){let o=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;let l=r<t.length?n[t.charAt(r)]:64;++r;let d=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||a==null||l==null||d==null)throw new uv;let h=o<<2|a>>4;if(i.push(h),l!==64){let f=a<<4&240|l>>2;if(i.push(f),d!==64){let m=l<<6&192|d;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},uv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},hv=function(t){let e=LT(t);return Sh.encodeByteArray(e,!0)},Bc=function(t){return hv(t).replace(/\./g,"")},$c=function(t){try{return Sh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function VT(t){return jT(void 0,t)}function jT(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!t$(n)||(t[n]=jT(t[n],e[n]));return t}function t$(t){return t!=="__proto__"}function n$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var i$=()=>n$().__FIREBASE_DEFAULTS__,r$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},o$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&$c(t[1]);return e&&JSON.parse(e)},Ah=()=>{try{return i$()||r$()||o$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fv=t=>{var e,n;return(n=(e=Ah())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Rh=t=>{let e=fv(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},pv=()=>{var t;return(t=Ah())===null||t===void 0?void 0:t.config},mv=t=>{var e;return(e=Ah())===null||e===void 0?void 0:e[`_${t}`]};var so=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function Mh(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bc(JSON.stringify(n)),Bc(JSON.stringify(s)),""].join(".")}function Je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function s$(){var t;let e=(t=Ah())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UT(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Nh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BT(){let t=Je();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Gn(){return lv.NODE_CLIENT===!0||lv.NODE_ADMIN===!0}function $T(){return!s$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gv(){try{return typeof indexedDB=="object"}catch{return!1}}function HT(){return new Promise((t,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var a$="FirebaseError",Qt=class t extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=a$,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ri.prototype.create)}},Ri=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],s=o?c$(o,i):"Error",a=`${this.serviceName}: ${s} (${r}).`;return new Qt(r,a,i)}};function c$(t,e){return t.replace(l$,(n,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var l$=/\{\$([^}]+)}/g;function Bs(t){return JSON.parse(t)}function ot(t){return JSON.stringify(t)}var zT=function(t){let e={},n={},i={},r="";try{let o=t.split(".");e=Bs($c(o[0])||""),n=Bs($c(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}};var qT=function(t){let e=zT(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},WT=function(t){let e=zT(t).claims;return typeof e=="object"&&e.admin===!0};function Kn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function co(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function zc(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qc(t,e,n){let i={};for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function lo(t,e){if(t===e)return!0;let n=Object.keys(t),i=Object.keys(e);for(let r of n){if(!i.includes(r))return!1;let o=t[r],s=e[r];if(FT(o)&&FT(s)){if(!lo(o,s))return!1}else if(o!==s)return!1}for(let r of i)if(!n.includes(r))return!1;return!0}function FT(t){return t!==null&&typeof t=="object"}function uo(t){let e=[];for(let[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $s(t){let e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Hs(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var Th=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let i=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)i[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)i[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=(h<<1|h>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let h=(r<<5|r>>>27)+l+c+u+i[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let i=n-this.blockSize,r=0,o=this.buf_,s=this.inbuf_;for(;r<n;){if(s===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(o),s=0;break}}else for(;r<n;)if(o[s]=e[r],++s,++r,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}};function GT(t,e){let n=new dv(t,e);return n.subscribe.bind(n)}var dv=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");u$(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=cv),r.error===void 0&&(r.error=cv),r.complete===void 0&&(r.complete=cv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function u$(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cv(){}function KT(t,e){return`${t} failed: ${e} argument `}var QT=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){let o=r-55296;i++,I(i<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(i)-56320;r=65536+(o<<10)+s}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Wc=function(t){let e=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};var AJ=4*60*60*1e3;function et(t){return t&&t._delegate?t._delegate:t}var Lt=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ho="[DEFAULT]";var Ph=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new so;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(h$(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ho){return this.instances.has(e)}getOptions(e=ho){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);i===a&&s.resolve(r)}return r}onInit(e,n){var i;let r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);let s=this.instances.get(r);return s&&e(s,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:d$(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ho){return this.component?this.component.multipleInstances?e:ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function d$(t){return t===ho?void 0:t}function h$(t){return t.instantiationMode==="EAGER"}var Gc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Ph(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var f$=[],J=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(J||{}),p$={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},m$=J.INFO,g$={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},_$=(t,e,...n)=>{if(e<t.logLevel)return;let i=new Date().toISOString(),r=g$[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Qn=class{constructor(e){this.name=e,this._logLevel=m$,this._logHandler=_$,this._userLogHandler=null,f$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in J))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...e),this._logHandler(this,J.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...e),this._logHandler(this,J.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,J.INFO,...e),this._logHandler(this,J.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,J.WARN,...e),this._logHandler(this,J.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...e),this._logHandler(this,J.ERROR,...e)}};var v$=(t,e)=>e.some(n=>t instanceof n),YT,ZT;function y$(){return YT||(YT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b$(){return ZT||(ZT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var XT=new WeakMap,vv=new WeakMap,JT=new WeakMap,_v=new WeakMap,bv=new WeakMap;function w$(t){let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Yn(t.result)),r()},s=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&XT.set(n,t)}).catch(()=>{}),bv.set(e,t),e}function I$(t){if(vv.has(t))return;let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),r()},s=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});vv.set(t,e)}var yv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eS(t){yv=t(yv)}function E$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=t.call(kh(this),e,...n);return JT.set(i,e.sort?e.sort():[e]),Yn(i)}:b$().includes(t)?function(...e){return t.apply(kh(this),e),Yn(XT.get(this))}:function(...e){return Yn(t.apply(kh(this),e))}}function x$(t){return typeof t=="function"?E$(t):(t instanceof IDBTransaction&&I$(t),v$(t,y$())?new Proxy(t,yv):t)}function Yn(t){if(t instanceof IDBRequest)return w$(t);if(_v.has(t))return _v.get(t);let e=x$(t);return e!==t&&(_v.set(t,e),bv.set(e,t)),e}var kh=t=>bv.get(t);function nS(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){let s=indexedDB.open(t,e),a=Yn(s);return i&&s.addEventListener("upgradeneeded",c=>{i(Yn(s.result),c.oldVersion,c.newVersion,Yn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var C$=["get","getKey","getAll","getAllKeys","count"],D$=["put","add","delete","clear"],wv=new Map;function tS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wv.get(e))return wv.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,r=D$.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||C$.includes(n)))return;let o=function(s,...a){return p(this,null,function*(){let c=this.transaction(s,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),r&&c.done]))[0]})};return wv.set(e,o),o}eS(t=>_e(w({},t),{get:(e,n,i)=>tS(e,n)||t.get(e,n,i),has:(e,n)=>!!tS(e,n)||t.has(e,n)}));var Ev=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(T$(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function T$(t){let e=t.getComponent();return e?.type==="VERSION"}var xv="@firebase/app",iS="0.10.2";var fo=new Qn("@firebase/app"),S$="@firebase/app-compat",A$="@firebase/analytics-compat",R$="@firebase/analytics",M$="@firebase/app-check-compat",N$="@firebase/app-check",P$="@firebase/auth",k$="@firebase/auth-compat",O$="@firebase/database",F$="@firebase/database-compat",L$="@firebase/functions",V$="@firebase/functions-compat",j$="@firebase/installations",U$="@firebase/installations-compat",B$="@firebase/messaging",$$="@firebase/messaging-compat",H$="@firebase/performance",z$="@firebase/performance-compat",q$="@firebase/remote-config",W$="@firebase/remote-config-compat",G$="@firebase/storage",K$="@firebase/storage-compat",Q$="@firebase/firestore",Y$="@firebase/firestore-compat",Z$="firebase",X$="10.11.1";var Cv="[DEFAULT]",J$={[xv]:"fire-core",[S$]:"fire-core-compat",[R$]:"fire-analytics",[A$]:"fire-analytics-compat",[N$]:"fire-app-check",[M$]:"fire-app-check-compat",[P$]:"fire-auth",[k$]:"fire-auth-compat",[O$]:"fire-rtdb",[F$]:"fire-rtdb-compat",[L$]:"fire-fn",[V$]:"fire-fn-compat",[j$]:"fire-iid",[U$]:"fire-iid-compat",[B$]:"fire-fcm",[$$]:"fire-fcm-compat",[H$]:"fire-perf",[z$]:"fire-perf-compat",[q$]:"fire-rc",[W$]:"fire-rc-compat",[G$]:"fire-gcs",[K$]:"fire-gcs-compat",[Q$]:"fire-fst",[Y$]:"fire-fst-compat","fire-js":"fire-js",[Z$]:"fire-js-all"};var Kc=new Map,eH=new Map,Dv=new Map;function rS(t,e){try{t.container.addComponent(e)}catch(n){fo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zn(t){let e=t.name;if(Dv.has(e))return fo.debug(`There were multiple attempts to register component ${e}.`),!1;Dv.set(e,t);for(let n of Kc.values())rS(n,t);for(let n of eH.values())rS(n,t);return!0}function po(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Cn(t){return t.settings!==void 0}var tH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gr=new Ri("app","Firebase",tH);var Tv=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Lt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}};var Xn=X$;function Rv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Cv,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw gr.create("bad-app-name",{appName:String(r)});if(n||(n=pv()),!n)throw gr.create("no-options");let o=Kc.get(r);if(o){if(lo(n,o.options)&&lo(i,o.config))return o;throw gr.create("duplicate-app",{appName:r})}let s=new Gc(r);for(let c of Dv.values())s.addComponent(c);let a=new Tv(n,i,s);return Kc.set(r,a),a}function _r(t=Cv){let e=Kc.get(t);if(!e&&t===Cv&&pv())return Rv();if(!e)throw gr.create("no-app",{appName:t});return e}function Oh(){return Array.from(Kc.values())}function Re(t,e,n){var i;let r=(i=J$[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);let o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${r}" with version "${e}":`];o&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fo.warn(a.join(" "));return}Zn(new Lt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var nH="firebase-heartbeat-database",iH=1,Qc="firebase-heartbeat-store",Iv=null;function cS(){return Iv||(Iv=nS(nH,iH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qc)}catch(n){console.warn(n)}}}}).catch(t=>{throw gr.create("idb-open",{originalErrorMessage:t.message})})),Iv}function rH(t){return p(this,null,function*(){try{let n=(yield cS()).transaction(Qc),i=yield n.objectStore(Qc).get(lS(t));return yield n.done,i}catch(e){if(e instanceof Qt)fo.warn(e.message);else{let n=gr.create("idb-get",{originalErrorMessage:e?.message});fo.warn(n.message)}}})}function oS(t,e){return p(this,null,function*(){try{let i=(yield cS()).transaction(Qc,"readwrite");yield i.objectStore(Qc).put(e,lS(t)),yield i.done}catch(n){if(n instanceof Qt)fo.warn(n.message);else{let i=gr.create("idb-set",{originalErrorMessage:n?.message});fo.warn(i.message)}}})}function lS(t){return`${t.name}!${t.options.appId}`}var oH=1024,sH=30*24*60*60*1e3,Sv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Av(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=sS();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=sH}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=sS(),{heartbeatsToSend:i,unsentEntries:r}=aH(this._heartbeatsCache.heartbeats),o=Bc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o})}};function sS(){return new Date().toISOString().substring(0,10)}function aH(t,e=oH){let n=[],i=t.slice();for(let r of t){let o=n.find(s=>s.agent===r.agent);if(o){if(o.dates.push(r.date),aS(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),aS(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var Av=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return gv()?HT().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield rH(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return oS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return oS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function aS(t){return Bc(JSON.stringify({version:2,heartbeats:t})).length}function cH(t){Zn(new Lt("platform-logger",e=>new Ev(e),"PRIVATE")),Zn(new Lt("heartbeat",e=>new Sv(e),"PRIVATE")),Re(xv,iS,t),Re(xv,iS,"esm2017"),Re("fire-js","")}cH("");var lH="firebase",uH="10.11.1";Re(lH,uH,"app");var Mi=new Hn("ANGULARFIRE2_VERSION");function qs(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var go=(t,e)=>{let n=e?[e]:Oh(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},vr=class{constructor(){return go(dH)}},dH="app-check";function zs(){}var Fh=class{zone;delegate;constructor(e,n=am){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},Mv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zs,{},zs,zs)),n.pipe(We({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},yr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Fh(Zone.current)),this.insideAngular=n.run(()=>new Fh(Zone.current,za)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(x(O))};static \u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Lh(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function hH(t){return Lh().ngZone.runOutsideAngular(()=>t())}function mo(t){return Lh().ngZone.run(()=>t())}function fH(t){return pH(Lh())(t)}function pH(t){return function(n){return n=n.lift(new Mv(t.ngZone)),n.pipe(Qi(t.outsideAngular),Ki(t.insideAngular))}}var mH=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),mo(()=>t.apply(void 0,i))},Vt=(t,e)=>function(){let n,i=arguments;for(let o=0;o<arguments.length;o++)typeof i[o]=="function"&&(e&&(n||=mo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zs,{},zs,zs))),i[o]=mH(i[o],n));let r=hH(()=>t.apply(this,i));if(!e)if(r instanceof Q){let o=Lh();return r.pipe(Qi(o.outsideAngular),Ki(o.insideAngular))}else return mo(()=>r);return r instanceof Q?r.pipe(fH):r instanceof Promise?mo(()=>new Promise((o,s)=>r.then(a=>mo(()=>o(a)),a=>mo(()=>s(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:mo(()=>r)};var Dn=class{constructor(e){return e}},Ni=class{constructor(){return Oh()}};function gH(t){return t&&t.length===1?t[0]:new Dn(_r())}var Nv=new T("angularfire2._apps"),_H={provide:Dn,useFactory:gH,deps:[[new Ue,Nv]]},vH={provide:Ni,deps:[[new Ue,Nv]]};function yH(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Dn(i)}}var bH=(()=>{class t{constructor(n){Re("angularfire",Mi.full,"core"),Re("angularfire",Mi.full,"app"),Re("angular",cD.full,n.toString())}static \u0275fac=function(i){return new(i||t)(x(on))};static \u0275mod=re({type:t});static \u0275inj=ie({providers:[_H,vH]})}return t})();function uS(t,...e){return{ngModule:bH,providers:[{provide:Nv,useFactory:yH(t),multi:!0,deps:[O,ht,yr,...e]}]}}var dS=Vt(Rv,!0);function SS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var AS=SS,RS=new Ri("auth","Firebase",SS());var Hh=new Qn("@firebase/auth");function wH(t,...e){Hh.logLevel<=J.WARN&&Hh.warn(`Auth (${Xn}): ${t}`,...e)}function jh(t,...e){Hh.logLevel<=J.ERROR&&Hh.error(`Auth (${Xn}): ${t}`,...e)}function ei(t,...e){throw ty(t,...e)}function _o(t,...e){return ty(t,...e)}function MS(t,e,n){let i=Object.assign(Object.assign({},AS()),{[e]:n});return new Ri("auth","Firebase",i).create(e,{appName:t.name})}function Oi(t){return MS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ty(t,...e){if(typeof t!="string"){let n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return RS.create(t,...e)}function F(t,e,...n){if(!t)throw ty(e,...n)}function Pi(t){let e="INTERNAL ASSERTION FAILED: "+t;throw jh(e),new Error(e)}function wr(t,e){t||Pi(e)}function Fv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IH(){return hS()==="http:"||hS()==="https:"}function hS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function EH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IH()||UT()||"connection"in navigator)?navigator.onLine:!0}function xH(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var vo=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,wr(n>e,"Short delay should be less than long delay!"),this.isMobile=Hc()||Nh()}get(){return EH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ny(t,e){wr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var zh=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var CH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var DH=new vo(3e4,6e4);function Ir(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Er(o,s,a,c){return p(this,arguments,function*(t,e,n,i,r={}){return NS(t,r,()=>p(this,null,function*(){let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});let d=uo(Object.assign({key:t.config.apiKey},u)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),zh.fetch()(PS(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))}))})}function NS(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let i=Object.assign(Object.assign({},CH),e);try{let r=new Lv(t),o=yield Promise.race([n(),r.promise]);r.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Vh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vh(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Vh(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Vh(t,"user-disabled",s);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw MS(t,u,l);ei(t,u)}}catch(r){if(r instanceof Qt)throw r;ei(t,"network-request-failed",{message:String(r)})}})}function il(o,s,a,c){return p(this,arguments,function*(t,e,n,i,r={}){let l=yield Er(t,e,n,i,r);return"mfaPendingCredential"in l&&ei(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function PS(t,e,n,i){let r=`${e}${n}?${i}`;return t.config.emulator?ny(t.config,r):`${t.config.apiScheme}://${r}`}function TH(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Lv=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(_o(this.auth,"network-request-failed")),DH.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Vh(t,e,n){let i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=_o(t,e,i);return r.customData._tokenResponse=n,r}function fS(t){return t!==void 0&&t.enterprise!==void 0}var Vv=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TH(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function SH(t,e){return p(this,null,function*(){return Er(t,"GET","/v2/recaptchaConfig",Ir(t,e))})}function AH(t,e){return p(this,null,function*(){return Er(t,"POST","/v1/accounts:delete",e)})}function kS(t,e){return p(this,null,function*(){return Er(t,"POST","/v1/accounts:lookup",e)})}function Yc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function iy(t,e=!1){return p(this,null,function*(){let n=et(t),i=yield n.getIdToken(e),r=ry(i);F(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let o=typeof r.firebase=="object"?r.firebase:void 0,s=o?.sign_in_provider;return{claims:r,token:i,authTime:Yc(Pv(r.auth_time)),issuedAtTime:Yc(Pv(r.iat)),expirationTime:Yc(Pv(r.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Pv(t){return Number(t)*1e3}function ry(t){let[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return jh("JWT malformed, contained fewer than 3 sections"),null;try{let r=$c(n);return r?JSON.parse(r):(jh("Failed to decode base64 JWT payload"),null)}catch(r){return jh("Caught error parsing JWT payload as JSON",r?.toString()),null}}function pS(t){let e=ry(t);return F(e,"internal-error"),F(typeof e.exp<"u","internal-error"),F(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Xc(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(i){throw i instanceof Qt&&RH(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}})}function RH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var jv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Jc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yc(this.lastLoginAt),this.creationTime=Yc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function qh(t){return p(this,null,function*(){var e;let n=t.auth,i=yield t.getIdToken(),r=yield Xc(t,kS(n,{idToken:i}));F(r?.users.length,n,"internal-error");let o=r.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?OS(o.providerUserInfo):[],a=MH(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Jc(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function oy(t){return p(this,null,function*(){let e=et(t);yield qh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function MH(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function OS(t){return t.map(e=>{var{providerId:n}=e,i=cm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function NH(t,e){return p(this,null,function*(){let n=yield NS(t,{},()=>p(this,null,function*(){let i=uo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,s=PS(t,r,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zh.fetch()(s,{method:"POST",headers:a,body:i})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function PH(t,e){return p(this,null,function*(){return Er(t,"POST","/v2/accounts:revokeToken",Ir(t,e))})}var Zc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){F(e.idToken,"internal-error"),F(typeof e.idToken<"u","internal-error"),F(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){F(e.length!==0,"internal-error");let n=pS(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(F(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:o}=yield NH(e,n);this.updateTokensAndExpiration(i,r,Number(o))})}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){let{refreshToken:i,accessToken:r,expirationTime:o}=n,s=new t;return i&&(F(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),r&&(F(typeof r=="string","internal-error",{appName:e}),s.accessToken=r),o&&(F(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Pi("not implemented")}};function br(t,e){F(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ws=class t{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=cm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Jc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield Xc(this,this.stsTokenManager.getToken(this.auth,e));return F(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return iy(this,e)}reload(){return oy(this)}_assign(e){this!==e&&(F(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){F(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield qh(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(Cn(this.auth.app))return Promise.reject(Oi(this.auth));let e=yield this.getIdToken();return yield Xc(this,AH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,s,a,c,l,u;let d=(i=n.displayName)!==null&&i!==void 0?i:void 0,h=(r=n.email)!==null&&r!==void 0?r:void 0,f=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,m=(s=n.photoURL)!==null&&s!==void 0?s:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,C=(l=n.createdAt)!==null&&l!==void 0?l:void 0,z=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:G,emailVerified:ye,isAnonymous:ut,providerData:fe,stsTokenManager:gt}=n;F(G&&gt,e,"internal-error");let On=Zc.fromJSON(this.name,gt);F(typeof G=="string",e,"internal-error"),br(d,e.name),br(h,e.name),F(typeof ye=="boolean",e,"internal-error"),F(typeof ut=="boolean",e,"internal-error"),br(f,e.name),br(m,e.name),br(g,e.name),br(_,e.name),br(C,e.name),br(z,e.name);let kr=new t({uid:G,auth:e,email:h,emailVerified:ye,displayName:d,isAnonymous:ut,photoURL:m,phoneNumber:f,tenantId:g,stsTokenManager:On,createdAt:C,lastLoginAt:z});return fe&&Array.isArray(fe)&&(kr.providerData=fe.map(Yo=>Object.assign({},Yo))),_&&(kr._redirectEventId=_),kr}static _fromIdTokenResponse(e,n,i=!1){return p(this,null,function*(){let r=new Zc;r.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield qh(o),o})}static _fromGetAccountInfoResponse(e,n,i){return p(this,null,function*(){let r=n.users[0];F(r.localId!==void 0,"internal-error");let o=r.providerUserInfo!==void 0?OS(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!o?.length,a=new Zc;a.updateFromIdToken(i);let c=new t({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Jc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var mS=new Map;function ki(t){wr(t instanceof Function,"Expected a class definition");let e=mS.get(t);return e?(wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mS.set(t,e),e)}var kH=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,i){return p(this,null,function*(){this.storage[n]=i})}_get(n){return p(this,null,function*(){let i=this.storage[n];return i===void 0?null:i})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,i){}_removeListener(n,i){}}return t.type="NONE",t})(),Uv=kH;function Uh(t,e,n){return`firebase:${t}:${e}:${n}`}var Wh=class t{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;let{config:r,name:o}=this.auth;this.fullUserKey=Uh(this.userKey,r.apiKey,o),this.fullPersistenceKey=Uh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ws._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,i="authUser"){return p(this,null,function*(){if(!n.length)return new t(ki(Uv),e,i);let r=(yield Promise.all(n.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=r[0]||ki(Uv),s=Uh(i,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d=Ws._fromJSON(e,u);l!==o&&(a=d),o=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,i):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>p(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,i))})}};function gS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(US(e))return"Blackberry";if(BS(e))return"Webos";if(sy(e))return"Safari";if((e.includes("chrome/")||LS(e))&&!e.includes("edge/"))return"Chrome";if(jS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function FS(t=Je()){return/firefox\//i.test(t)}function sy(t=Je()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LS(t=Je()){return/crios\//i.test(t)}function VS(t=Je()){return/iemobile/i.test(t)}function jS(t=Je()){return/android/i.test(t)}function US(t=Je()){return/blackberry/i.test(t)}function BS(t=Je()){return/webos/i.test(t)}function ef(t=Je()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OH(t=Je()){var e;return ef(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FH(){return BT()&&document.documentMode===10}function $S(t=Je()){return ef(t)||jS(t)||BS(t)||US(t)||/windows phone/i.test(t)||VS(t)}function LH(){try{return!!(window&&window!==window.top)}catch{return!1}}function HS(t,e=[]){let n;switch(t){case"Browser":n=gS(Je());break;case"Worker":n=`${gS(Je())}-${t}`;break;default:n=t}let i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xn}/${i}`}var Bv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let i=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});i.onAbort=n,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let i of this.queue)yield i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function VH(n){return p(this,arguments,function*(t,e={}){return Er(t,"GET","/v2/passwordPolicy",Ir(t,e))})}var jH=6,$v=class{constructor(e){var n,i,r,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:jH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Hv=class{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gh(this),this.idTokenSubscription=new Gh(this),this.beforeStateQueue=new Bv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ki(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Wh.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let n=yield kS(this,{idToken:e}),i=yield Ws._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;if(Cn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(r=c.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return F(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield qh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=xH()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(Cn(this.app))return Promise.reject(Oi(this));let n=e?et(e):null;return n&&F(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&F(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return Cn(this.app)?Promise.reject(Oi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Cn(this.app)?Promise.reject(Oi(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(ki(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield VH(this),n=new $v(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ri("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),yield PH(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ki(e)||this._popupRedirectResolver;F(n,this,"argument-error"),this.redirectPersistenceManager=yield Wh.create(this,[ki(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,i;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(F(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,i,r);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return F(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(n["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&wH(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function bo(t){return et(t)}var Gh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=GT(n=>this.observer=n)}get next(){return F(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var tf={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UH(t){tf=t}function zS(t){return tf.loadJS(t)}function BH(){return tf.recaptchaEnterpriseScript}function $H(){return tf.gapiScript}function qS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var HH="recaptcha-enterprise",zH="NO_RECAPTCHA",zv=class{constructor(e){this.type=HH,this.auth=bo(e)}verify(e="verify",n=!1){return p(this,null,function*(){function i(o){return p(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>p(this,null,function*(){SH(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Vv(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function r(o,s,a){let c=window.grecaptcha;fS(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(zH)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{i(this.auth).then(a=>{if(!n&&fS(window.grecaptcha))r(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=BH();c.length!==0&&(c+=a),zS(c).then(()=>{r(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function _S(t,e,n,i=!1){return p(this,null,function*(){let r=new zv(t),o;try{o=yield r.verify(n)}catch{o=yield r.verify(n,!0)}let s=Object.assign({},e);return i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function qv(t,e,n,i){return p(this,null,function*(){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield _S(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(o=>p(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield _S(t,e,n,n==="getOobCode");return i(t,s)}else return Promise.reject(o)}))})}function ay(t,e){let n=po(t,"auth");if(n.isInitialized()){let r=n.getImmediate(),o=n.getOptions();if(lo(o,e??{}))return r;ei(r,"already-initialized")}return n.initialize({options:e})}function qH(t,e){let n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(ki);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function cy(t,e,n){let i=bo(t);F(i._canInitEmulator,i,"emulator-config-failed"),F(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!n?.disableWarnings,o=WS(e),{host:s,port:a}=WH(e),c=a===null?"":`:${a}`;i.config.emulator={url:`${o}//${s}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||GH()}function WS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WH(t){let e=WS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let o=r[1];return{host:o,port:vS(i.substr(o.length+1))}}else{let[o,s]=i.split(":");return{host:o,port:vS(s)}}}function vS(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function GH(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var el=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pi("not implemented")}_getIdTokenResponse(e){return Pi("not implemented")}_linkToIdToken(e,n){return Pi("not implemented")}_getReauthenticationResolver(e){return Pi("not implemented")}};function KH(t,e){return p(this,null,function*(){return Er(t,"POST","/v1/accounts:signUp",e)})}function QH(t,e){return p(this,null,function*(){return il(t,"POST","/v1/accounts:signInWithPassword",Ir(t,e))})}function YH(t,e){return p(this,null,function*(){return il(t,"POST","/v1/accounts:signInWithEmailLink",Ir(t,e))})}function ZH(t,e){return p(this,null,function*(){return il(t,"POST","/v1/accounts:signInWithEmailLink",Ir(t,e))})}var tl=class t extends el{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new t(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return p(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qv(e,n,"signInWithPassword",QH);case"emailLink":return YH(e,{email:this._email,oobCode:this._password});default:ei(e,"internal-error")}})}_linkToIdToken(e,n){return p(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qv(e,i,"signUpPassword",KH);case"emailLink":return ZH(e,{idToken:n,email:this._email,oobCode:this._password});default:ei(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function kv(t,e){return p(this,null,function*(){return il(t,"POST","/v1/accounts:signInWithIdp",Ir(t,e))})}function XH(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JH(t){let e=$s(Hs(t)).link,n=e?$s(Hs(e)).deep_link_id:null,i=$s(Hs(t)).deep_link_id;return(i?$s(Hs(i)).link:null)||i||n||e||t}var Kh=class t{constructor(e){var n,i,r,o,s,a;let c=$s(Hs(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(i=c.oobCode)!==null&&i!==void 0?i:null,d=XH((r=c.mode)!==null&&r!==void 0?r:null);F(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=JH(e);try{return new t(n)}catch{return null}}};var GS=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,i){return tl._fromEmailAndPassword(n,i)}static credentialWithLink(n,i){let r=Kh.parseLink(i);return F(r,"argument-error"),tl._fromEmailAndCode(n,r.code,r.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Qh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Wv=class extends Qh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function ez(t,e){return p(this,null,function*(){return il(t,"POST","/v1/accounts:signUp",Ir(t,e))})}var Gs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,i,r=!1){return p(this,null,function*(){let o=yield Ws._fromIdTokenResponse(e,i,r),s=yS(i);return new t({user:o,providerId:s,_tokenResponse:i,operationType:n})})}static _forOperation(e,n,i){return p(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=yS(i);return new t({user:e,providerId:r,_tokenResponse:i,operationType:n})})}};function yS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Gv=class t extends Qt{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new t(e,n,i,r)}};function KS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Gv._fromErrorAndOperation(t,o,e,i):o})}function tz(t,e,n=!1){return p(this,null,function*(){let i=yield Xc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Gs._forOperation(t,"link",i)})}function nz(t,e,n=!1){return p(this,null,function*(){let{auth:i}=t;if(Cn(i.app))return Promise.reject(Oi(i));let r="reauthenticate";try{let o=yield Xc(t,KS(i,r,e,t),n);F(o.idToken,i,"internal-error");let s=ry(o.idToken);F(s,i,"internal-error");let{sub:a}=s;return F(t.uid===a,i,"user-mismatch"),Gs._forOperation(t,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&ei(i,"user-mismatch"),o}})}function QS(t,e,n=!1){return p(this,null,function*(){if(Cn(t.app))return Promise.reject(Oi(t));let i="signIn",r=yield KS(t,i,e),o=yield Gs._fromIdTokenResponse(t,i,r);return n||(yield t._updateCurrentUser(o.user)),o})}function ly(t,e){return p(this,null,function*(){return QS(bo(t),e)})}function YS(t){return p(this,null,function*(){let e=bo(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function uy(t,e,n){return p(this,null,function*(){if(Cn(t.app))return Promise.reject(Oi(t));let i=bo(t),s=yield qv(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ez).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&YS(t),c}),a=yield Gs._fromIdTokenResponse(i,"signIn",s);return yield i._updateCurrentUser(a.user),a})}function dy(t,e,n){return Cn(t.app)?Promise.reject(Oi(t)):ly(et(t),GS.credential(e,n)).catch(i=>p(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&YS(t),i}))}function hy(t,e,n,i){return et(t).onIdTokenChanged(e,n,i)}function fy(t,e,n){return et(t).beforeAuthStateChanged(e,n)}function py(t){return et(t).signOut()}var Yh="__sak";var Zh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yh,"1"),this.storage.removeItem(Yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function iz(){let t=Je();return sy(t)||ef(t)}var rz=1e3,oz=10,sz=(()=>{class t extends Zh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,i)=>this.onStorageEvent(n,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=iz()&&LH(),this.fallbackToPolling=$S(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),o=this.localCache[i];r!==o&&n(i,o,r)}}onStorageEvent(n,i=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=n.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(r);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(r,n.newValue):this.storage.removeItem(r);else if(this.localCache[r]===n.newValue&&!i)return}let o=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);FH()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,oz):o()}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:i,newValue:r}),!0)})},rz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,i){return p(this,null,function*(){yield Wi(t.prototype,this,"_set").call(this,n,i),this.localCache[n]=JSON.stringify(i)})}_get(n){return p(this,null,function*(){let i=yield Wi(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(i),i})}_remove(n){return p(this,null,function*(){yield Wi(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),ZS=sz;var az=(()=>{class t extends Zh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,i){}_removeListener(n,i){}}return t.type="SESSION",t})(),my=az;function cz(t){return Promise.all(t.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var lz=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let i=this.receivers.find(o=>o.isListeningto(n));if(i)return i;let r=new t(n);return this.receivers.push(r),r}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let i=n,{eventId:r,eventType:o,data:s}=i.data,a=this.handlersMap[o];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});let c=Array.from(a).map(u=>p(this,null,function*(){return u(i.origin,s)})),l=yield cz(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:l})})}_subscribe(n,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(i)}_unsubscribe(n,i){this.handlersMap[n]&&i&&this.handlersMap[n].delete(i),(!i||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function XS(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}var Kv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,i=50){return p(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=XS("",20);r.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},i);s={messageChannel:r,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(h.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Jn(){return window}function uz(t){Jn().location.href=t}function JS(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}function dz(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function hz(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function fz(){return JS()?self:null}var eA="firebaseLocalStorageDb",pz=1,Xh="firebaseLocalStorage",tA="fbase_key",yo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function nf(t,e){return t.transaction([Xh],e?"readwrite":"readonly").objectStore(Xh)}function mz(){let t=indexedDB.deleteDatabase(eA);return new yo(t).toPromise()}function Qv(){let t=indexedDB.open(eA,pz);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let i=t.result;try{i.createObjectStore(Xh,{keyPath:tA})}catch(r){n(r)}}),t.addEventListener("success",()=>p(this,null,function*(){let i=t.result;i.objectStoreNames.contains(Xh)?e(i):(i.close(),yield mz(),e(yield Qv()))}))})}function bS(t,e,n){return p(this,null,function*(){let i=nf(t,!0).put({[tA]:e,value:n});return new yo(i).toPromise()})}function gz(t,e){return p(this,null,function*(){let n=nf(t,!1).get(e),i=yield new yo(n).toPromise();return i===void 0?null:i.value})}function wS(t,e){let n=nf(t,!0).delete(e);return new yo(n).toPromise()}var _z=800,vz=3,yz=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield Qv(),this.db)})}_withRetries(n){return p(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield n(r)}catch(r){if(i++>vz)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return JS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=lz._getInstance(fz()),this.receiver._subscribe("keyChanged",(n,i)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(n,i)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var n,i;if(this.activeServiceWorker=yield dz(),!this.activeServiceWorker)return;this.sender=new Kv(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((n=r[0])===null||n===void 0)&&n.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||hz()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Qv();return yield bS(n,Yh,"1"),yield wS(n,Yh),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,i){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>bS(r,n,i)),this.localCache[n]=i,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let i=yield this._withRetries(r=>gz(r,n));return this.localCache[n]=i,i})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>wS(i,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(o=>{let s=nf(o,!1).getAll();return new yo(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),i.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i})}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),_z)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),nA=yz;var bee=qS("rcb"),wee=new vo(3e4,6e4);function bz(t,e){return e?ki(e):(F(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var nl=class extends el{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return kv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return kv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function wz(t){return QS(t.auth,new nl(t),t.bypassAuthState)}function Iz(t){let{auth:e,user:n}=t;return F(n,e,"internal-error"),nz(n,new nl(t),t.bypassAuthState)}function Ez(t){return p(this,null,function*(){let{auth:e,user:n}=t;return F(n,e,"internal-error"),tz(n,new nl(t),t.bypassAuthState)})}var Yv=class{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wz;case"linkViaPopup":case"linkViaRedirect":return Ez;case"reauthViaPopup":case"reauthViaRedirect":return Iz;default:ei(this.auth,"internal-error")}}resolve(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Iee=new vo(2e3,1e4);var xz="pendingRedirect",Bh=new Map,Zv=class t extends Yv{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}execute(){return p(this,null,function*(){let e=Bh.get(this.auth._key());if(!e){try{let i=(yield Cz(this.resolver,this.auth))?yield Wi(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Bh.set(this.auth._key(),e)}return this.bypassAuthState||Bh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return Wi(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Wi(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function Cz(t,e){return p(this,null,function*(){let n=Sz(e),i=Tz(t);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(n))==="true";return yield i._remove(n),r})}function Dz(t,e){Bh.set(t._key(),e)}function Tz(t){return ki(t._redirectPersistence)}function Sz(t){return Uh(xz,t.config.apiKey,t.name)}function Az(t,e,n=!1){return p(this,null,function*(){if(Cn(t.app))return Promise.reject(Oi(t));let i=bo(t),r=bz(i,e),s=yield new Zv(i,r,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield i._persistUserIfCurrent(s.user),yield i._setRedirectUser(null,e)),s})}var Rz=10*60*1e3,Xv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Mz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!iA(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(_o(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Rz&&this.cachedEventUids.clear(),this.cachedEventUids.has(IS(e))}saveEventToCache(e){this.cachedEventUids.add(IS(e)),this.lastProcessedEventTime=Date.now()}};function IS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Mz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iA(t);default:return!1}}function Nz(n){return p(this,arguments,function*(t,e={}){return Er(t,"GET","/v1/projects",e)})}var Pz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kz=/^https?/;function Oz(t){return p(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield Nz(t);for(let n of e)try{if(Fz(n))return}catch{}ei(t,"unauthorized-domain")})}function Fz(t){let e=Fv(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===i}if(!kz.test(n))return!1;if(Pz.test(t))return i===t;let r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var Lz=new vo(3e4,6e4);function ES(){let t=Jn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Vz(t){return new Promise((e,n)=>{var i,r,o;function s(){ES(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ES(),n(_o(t,"network-request-failed"))},timeout:Lz.get()})}if(!((r=(i=Jn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Jn().gapi)===null||o===void 0)&&o.load)s();else{let a=qS("iframefcb");return Jn()[a]=()=>{gapi.load?s():n(_o(t,"network-request-failed"))},zS(`${$H()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw $h=null,e})}var $h=null;function jz(t){return $h=$h||Vz(t),$h}var Uz=new vo(5e3,15e3),Bz="__/auth/iframe",$z="emulator/auth/iframe",Hz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qz(t){let e=t.config;F(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?ny(e,$z):`https://${t.config.authDomain}/${Bz}`,i={apiKey:e.apiKey,appName:t.name,v:Xn},r=zz.get(t.config.apiHost);r&&(i.eid=r);let o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${uo(i).slice(1)}`}function Wz(t){return p(this,null,function*(){let e=yield jz(t),n=Jn().gapi;return F(n,t,"internal-error"),e.open({where:document.body,url:qz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hz,dontclear:!0},i=>new Promise((r,o)=>p(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let s=_o(t,"network-request-failed"),a=Jn().setTimeout(()=>{o(s)},Uz.get());function c(){Jn().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{o(s)})})))})}var Gz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Kz=500,Qz=600,Yz="_blank",Zz="http://localhost",Jh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Xz(t,e,n,i=Kz,r=Qz){let o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},Gz),{width:i.toString(),height:r.toString(),top:o,left:s}),l=Je().toLowerCase();n&&(a=LS(l)?Yz:n),FS(l)&&(e=e||Zz,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(OH(l)&&a!=="_self")return Jz(e||"",a),new Jh(null);let d=window.open(e||"",a,u);F(d,t,"popup-blocked");try{d.focus()}catch{}return new Jh(d)}function Jz(t,e){let n=document.createElement("a");n.href=t,n.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}var e4="__/auth/handler",t4="emulator/auth/handler",n4=encodeURIComponent("fac");function xS(t,e,n,i,r,o){return p(this,null,function*(){F(t.config.authDomain,t,"auth-domain-config-required"),F(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Xn,eventId:r};if(e instanceof Qh){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",zc(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(e instanceof Wv){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${n4}=${encodeURIComponent(c)}`:"";return`${i4(t)}?${uo(a).slice(1)}${l}`})}function i4({config:t}){return t.emulator?ny(t,t4):`https://${t.authDomain}/${e4}`}var Ov="webStorageSupport",Jv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=my,this._completeRedirectFn=Az,this._overrideRedirectResult=Dz}_openPopup(e,n,i,r){return p(this,null,function*(){var o;wr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield xS(e,n,i,Fv(),r);return Xz(e,s,XS())})}_openRedirect(e,n,i,r){return p(this,null,function*(){yield this._originValidation(e);let o=yield xS(e,n,i,Fv(),r);return uz(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(wr(o,"If manager is not set, promise should be"),o)}let i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}initAndGetManager(e){return p(this,null,function*(){let n=yield Wz(e),i=new Xv(e);return n.register("authEvent",r=>(F(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ov,{type:Ov},r=>{var o;let s=(o=r?.[0])===null||o===void 0?void 0:o[Ov];s!==void 0&&n(!!s),ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Oz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $S()||sy()||ef()}},rA=Jv;var CS="@firebase/auth",DS="1.7.2";var ey=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){F(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function r4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function o4(t){Zn(new Lt("auth",(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=i.options;F(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HS(t)},l=new Hv(i,r,o,c);return qH(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Zn(new Lt("auth-internal",e=>{let n=bo(e.getProvider("auth").getImmediate());return(i=>new ey(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Re(CS,DS,r4(t)),Re(CS,DS,"esm2017")}var s4=5*60,a4=mv("authIdTokenMaxAge")||s4,TS=null,c4=t=>e=>p(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>a4)return;let r=n?.token;TS!==r&&(TS=r,yield fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function gy(t=_r()){let e=po(t,"auth");if(e.isInitialized())return e.getImmediate();let n=ay(t,{popupRedirectResolver:rA,persistence:[nA,ZS,my]}),i=mv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(i,location.origin);if(location.origin===o.origin){let s=c4(o.toString());fy(n,s,()=>s(n.currentUser)),hy(n,a=>s(a))}}let r=fv("auth");return r&&cy(n,`http://${r}`),n}function l4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}UH({loadJS(t){return new Promise((e,n)=>{let i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{let o=_o("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",l4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});o4("Browser");var oA="auth",Fi=class{constructor(e){return e}},wo=class{constructor(){return go(oA)}};var _y=new T("angularfire2.auth-instances");function J4(t,e){let n=qs(oA,t,e);return n&&new Fi(n)}function eq(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Fi(i)}}var tq={provide:wo,deps:[[new Ue,_y]]},nq={provide:Fi,useFactory:J4,deps:[[new Ue,_y],Dn]},iq=(()=>{class t{constructor(){Re("angularfire",Mi.full,"auth")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=re({type:t});static \u0275inj=ie({providers:[nq,tq]})}return t})();function sA(t,...e){return{ngModule:iq,providers:[{provide:_y,useFactory:eq(t),multi:!0,deps:[O,ht,yr,Ni,[new Ue,vr],...e]}]}}var aA=Vt(uy,!0);var cA=Vt(gy,!0);var lA=Vt(dy,!0);var uA=Vt(py,!0);var rq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sn={},E,jy=jy||{},U=rq||self;function _f(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function _l(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function oq(t){return Object.prototype.hasOwnProperty.call(t,vy)&&t[vy]||(t[vy]=++sq)}var vy="closure_uid_"+(1e9*Math.random()>>>0),sq=0;function aq(t,e,n){return t.call.apply(t.bind,arguments)}function cq(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function bt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?bt=aq:bt=cq,bt.apply(null,arguments)}function rf(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function at(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[r].apply(i,s)}}function xr(){this.s=this.s,this.o=this.o}var lq=0;xr.prototype.s=!1;xr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),lq!=0)&&oq(this)};xr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var xA=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Uy(t){let e=t.length;if(0<e){let n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function hA(t,e){for(let n=1;n<arguments.length;n++){let i=arguments[n];if(_f(i)){let r=t.length||0,o=i.length||0;t.length=r+o;for(let s=0;s<o;s++)t[r+s]=i[s]}else t.push(i)}}function wt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var uq=function(){if(!U.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};U.addEventListener("test",n,e),U.removeEventListener("test",n,e)}catch{}return t}();function ll(t){return/^[\s\xa0]*$/.test(t)}function vf(){var t=U.navigator;return t&&(t=t.userAgent)?t:""}function ti(t){return vf().indexOf(t)!=-1}function By(t){return By[" "](t),t}By[" "]=function(){};function dq(t,e){var n=Jq;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var hq=ti("Opera"),Zs=ti("Trident")||ti("MSIE"),CA=ti("Edge"),Ey=CA||Zs,DA=ti("Gecko")&&!(vf().toLowerCase().indexOf("webkit")!=-1&&!ti("Edge"))&&!(ti("Trident")||ti("MSIE"))&&!ti("Edge"),fq=vf().toLowerCase().indexOf("webkit")!=-1&&!ti("Edge");function TA(){var t=U.document;return t?t.documentMode:void 0}var xy;e:{if(of="",sf=function(){var t=vf();if(DA)return/rv:([^\);]+)(\)|;)/.exec(t);if(CA)return/Edge\/([\d\.]+)/.exec(t);if(Zs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(fq)return/WebKit\/(\S+)/.exec(t);if(hq)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),sf&&(of=sf?sf[1]:""),Zs&&(af=TA(),af!=null&&af>parseFloat(of))){xy=String(af);break e}xy=of}var of,sf,af,Cy;U.document&&Zs?(yy=TA(),Cy=yy||parseInt(xy,10)||void 0):Cy=void 0;var yy,pq=Cy;function ul(t,e){if(wt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(DA){e:{try{By(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:mq[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ul.$.h.call(this)}}at(ul,wt);var mq={2:"touch",3:"pen",4:"mouse"};ul.prototype.h=function(){ul.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var vl="closure_listenable_"+(1e6*Math.random()|0),gq=0;function _q(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++gq,this.fa=this.ia=!1}function yf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function $y(t,e,n){for(let i in t)e.call(n,t[i],i,t)}function vq(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function SA(t){let e={};for(let n in t)e[n]=t[n];return e}var fA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function AA(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let o=0;o<fA.length;o++)n=fA[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function bf(t){this.src=t,this.g={},this.h=0}bf.prototype.add=function(t,e,n,i,r){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=Ty(t,e,i,r);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new _q(e,this.src,o,!!i,r),e.ia=n,t.push(e)),e};function Dy(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=xA(i,e),o;(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(yf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Ty(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==i)return r}return-1}var Hy="closure_lm_"+(1e6*Math.random()|0),by={};function RA(t,e,n,i,r){if(i&&i.once)return NA(t,e,n,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)RA(t,e[o],n,i,r);return null}return n=Wy(n),t&&t[vl]?t.O(e,n,_l(i)?!!i.capture:!!i,r):MA(t,e,n,!1,i,r)}function MA(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var s=_l(r)?!!r.capture:!!r,a=qy(t);if(a||(t[Hy]=a=new bf(t)),n=a.add(e,n,i,s,o),n.proxy)return n;if(i=yq(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)uq||(r=s),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(kA(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function yq(){function t(n){return e.call(t.src,t.listener,n)}let e=bq;return t}function NA(t,e,n,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)NA(t,e[o],n,i,r);return null}return n=Wy(n),t&&t[vl]?t.P(e,n,_l(i)?!!i.capture:!!i,r):MA(t,e,n,!0,i,r)}function PA(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)PA(t,e[o],n,i,r);else i=_l(i)?!!i.capture:!!i,n=Wy(n),t&&t[vl]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Ty(o,n,i,r),-1<n&&(yf(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=qy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ty(e,n,i,r)),(n=-1<t?e[t]:null)&&zy(n))}function zy(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[vl])Dy(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(kA(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=qy(e))?(Dy(n,t),n.h==0&&(n.src=null,e[Hy]=null)):yf(t)}}}function kA(t){return t in by?by[t]:by[t]="on"+t}function bq(t,e){if(t.fa)t=!0;else{e=new ul(e,this);var n=t.listener,i=t.la||t.src;t.ia&&zy(t),t=n.call(i,e)}return t}function qy(t){return t=t[Hy],t instanceof bf?t:null}var wy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wy(t){return typeof t=="function"?t:(t[wy]||(t[wy]=function(e){return t.handleEvent(e)}),t[wy])}function st(){xr.call(this),this.i=new bf(this),this.S=this,this.J=null}at(st,xr);st.prototype[vl]=!0;st.prototype.removeEventListener=function(t,e,n,i){PA(this,t,e,n,i)};function pt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new wt(e,t);else if(e instanceof wt)e.target=e.target||t;else{var r=e;e=new wt(i,t),AA(e,r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];r=cf(s,i,!0,e)&&r}if(s=e.g=t,r=cf(s,i,!0,e)&&r,r=cf(s,i,!1,e)&&r,n)for(o=0;o<n.length;o++)s=e.g=n[o],r=cf(s,i,!1,e)&&r}st.prototype.N=function(){if(st.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)yf(n[i]);delete t.g[e],t.h--}}this.J=null};st.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};st.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function cf(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&Dy(t.i,s),r=a.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var Gy=U.JSON.stringify,Sy=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function wq(){var t=Ky;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ay=class{constructor(){this.h=this.g=null}add(e,n){let i=OA.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}},OA=new Sy(()=>new Ry,t=>t.reset()),Ry=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function Iq(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Eq(t){U.setTimeout(()=>{throw t},0)}var dl,hl=!1,Ky=new Ay,FA=()=>{let t=U.Promise.resolve(void 0);dl=()=>{t.then(xq)}},xq=()=>{for(var t;t=wq();){try{t.h.call(t.g)}catch(n){Eq(n)}var e=OA;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}hl=!1};function wf(t,e){st.call(this),this.h=t||1,this.g=e||U,this.j=bt(this.qb,this),this.l=Date.now()}at(wf,st);E=wf.prototype;E.ga=!1;E.T=null;E.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),pt(this,"tick"),this.ga&&(Qy(this),this.start()))}};E.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Qy(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}E.N=function(){wf.$.N.call(this),Qy(this),delete this.g};function Yy(t,e,n){if(typeof t=="function")n&&(t=bt(t,n));else if(t&&typeof t.handleEvent=="function")t=bt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:U.setTimeout(t,e||0)}function LA(t){t.g=Yy(()=>{t.g=null,t.i&&(t.i=!1,LA(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var My=class extends xr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:LA(this)}N(){super.N(),this.g&&(U.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function fl(t){xr.call(this),this.h=t,this.g={}}at(fl,xr);var pA=[];function VA(t,e,n,i){Array.isArray(n)||(n&&(pA[0]=n.toString()),n=pA);for(var r=0;r<n.length;r++){var o=RA(e,n[r],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function jA(t){$y(t.g,function(e,n){this.g.hasOwnProperty(n)&&zy(e)},t),t.g={}}fl.prototype.N=function(){fl.$.N.call(this),jA(this)};fl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function If(){this.g=!0}If.prototype.Ea=function(){this.g=!1};function Cq(t,e,n,i,r,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");s=2<=d.length&&d[1]=="type"?s+(u+"="+l+"&"):s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+s})}function Dq(t,e,n,i,r,o,s){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+o+" "+s})}function Qs(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Sq(t,n)+(i?" "+i:"")})}function Tq(t,e){t.info(function(){return"TIMEOUT: "+e})}If.prototype.info=function(){};function Sq(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<r.length;s++)r[s]=""}}}}return Gy(n)}catch{return e}}var Co={},mA=null;function Ef(){return mA=mA||new st}Co.Ta="serverreachability";function UA(t){wt.call(this,Co.Ta,t)}at(UA,wt);function pl(t){let e=Ef();pt(e,new UA(e))}Co.STAT_EVENT="statevent";function BA(t,e){wt.call(this,Co.STAT_EVENT,t),this.stat=e}at(BA,wt);function Mt(t){let e=Ef();pt(e,new BA(e,t))}Co.Ua="timingevent";function $A(t,e){wt.call(this,Co.Ua,t),this.size=e}at($A,wt);function yl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return U.setTimeout(function(){t()},e)}var xf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},HA={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zy(){}Zy.prototype.h=null;function gA(t){return t.h||(t.h=t.i())}function zA(){}var bl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Xy(){wt.call(this,"d")}at(Xy,wt);function Jy(){wt.call(this,"c")}at(Jy,wt);var Ny;function Cf(){}at(Cf,Zy);Cf.prototype.g=function(){return new XMLHttpRequest};Cf.prototype.i=function(){return{}};Ny=new Cf;function wl(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new fl(this),this.P=Aq,t=Ey?125:void 0,this.V=new wf(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new qA}function qA(){this.i=null,this.g="",this.h=!1}var Aq=45e3,WA={},Py={};E=wl.prototype;E.setTimeout=function(t){this.P=t};function ky(t,e,n){t.L=1,t.A=Tf(Vi(e)),t.u=n,t.S=!0,GA(t,null)}function GA(t,e){t.G=Date.now(),Il(t),t.B=Vi(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),tR(n.i,"t",i),t.o=0,n=t.l.J,t.h=new qA,t.g=IR(t.l,n?e:null,!t.u),0<t.O&&(t.M=new My(bt(t.Pa,t,t.g),t.O)),VA(t.U,t.g,"readystatechange",t.nb),e=t.I?SA(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),pl(),Cq(t.j,t.v,t.B,t.m,t.W,t.u)}E.nb=function(t){t=t.target;let e=this.M;e&&ni(t)==3?e.l():this.Pa(t)};E.Pa=function(t){try{if(t==this.g)e:{let u=ni(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||Ey||this.g&&(this.h.h||this.g.ja()||bA(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?pl(3):pl(2)),Df(this);var n=this.g.da();this.ca=n;t:if(KA(this)){var i=bA(this.g);t="";var r=i.length,o=ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Io(this),cl(this);var s="";break t}this.h.i=new U.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,Dq(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ll(a)){var l=a;break t}}l=null}if(n=l)Qs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oy(this,n);else{this.i=!1,this.s=3,Mt(12),Io(this),cl(this);break e}}this.S?(QA(this,u,s),Ey&&this.i&&u==3&&(VA(this.U,this.V,"tick",this.mb),this.V.start())):(Qs(this.j,this.m,s,null),Oy(this,s)),u==4&&Io(this),this.i&&!this.J&&(u==4?vR(this.l,this):(this.i=!1,Il(this)))}else Yq(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Io(this),cl(this)}}}catch{}finally{}};function KA(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function QA(t,e,n){let i=!0,r;for(;!t.J&&t.o<n.length;)if(r=Rq(t,n),r==Py){e==4&&(t.s=4,Mt(14),i=!1),Qs(t.j,t.m,null,"[Incomplete Response]");break}else if(r==WA){t.s=4,Mt(15),Qs(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Qs(t.j,t.m,r,null),Oy(t,r);KA(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Mt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ob(e),e.M=!0,Mt(11))):(Qs(t.j,t.m,n,"[Invalid Chunked Response]"),Io(t),cl(t))}E.mb=function(){if(this.g){var t=ni(this.g),e=this.g.ja();this.o<e.length&&(Df(this),QA(this,t,e),this.i&&t!=4&&Il(this))}};function Rq(t,e){var n=t.o,i=e.indexOf(`
`,n);return i==-1?Py:(n=Number(e.substring(n,i)),isNaN(n)?WA:(i+=1,i+n>e.length?Py:(e=e.slice(i,i+n),t.o=i+n,e)))}E.cancel=function(){this.J=!0,Io(this)};function Il(t){t.Y=Date.now()+t.P,YA(t,t.P)}function YA(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=yl(bt(t.lb,t),e)}function Df(t){t.C&&(U.clearTimeout(t.C),t.C=null)}E.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(Tq(this.j,this.B),this.L!=2&&(pl(),Mt(17)),Io(this),this.s=2,cl(this)):YA(this,this.Y-t)};function cl(t){t.l.H==0||t.J||vR(t.l,t)}function Io(t){Df(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Qy(t.V),jA(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Oy(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Fy(n.i,t))){if(!t.K&&Fy(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)ff(n),Rf(n);else break e;rb(n),Mt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=yl(bt(n.ib,n),6e3));if(1>=rR(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Eo(n,11)}else if((t.K||n.g==t)&&ff(n),!ll(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;let f=t.g;if(f){let m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var o=i.i;o.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(eb(o,o.h),o.h=null))}if(i.F){let g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.Da=g,Te(i.I,i.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var s=t;if(i.wa=wR(i,i.J?i.pa:null,i.Y),s.K){oR(i.i,s);var a=s,c=i.L;c&&a.setTimeout(c),a.C&&(Df(a),Il(a)),i.g=s}else gR(i);0<n.j.length&&Mf(n)}else l[0]!="stop"&&l[0]!="close"||Eo(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Eo(n,7):ib(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}pl(4)}catch{}}function Mq(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(_f(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function Nq(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(_f(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let i in t)e[n++]=i;return e}}}function ZA(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(_f(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Nq(t),i=Mq(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}var XA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pq(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function xo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof xo){this.h=t.h,df(this,t.j),this.s=t.s,this.g=t.g,hf(this,t.m),this.l=t.l;var e=t.i,n=new ml;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),_A(this,n),this.o=t.o}else t&&(e=String(t).match(XA))?(this.h=!1,df(this,e[1]||"",!0),this.s=sl(e[2]||""),this.g=sl(e[3]||"",!0),hf(this,e[4]),this.l=sl(e[5]||"",!0),_A(this,e[6]||"",!0),this.o=sl(e[7]||"")):(this.h=!1,this.i=new ml(null,this.h))}xo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(al(e,vA,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(al(e,vA,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(al(n,n.charAt(0)=="/"?Fq:Oq,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",al(n,Vq)),t.join("")};function Vi(t){return new xo(t)}function df(t,e,n){t.j=n?sl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function hf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function _A(t,e,n){e instanceof ml?(t.i=e,jq(t.i,t.h)):(n||(e=al(e,Lq)),t.i=new ml(e,t.h))}function Te(t,e,n){t.i.set(e,n)}function Tf(t){return Te(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function sl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function al(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,kq),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function kq(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var vA=/[#\/\?@]/g,Oq=/[#\?:]/g,Fq=/[#\?]/g,Lq=/[#\?@]/g,Vq=/#/g;function ml(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Cr(t){t.g||(t.g=new Map,t.h=0,t.i&&Pq(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}E=ml.prototype;E.add=function(t,e){Cr(this),this.i=null,t=Xs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function JA(t,e){Cr(t),e=Xs(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function eR(t,e){return Cr(t),e=Xs(t,e),t.g.has(e)}E.forEach=function(t,e){Cr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};E.ta=function(){Cr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){let r=t[i];for(let o=0;o<r.length;o++)n.push(e[i])}return n};E.Z=function(t){Cr(this);let e=[];if(typeof t=="string")eR(this,t)&&(e=e.concat(this.g.get(Xs(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};E.set=function(t,e){return Cr(this),this.i=null,t=Xs(this,t),eR(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};E.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function tR(t,e,n){JA(t,e),0<n.length&&(t.i=null,t.g.set(Xs(t,e),Uy(n)),t.h+=n.length)}E.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];let o=encodeURIComponent(String(i)),s=this.Z(i);for(i=0;i<s.length;i++){var r=o;s[i]!==""&&(r+="="+encodeURIComponent(String(s[i]))),t.push(r)}}return this.i=t.join("&")};function Xs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function jq(t,e){e&&!t.j&&(Cr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(JA(this,i),tR(this,r,n))},t)),t.j=e}var Uq=class{constructor(t,e){this.g=t,this.map=e}};function nR(t){this.l=t||Bq,U.PerformanceNavigationTiming?(t=U.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(U.g&&U.g.Ka&&U.g.Ka()&&U.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Bq=10;function iR(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function rR(t){return t.h?1:t.g?t.g.size:0}function Fy(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function eb(t,e){t.g?t.g.add(e):t.h=e}function oR(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}nR.prototype.cancel=function(){if(this.i=sR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function sR(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Uy(t.i)}var $q=class{stringify(t){return U.JSON.stringify(t,void 0)}parse(t){return U.JSON.parse(t,void 0)}};function Hq(){this.g=new $q}function zq(t,e,n){let i=n||"";try{ZA(t,function(r,o){let s=r;_l(r)&&(s=Gy(r)),e.push(i+o+"="+encodeURIComponent(s))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function qq(t,e){let n=new If;if(U.Image){let i=new Image;i.onload=rf(lf,n,i,"TestLoadImage: loaded",!0,e),i.onerror=rf(lf,n,i,"TestLoadImage: error",!1,e),i.onabort=rf(lf,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=rf(lf,n,i,"TestLoadImage: timeout",!1,e),U.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function lf(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function El(t){this.l=t.ec||null,this.j=t.ob||!1}at(El,Zy);El.prototype.g=function(){return new Sf(this.l,this.j)};El.prototype.i=function(t){return function(){return t}}({});function Sf(t,e){st.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=tb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}at(Sf,st);var tb=0;E=Sf.prototype;E.open=function(t,e){if(this.readyState!=tb)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,gl(this)};E.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||U).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};E.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xl(this)),this.readyState=tb};E.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,gl(this)),this.g&&(this.readyState=3,gl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof U.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;aR(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function aR(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}E.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?xl(this):gl(this),this.readyState==3&&aR(this)}};E.Za=function(t){this.g&&(this.response=this.responseText=t,xl(this))};E.Ya=function(t){this.g&&(this.response=t,xl(this))};E.ka=function(){this.g&&xl(this)};function xl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,gl(t)}E.setRequestHeader=function(t,e){this.v.append(t,e)};E.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};E.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function gl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Sf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Wq=U.JSON.parse;function Oe(t){st.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=cR,this.L=this.M=!1}at(Oe,st);var cR="",Gq=/^https?$/i,Kq=["POST","PUT"];E=Oe.prototype;E.Oa=function(t){this.M=t};E.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ny.g(),this.C=this.u?gA(this.u):gA(Ny),this.g.onreadystatechange=bt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){yA(this,o);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let o of i.keys())n.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),r=U.FormData&&t instanceof U.FormData,!(0<=xA(Kq,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{dR(this),0<this.B&&((this.L=Qq(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bt(this.ua,this)):this.A=Yy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){yA(this,o)}};function Qq(t){return Zs&&typeof t.timeout=="number"&&t.ontimeout!==void 0}E.ua=function(){typeof jy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pt(this,"timeout"),this.abort(8))};function yA(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,lR(t),Af(t)}function lR(t){t.F||(t.F=!0,pt(t,"complete"),pt(t,"error"))}E.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,pt(this,"complete"),pt(this,"abort"),Af(this))};E.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Af(this,!0)),Oe.$.N.call(this)};E.La=function(){this.s||(this.G||this.v||this.l?uR(this):this.kb())};E.kb=function(){uR(this)};function uR(t){if(t.h&&typeof jy<"u"&&(!t.C[1]||ni(t)!=4||t.da()!=2)){if(t.v&&ni(t)==4)Yy(t.La,0,t);else if(pt(t,"readystatechange"),ni(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=s===0){var r=String(t.I).match(XA)[1]||null;!r&&U.self&&U.self.location&&(r=U.self.location.protocol.slice(0,-1)),i=!Gq.test(r?r.toLowerCase():"")}n=i}if(n)pt(t,"complete"),pt(t,"success");else{t.m=6;try{var o=2<ni(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",lR(t)}}finally{Af(t)}}}}function Af(t,e){if(t.g){dR(t);let n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||pt(t,"ready");try{n.onreadystatechange=i}catch{}}}function dR(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(U.clearTimeout(t.A),t.A=null)}E.isActive=function(){return!!this.g};function ni(t){return t.g?t.g.readyState:0}E.da=function(){try{return 2<ni(this)?this.g.status:-1}catch{return-1}};E.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};E.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Wq(e)}};function bA(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case cR:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Yq(t){let e={};t=(t.g&&2<=ni(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(ll(t[i]))continue;var n=Iq(t[i]);let r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[r]||[];e[r]=o,o.push(n)}vq(e,function(i){return i.join(", ")})}E.Ia=function(){return this.m};E.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function hR(t){let e="";return $y(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function nb(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=hR(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Te(t,e,n))}function rl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function fR(t){this.Ga=0,this.j=[],this.l=new If,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=rl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=rl("baseRetryDelayMs",5e3,t),this.hb=rl("retryDelaySeedMs",1e4,t),this.eb=rl("forwardChannelMaxRetries",2,t),this.xa=rl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new nR(t&&t.concurrentRequestLimit),this.Ja=new Hq,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}E=fR.prototype;E.ra=8;E.H=1;function ib(t){if(pR(t),t.H==3){var e=t.W++,n=Vi(t.I);if(Te(n,"SID",t.K),Te(n,"RID",e),Te(n,"TYPE","terminate"),Cl(t,n),e=new wl(t,t.l,e),e.L=2,e.A=Tf(Vi(n)),n=!1,U.navigator&&U.navigator.sendBeacon)try{n=U.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&U.Image&&(new Image().src=e.A,n=!0),n||(e.g=IR(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Il(e)}bR(t)}function Rf(t){t.g&&(ob(t),t.g.cancel(),t.g=null)}function pR(t){Rf(t),t.u&&(U.clearTimeout(t.u),t.u=null),ff(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&U.clearTimeout(t.m),t.m=null)}function Mf(t){if(!iR(t.i)&&!t.m){t.m=!0;var e=t.Na;dl||FA(),hl||(dl(),hl=!0),Ky.add(e,t),t.C=0}}function Zq(t,e){return rR(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=yl(bt(t.Na,t,e),yR(t,t.C)),t.C++,!0)}E.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let r=new wl(this,this.l,t),o=this.s;if(this.U&&(o?(o=SA(o),AA(o,this.U)):o=this.U),this.o!==null||this.O||(r.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=mR(this,r,e),n=Vi(this.I),Te(n,"RID",t),Te(n,"CVER",22),this.F&&Te(n,"X-HTTP-Session-Id",this.F),Cl(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(hR(o)))+"&"+e:this.o&&nb(n,this.o,o)),eb(this.i,r),this.bb&&Te(n,"TYPE","init"),this.P?(Te(n,"$req",e),Te(n,"SID","null"),r.aa=!0,ky(r,n,null)):ky(r,n,e),this.H=2}}else this.H==3&&(t?wA(this,t):this.j.length==0||iR(this.i)||wA(this))};function wA(t,e){var n;e?n=e.m:n=t.W++;let i=Vi(t.I);Te(i,"SID",t.K),Te(i,"RID",n),Te(i,"AID",t.V),Cl(t,i),t.o&&t.s&&nb(i,t.o,t.s),n=new wl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=mR(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),eb(t.i,n),ky(n,i,e)}function Cl(t,e){t.na&&$y(t.na,function(n,i){Te(e,i,n)}),t.h&&ZA({},function(n,i){Te(e,i,n)})}function mR(t,e,n){n=Math.min(t.j.length,n);var i=t.h?bt(t.h.Va,t.h,t):null;e:{var r=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=r[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let l=r[c].g,u=r[c].map;if(l-=o,0>l)o=Math.max(0,r[c].g-100),a=!1;else try{zq(u,s,"req"+l+"_")}catch{i&&i(u)}}if(a){i=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function gR(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;dl||FA(),hl||(dl(),hl=!0),Ky.add(e,t),t.A=0}}function rb(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=yl(bt(t.Ma,t),yR(t,t.A)),t.A++,!0)}E.Ma=function(){if(this.u=null,_R(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=yl(bt(this.jb,this),t)}};E.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Mt(10),Rf(this),_R(this))};function ob(t){t.B!=null&&(U.clearTimeout(t.B),t.B=null)}function _R(t){t.g=new wl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Vi(t.wa);Te(e,"RID","rpc"),Te(e,"SID",t.K),Te(e,"AID",t.V),Te(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Te(e,"TO",t.qa),Te(e,"TYPE","xmlhttp"),Cl(t,e),t.o&&t.s&&nb(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Tf(Vi(e)),n.u=null,n.S=!0,GA(n,t)}E.ib=function(){this.v!=null&&(this.v=null,Rf(this),rb(this),Mt(19))};function ff(t){t.v!=null&&(U.clearTimeout(t.v),t.v=null)}function vR(t,e){var n=null;if(t.g==e){ff(t),ob(t),t.g=null;var i=2}else if(Fy(t.i,e))n=e.F,oR(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;i=Ef(),pt(i,new $A(i,n)),Mf(t)}else gR(t);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&Zq(t,e)||i==2&&rb(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Eo(t,5);break;case 4:Eo(t,10);break;case 3:Eo(t,6);break;default:Eo(t,2)}}}function yR(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Eo(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=bt(t.pb,t);n||(n=new xo("//www.google.com/images/cleardot.gif"),U.location&&U.location.protocol=="http"||df(n,"https"),Tf(n)),qq(n.toString(),i)}else Mt(2);t.H=0,t.h&&t.h.za(e),bR(t),pR(t)}E.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Mt(2)):(this.l.info("Failed to ping google.com"),Mt(1))};function bR(t){if(t.H=0,t.ma=[],t.h){let e=sR(t.i);(e.length!=0||t.j.length!=0)&&(hA(t.ma,e),hA(t.ma,t.j),t.i.i.length=0,Uy(t.j),t.j.length=0),t.h.ya()}}function wR(t,e,n){var i=n instanceof xo?Vi(n):new xo(n);if(i.g!="")e&&(i.g=e+"."+i.g),hf(i,i.m);else{var r=U.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new xo(null);i&&df(o,i),e&&(o.g=e),r&&hf(o,r),n&&(o.l=n),i=o}return n=t.F,e=t.Da,n&&e&&Te(i,n,e),Te(i,"VER",t.ra),Cl(t,i),i}function IR(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Oe(new El({ob:n})):new Oe(t.va),e.Oa(t.J),e}E.isActive=function(){return!!this.h&&this.h.isActive(this)};function ER(){}E=ER.prototype;E.Ba=function(){};E.Aa=function(){};E.za=function(){};E.ya=function(){};E.isActive=function(){return!0};E.Va=function(){};function pf(){if(Zs&&!(10<=Number(pq)))throw Error("Environmental error: no available transport.")}pf.prototype.g=function(t,e){return new Yt(t,e)};function Yt(t,e){st.call(this),this.g=new fR(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ll(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ll(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Js(this)}at(Yt,st);Yt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Mt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=wR(t,null,t.Y),Mf(t)};Yt.prototype.close=function(){ib(this.g)};Yt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Gy(t),t=n);e.j.push(new Uq(e.fb++,t)),e.H==3&&Mf(e)};Yt.prototype.N=function(){this.g.h=null,delete this.j,ib(this.g),delete this.g,Yt.$.N.call(this)};function xR(t){Xy.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}at(xR,Xy);function CR(){Jy.call(this),this.status=1}at(CR,Jy);function Js(t){this.g=t}at(Js,ER);Js.prototype.Ba=function(){pt(this.g,"a")};Js.prototype.Aa=function(t){pt(this.g,new xR(t))};Js.prototype.za=function(t){pt(this.g,new CR)};Js.prototype.ya=function(){pt(this.g,"b")};function Xq(){this.blockSize=-1}function Tn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}at(Tn,Xq);Tn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Iy(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var o=t.g[3],s=e+(o^n&(r^o))+i[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(r^e&(n^r))+i[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[2]+606105819&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(e^r&(o^e))+i[3]+3250441966&4294967295,n=r+(s<<22&4294967295|s>>>10),s=e+(o^n&(r^o))+i[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(r^e&(n^r))+i[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[6]+2821735955&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(e^r&(o^e))+i[7]+4249261313&4294967295,n=r+(s<<22&4294967295|s>>>10),s=e+(o^n&(r^o))+i[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(r^e&(n^r))+i[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[10]+4294925233&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(e^r&(o^e))+i[11]+2304563134&4294967295,n=r+(s<<22&4294967295|s>>>10),s=e+(o^n&(r^o))+i[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(r^e&(n^r))+i[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[14]+2792965006&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(e^r&(o^e))+i[15]+1236535329&4294967295,n=r+(s<<22&4294967295|s>>>10),s=e+(r^o&(n^r))+i[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(e^n))+i[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[11]+643717713&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(r^o))+i[0]+3921069994&4294967295,n=r+(s<<20&4294967295|s>>>12),s=e+(r^o&(n^r))+i[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(e^n))+i[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[15]+3634488961&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(r^o))+i[4]+3889429448&4294967295,n=r+(s<<20&4294967295|s>>>12),s=e+(r^o&(n^r))+i[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(e^n))+i[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[3]+4107603335&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(r^o))+i[8]+1163531501&4294967295,n=r+(s<<20&4294967295|s>>>12),s=e+(r^o&(n^r))+i[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(e^n))+i[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[7]+1735328473&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(r^o))+i[12]+2368359562&4294967295,n=r+(s<<20&4294967295|s>>>12),s=e+(n^r^o)+i[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^r)+i[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[11]+1839030562&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^e)+i[14]+4259657740&4294967295,n=r+(s<<23&4294967295|s>>>9),s=e+(n^r^o)+i[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^r)+i[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[7]+4139469664&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^e)+i[10]+3200236656&4294967295,n=r+(s<<23&4294967295|s>>>9),s=e+(n^r^o)+i[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^r)+i[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[3]+3572445317&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^e)+i[6]+76029189&4294967295,n=r+(s<<23&4294967295|s>>>9),s=e+(n^r^o)+i[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^r)+i[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[15]+530742520&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^e)+i[2]+3299628645&4294967295,n=r+(s<<23&4294967295|s>>>9),s=e+(r^(n|~o))+i[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~r))+i[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[14]+2878612391&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~e))+i[5]+4237533241&4294967295,n=r+(s<<21&4294967295|s>>>11),s=e+(r^(n|~o))+i[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~r))+i[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[10]+4293915773&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~e))+i[1]+2240044497&4294967295,n=r+(s<<21&4294967295|s>>>11),s=e+(r^(n|~o))+i[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~r))+i[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[6]+2734768916&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~e))+i[13]+1309151649&4294967295,n=r+(s<<21&4294967295|s>>>11),s=e+(r^(n|~o))+i[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~r))+i[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[2]+718787259&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+o&4294967295}Tn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,o=0;o<e;){if(r==0)for(;o<=n;)Iy(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(i[r++]=t.charCodeAt(o++),r==this.blockSize){Iy(this,i),r=0;break}}else for(;o<e;)if(i[r++]=t[o++],r==this.blockSize){Iy(this,i),r=0;break}}this.h=r,this.i+=e};Tn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function ve(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var o=t[r]|0;i&&o==e||(n[r]=o,i=!1)}this.g=n}var Jq={};function sb(t){return-128<=t&&128>t?dq(t,function(e){return new ve([e|0],0>e?-1:0)}):new ve([t|0],0>t?-1:0)}function ii(t){if(isNaN(t)||!isFinite(t))return Ys;if(0>t)return ft(ii(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Ly;return new ve(e,0)}function DR(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ft(DR(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ii(Math.pow(e,8)),i=Ys,r=0;r<t.length;r+=8){var o=Math.min(8,t.length-r),s=parseInt(t.substring(r,r+o),e);8>o?(o=ii(Math.pow(e,o)),i=i.R(o).add(ii(s))):(i=i.R(n),i=i.add(ii(s)))}return i}var Ly=4294967296,Ys=sb(0),Vy=sb(1),IA=sb(16777216);E=ve.prototype;E.ea=function(){if(un(this))return-ft(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Ly+i)*e,e*=Ly}return t};E.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Li(this))return"0";if(un(this))return"-"+ft(this).toString(t);for(var e=ii(Math.pow(t,6)),n=this,i="";;){var r=gf(n,e).g;n=mf(n,r.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Li(n))return o+i;for(;6>o.length;)o="0"+o;i=o+i}};E.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Li(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function un(t){return t.h==-1}E.X=function(t){return t=mf(this,t),un(t)?-1:Li(t)?0:1};function ft(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new ve(n,~t.h).add(Vy)}E.abs=function(){return un(this)?ft(this):this};E.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var o=i+(this.D(r)&65535)+(t.D(r)&65535),s=(o>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=s>>>16,o&=65535,s&=65535,n[r]=s<<16|o}return new ve(n,n[n.length-1]&-2147483648?-1:0)};function mf(t,e){return t.add(ft(e))}E.R=function(t){if(Li(this)||Li(t))return Ys;if(un(this))return un(t)?ft(this).R(ft(t)):ft(ft(this).R(t));if(un(t))return ft(this.R(ft(t)));if(0>this.X(IA)&&0>t.X(IA))return ii(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var o=this.D(i)>>>16,s=this.D(i)&65535,a=t.D(r)>>>16,c=t.D(r)&65535;n[2*i+2*r]+=s*c,uf(n,2*i+2*r),n[2*i+2*r+1]+=o*c,uf(n,2*i+2*r+1),n[2*i+2*r+1]+=s*a,uf(n,2*i+2*r+1),n[2*i+2*r+2]+=o*a,uf(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new ve(n,0)};function uf(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ol(t,e){this.g=t,this.h=e}function gf(t,e){if(Li(e))throw Error("division by zero");if(Li(t))return new ol(Ys,Ys);if(un(t))return e=gf(ft(t),e),new ol(ft(e.g),ft(e.h));if(un(e))return e=gf(t,ft(e)),new ol(ft(e.g),e.h);if(30<t.g.length){if(un(t)||un(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Vy,i=e;0>=i.X(t);)n=EA(n),i=EA(i);var r=Ks(n,1),o=Ks(i,1);for(i=Ks(i,2),n=Ks(n,2);!Li(i);){var s=o.add(i);0>=s.X(t)&&(r=r.add(n),o=s),i=Ks(i,1),n=Ks(n,1)}return e=mf(t,r.R(e)),new ol(r,e)}for(r=Ys;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),o=ii(n),s=o.R(e);un(s)||0<s.X(t);)n-=i,o=ii(n),s=o.R(e);Li(o)&&(o=Vy),r=r.add(o),t=mf(t,s)}return new ol(r,t)}E.gb=function(t){return gf(this,t).h};E.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new ve(n,this.h&t.h)};E.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new ve(n,this.h|t.h)};E.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new ve(n,this.h^t.h)};function EA(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new ve(n,t.h)}function Ks(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],o=0;o<i;o++)r[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new ve(r,t.h)}pf.prototype.createWebChannel=pf.prototype.g;Yt.prototype.send=Yt.prototype.u;Yt.prototype.open=Yt.prototype.m;Yt.prototype.close=Yt.prototype.close;xf.NO_ERROR=0;xf.TIMEOUT=8;xf.HTTP_ERROR=6;HA.COMPLETE="complete";zA.EventType=bl;bl.OPEN="a";bl.CLOSE="b";bl.ERROR="c";bl.MESSAGE="d";st.prototype.listen=st.prototype.O;Oe.prototype.listenOnce=Oe.prototype.P;Oe.prototype.getLastError=Oe.prototype.Sa;Oe.prototype.getLastErrorCode=Oe.prototype.Ia;Oe.prototype.getStatus=Oe.prototype.da;Oe.prototype.getResponseJson=Oe.prototype.Wa;Oe.prototype.getResponseText=Oe.prototype.ja;Oe.prototype.send=Oe.prototype.ha;Oe.prototype.setWithCredentials=Oe.prototype.Oa;Tn.prototype.digest=Tn.prototype.l;Tn.prototype.reset=Tn.prototype.reset;Tn.prototype.update=Tn.prototype.j;ve.prototype.add=ve.prototype.add;ve.prototype.multiply=ve.prototype.R;ve.prototype.modulo=ve.prototype.gb;ve.prototype.compare=ve.prototype.X;ve.prototype.toNumber=ve.prototype.ea;ve.prototype.toString=ve.prototype.toString;ve.prototype.getBits=ve.prototype.D;ve.fromNumber=ii;ve.fromString=DR;var TR=Sn.createWebChannelTransport=function(){return new pf},SR=Sn.getStatEventTarget=function(){return Ef()},Nf=Sn.ErrorCode=xf,AR=Sn.EventType=HA,RR=Sn.Event=Co,ab=Sn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},MR=Sn.FetchXmlHttpFactory=El,Dl=Sn.WebChannel=zA,NR=Sn.XhrIo=Oe,PR=Sn.Md5=Tn,Do=Sn.Integer=ve;var kR="@firebase/firestore";var ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");var ba="10.11.1";var Mo=new Qn("@firebase/firestore");function Tl(){return Mo.logLevel}function S(t,...e){if(Mo.logLevel<=J.DEBUG){let n=e.map(Hw);Mo.debug(`Firestore (${ba}): ${t}`,...n)}}function Ui(t,...e){if(Mo.logLevel<=J.ERROR){let n=e.map(Hw);Mo.error(`Firestore (${ba}): ${t}`,...n)}}function sa(t,...e){if(Mo.logLevel<=J.WARN){let n=e.map(Hw);Mo.warn(`Firestore (${ba}): ${t}`,...n)}}function Hw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function L(t="Unexpected state"){let e=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: `+t;throw Ui(e),new Error(e)}function Ce(t,e){t||L()}function H(t,e){return t}var v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},A=class extends Qt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ji=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Lf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},hb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}},fb=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},pb=class{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),o=new ji;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ji,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{S("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(S("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ji)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(S("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ce(typeof i.accessToken=="string"),new Lf(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new ct(e)}},mb=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},gb=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new mb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}},_b=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},vb=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&S("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,S("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{S("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):S("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new _b(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function e5(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Vf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=e5(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function he(t,e){return t<e?-1:t>e?1:0}function aa(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}var mt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new A(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new A(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new A(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new A(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var q=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new mt(0,0))}static max(){return new t(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var jf=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&L(),i===void 0?i=e.length-n:i>e.length-n&&L(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),s=n.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Le=class t extends jf{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new A(v.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},t5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zt=class t extends jf{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return t5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new A(v.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},s=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new A(v.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new A(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new A(v.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var N=class t{constructor(e){this.path=e}static fromPath(e){return new t(Le.fromString(e))}static fromName(e){return new t(Le.fromString(e).popFirst(5))}static empty(){return new t(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Le(e.slice()))}};var yb=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};yb.UNKNOWN_ID=-1;function n5(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=q.fromTimestamp(i===1e9?new mt(n+1,0):new mt(n,i));return new No(r,N.empty(),e)}function i5(t){return new No(t.readTime,t.key,-1)}var No=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(q.min(),N.empty(),-1)}static max(){return new t(q.max(),N.empty(),-1)}};function r5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=N.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}var o5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bb=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zl(t){return p(this,null,function*(){if(t.code!==v.FAILED_PRECONDITION||t.message!==o5)throw t;S("LocalStore","Unexpectedly lost primary lease")})}var b=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&L(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&n()},c=>i(c))}),s=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;n(e[l]).next(u=>{s[l]=u,++a,a===o&&i(s)},u=>r(u))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};function s5(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ql(t){return t.name==="IndexedDbTransactionError"}var uM=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function pp(t){return t==null}function kl(t){return t===0&&1/t==-1/0}function a5(t){return typeof t=="number"&&Number.isInteger(t)&&!kl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var c5=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mte=[...c5,"documentOverlays"],l5=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],u5=l5,gte=[...u5,"indexConfiguration","indexState","indexEntries"];function OR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wa(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ve=class t{constructor(e,n){this.comparator=e,this.root=n||si.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,si.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,si.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ia(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ia(this.root,e,this.comparator,!1)}getReverseIterator(){return new ia(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ia(this.root,e,this.comparator,!0)}},ia=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},si=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw L();let e=this.left.check();if(e!==this.right.check())throw L();return e+(this.isRed()?0:1)}};si.EMPTY=null,si.RED=!0,si.BLACK=!1;si.EMPTY=new class{constructor(){this.size=0}get key(){throw L()}get value(){throw L()}get color(){throw L()}get left(){throw L()}get right(){throw L()}copy(e,n,i,r,o){return this}insert(e,n,i){return new si(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Et=class t{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Uf(this.data.getIterator())}getIteratorFrom(e){return new Uf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Uf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var oi=class t{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Et(Zt.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var Bf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Nt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Bf("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Nt.EMPTY_BYTE_STRING=new Nt("");var d5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bi(t){if(Ce(!!t),typeof t=="string"){let e=0,n=d5.exec(t);if(Ce(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Tr(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}function zw(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function qw(t){let e=t.mapValue.fields.__previous_value__;return zw(e)?qw(e):e}function Ol(t){let e=Bi(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}var wb=class{constructor(e,n,i,r,o,s,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},$f=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Pf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Po(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zw(t)?4:hM(t)?9007199254740991:10:L()}function li(t,e){if(t===e)return!0;let n=Po(t);if(n!==Po(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ol(t).isEqual(Ol(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Bi(r.timestampValue),a=Bi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Tr(r.bytesValue).isEqual(Tr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Fe(r.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(r.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Fe(r.integerValue)===Fe(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=Fe(r.doubleValue),a=Fe(o.doubleValue);return s===a?kl(s)===kl(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return aa(t.arrayValue.values||[],e.arrayValue.values||[],li);case 10:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(OR(s)!==OR(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!li(s[c],a[c])))return!1;return!0}(t,e);default:return L()}}function Fl(t,e){return(t.values||[]).find(n=>li(n,e))!==void 0}function ca(t,e){if(t===e)return 0;let n=Po(t),i=Po(e);if(n!==i)return he(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Fe(o.integerValue||o.doubleValue),c=Fe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return FR(t.timestampValue,e.timestampValue);case 4:return FR(Ol(t),Ol(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Tr(o),c=Tr(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=he(a[l],c[l]);if(u!==0)return u}return he(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=he(Fe(o.latitude),Fe(s.latitude));return a!==0?a:he(Fe(o.longitude),Fe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=ca(a[l],c[l]);if(u)return u}return he(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Pf.mapValue&&s===Pf.mapValue)return 0;if(o===Pf.mapValue)return 1;if(s===Pf.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=he(c[d],u[d]);if(h!==0)return h;let f=ca(a[c[d]],l[u[d]]);if(f!==0)return f}return he(c.length,u.length)}(t.mapValue,e.mapValue);default:throw L()}}function FR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);let n=Bi(t),i=Bi(e),r=he(n.seconds,i.seconds);return r!==0?r:he(n.nanos,i.nanos)}function la(t){return Ib(t)}function Ib(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Bi(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Tr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return N.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=Ib(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${Ib(n.fields[s])}`;return r+"}"}(t.mapValue):L()}function Eb(t){return!!t&&"integerValue"in t}function Ww(t){return!!t&&"arrayValue"in t}function LR(t){return!!t&&"nullValue"in t}function VR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Of(t){return!!t&&"mapValue"in t}function Al(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return wa(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Al(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Al(t.arrayValue.values[n]);return e}return Object.assign({},t)}function hM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var An=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Of(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Al(n)}setAll(e){let n=Zt.emptyPath(),i={},r=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}s?i[a.lastSegment()]=Al(s):r.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());Of(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return li(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Of(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){wa(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t(Al(this.value))}};function fM(t){let e=[];return wa(t.fields,(n,i)=>{let r=new Zt([n]);if(Of(i)){let o=fM(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new oi(e)}var Rn=class t{constructor(e,n,i,r,o,s,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,q.min(),q.min(),q.min(),An.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,q.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,q.min(),q.min(),An.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,q.min(),q.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ua=class{constructor(e,n){this.position=e,this.inclusive=n}};function jR(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],s=t.position[r];if(o.field.isKeyField()?i=N.comparator(N.fromName(s.referenceValue),n.key):i=ca(s,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function UR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!li(t.position[n],e.position[n]))return!1;return!0}var da=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function h5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Hf=class{},tt=class t extends Hf{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Cb(e,n,i):n==="array-contains"?new Sb(e,i):n==="in"?new Ab(e,i):n==="not-in"?new Rb(e,i):n==="array-contains-any"?new Mb(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Db(e,i):new Tb(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ca(n,this.value)):n!==null&&Po(this.value)===Po(n)&&this.matchesComparison(ca(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return L()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ui=class t extends Hf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return pM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function pM(t){return t.op==="and"}function mM(t){return f5(t)&&pM(t)}function f5(t){for(let e of t.filters)if(e instanceof ui)return!1;return!0}function xb(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+la(t.value);if(mM(t))return t.filters.map(e=>xb(e)).join(",");{let e=t.filters.map(n=>xb(n)).join(",");return`${t.op}(${e})`}}function gM(t,e){return t instanceof tt?function(i,r){return r instanceof tt&&i.op===r.op&&i.field.isEqual(r.field)&&li(i.value,r.value)}(t,e):t instanceof ui?function(i,r){return r instanceof ui&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&gM(s,r.filters[a]),!0):!1}(t,e):void L()}function _M(t){return t instanceof tt?function(n){return`${n.field.canonicalString()} ${n.op} ${la(n.value)}`}(t):t instanceof ui?function(n){return n.op.toString()+" {"+n.getFilters().map(_M).join(" ,")+"}"}(t):"Filter"}var Cb=class extends tt{constructor(e,n,i){super(e,n,i),this.key=N.fromName(i.referenceValue)}matches(e){let n=N.comparator(e.key,this.key);return this.matchesComparison(n)}},Db=class extends tt{constructor(e,n){super(e,"in",n),this.keys=vM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Tb=class extends tt{constructor(e,n){super(e,"not-in",n),this.keys=vM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function vM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>N.fromName(i.referenceValue))}var Sb=class extends tt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Ww(n)&&Fl(n.arrayValue,this.value)}},Ab=class extends tt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Fl(this.value.arrayValue,n)}},Rb=class extends tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Fl(this.value.arrayValue,n)}},Mb=class extends tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Ww(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Fl(this.value.arrayValue,i))}};var Nb=class{constructor(e,n=null,i=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function BR(t,e=null,n=[],i=[],r=null,o=null,s=null){return new Nb(t,e,n,i,r,o,s)}function Gw(t){let e=H(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>xb(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),pp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>la(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>la(i)).join(",")),e.ue=n}return e.ue}function Kw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!h5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!UR(t.startAt,e.startAt)&&UR(t.endAt,e.endAt)}function Pb(t){return N.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ha=class{constructor(e,n=null,i=[],r=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function p5(t,e,n,i,r,o,s,a){return new ha(t,e,n,i,r,o,s,a)}function Qw(t){return new ha(t)}function $R(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function m5(t){return t.collectionGroup!==null}function Rl(t){let e=H(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Et(Zt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new da(o,i))}),n.has(Zt.keyField().canonicalString())||e.ce.push(new da(Zt.keyField(),i))}return e.ce}function ai(t){let e=H(t);return e.le||(e.le=g5(e,Rl(t))),e.le}function g5(t,e){if(t.limitType==="F")return BR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new da(r.field,o)});let n=t.endAt?new ua(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ua(t.startAt.position,t.startAt.inclusive):null;return BR(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function kb(t,e,n){return new ha(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mp(t,e){return Kw(ai(t),ai(e))&&t.limitType===e.limitType}function yM(t){return`${Gw(ai(t))}|lt:${t.limitType}`}function ea(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>_M(r)).join(", ")}]`),pp(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>la(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>la(r)).join(",")),`Target(${i})`}(ai(t))}; limitType=${t.limitType})`}function gp(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):N.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of Rl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(s,a,c){let l=jR(s,a,c);return s.inclusive?l<=0:l<0}(i.startAt,Rl(i),r)||i.endAt&&!function(s,a,c){let l=jR(s,a,c);return s.inclusive?l>=0:l>0}(i.endAt,Rl(i),r))}(t,e)}function _5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bM(t){return(e,n)=>{let i=!1;for(let r of Rl(t)){let o=v5(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function v5(t,e,n){let i=t.field.isKeyField()?N.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?ca(c,l):L()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return L()}}var Sr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wa(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return dM(this.inner)}size(){return this.innerSize}};var y5=new Ve(N.comparator);function $i(){return y5}var wM=new Ve(N.comparator);function Sl(...t){let e=wM;for(let n of t)e=e.insert(n.key,n);return e}function IM(t){let e=wM;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function To(){return Ml()}function EM(){return Ml()}function Ml(){return new Sr(t=>t.toString(),(t,e)=>t.isEqual(e))}var b5=new Ve(N.comparator),w5=new Et(N.comparator);function te(...t){let e=w5;for(let n of t)e=e.add(n);return e}var I5=new Et(he);function E5(){return I5}function xM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kl(e)?"-0":e}}function CM(t){return{integerValue:""+t}}function x5(t,e){return a5(e)?CM(e):xM(t,e)}var fa=class{constructor(){this._=void 0}};function C5(t,e,n){return t instanceof pa?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&zw(o)&&(o=qw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ko?TM(t,e):t instanceof Oo?SM(t,e):function(r,o){let s=DM(r,o),a=HR(s)+HR(r.Pe);return Eb(s)&&Eb(r.Pe)?CM(a):xM(r.serializer,a)}(t,e)}function D5(t,e,n){return t instanceof ko?TM(t,e):t instanceof Oo?SM(t,e):n}function DM(t,e){return t instanceof ma?function(i){return Eb(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var pa=class extends fa{},ko=class extends fa{constructor(e){super(),this.elements=e}};function TM(t,e){let n=AM(e);for(let i of t.elements)n.some(r=>li(r,i))||n.push(i);return{arrayValue:{values:n}}}var Oo=class extends fa{constructor(e){super(),this.elements=e}};function SM(t,e){let n=AM(e);for(let i of t.elements)n=n.filter(r=>!li(r,i));return{arrayValue:{values:n}}}var ma=class extends fa{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function HR(t){return Fe(t.integerValue||t.doubleValue)}function AM(t){return Ww(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function T5(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ko&&r instanceof ko||i instanceof Oo&&r instanceof Oo?aa(i.elements,r.elements,li):i instanceof ma&&r instanceof ma?li(i.Pe,r.Pe):i instanceof pa&&r instanceof pa}(t.transform,e.transform)}var Ob=class{constructor(e,n){this.version=e,this.transformResults=n}},Ro=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ff(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ga=class{};function RM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zf(t.key,Ro.none()):new Fo(t.key,t.data,Ro.none());{let n=t.data,i=An.empty(),r=new Et(Zt.comparator);for(let o of e.fields)if(!r.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Hi(t.key,i,new oi(r.toArray()),Ro.none())}}function S5(t,e,n){t instanceof Fo?function(r,o,s){let a=r.value.clone(),c=qR(r.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hi?function(r,o,s){if(!Ff(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=qR(r.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(MM(r)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Nl(t,e,n,i){return t instanceof Fo?function(o,s,a,c){if(!Ff(o.precondition,s))return a;let l=o.value.clone(),u=WR(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof Hi?function(o,s,a,c){if(!Ff(o.precondition,s))return a;let l=WR(o.fieldTransforms,c,s),u=s.data;return u.setAll(MM(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(o,s,a){return Ff(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function A5(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=DM(i.transform,r||null);o!=null&&(n===null&&(n=An.empty()),n.set(i.field,o))}return n||null}function zR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&aa(i,r,(o,s)=>T5(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Fo=class extends ga{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Hi=class extends ga{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function MM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function qR(t,e,n){let i=new Map;Ce(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,D5(s,a,n[r]))}return i}function WR(t,e,n){let i=new Map;for(let r of t){let o=r.transform,s=n.data.field(r.field);i.set(r.field,C5(o,s,e))}return i}var zf=class extends ga{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Fb=class extends ga{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Lb=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&S5(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=Nl(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=Nl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=EM();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(r.key)?null:a;let c=RM(s,a);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(q.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,(n,i)=>zR(n,i))&&aa(this.baseMutations,e.baseMutations,(n,i)=>zR(n,i))}},Vb=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ce(e.mutations.length===i.length);let r=function(){return b5}(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new t(e,n,i,r)}};var jb=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ub=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ye,se;function R5(t){switch(t){default:return L();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function NM(t){if(t===void 0)return Ui("GRPC error has no .code"),v.UNKNOWN;switch(t){case Ye.OK:return v.OK;case Ye.CANCELLED:return v.CANCELLED;case Ye.UNKNOWN:return v.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return v.INTERNAL;case Ye.UNAVAILABLE:return v.UNAVAILABLE;case Ye.UNAUTHENTICATED:return v.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case Ye.NOT_FOUND:return v.NOT_FOUND;case Ye.ALREADY_EXISTS:return v.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return v.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case Ye.ABORTED:return v.ABORTED;case Ye.OUT_OF_RANGE:return v.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return v.UNIMPLEMENTED;case Ye.DATA_LOSS:return v.DATA_LOSS;default:return L()}}(se=Ye||(Ye={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";var GR=null;function M5(){return new TextEncoder}var N5=new Do([4294967295,4294967295],0);function KR(t){let e=M5().encode(t),n=new PR;return n.update(e),new Uint8Array(n.digest())}function QR(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Do([n,i],0),new Do([r,o],0)]}var Bb=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new So(`Invalid padding: ${n}`);if(i<0)throw new So(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new So(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new So(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Do.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Do.fromNumber(i)));return r.compare(N5)===1&&(r=new Do([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=KR(e),[i,r]=QR(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,r,n);return i.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=KR(e),[i,r]=QR(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},So=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var qf=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Ll.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(q.min(),r,new Ve(he),$i(),te())}},Ll=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,te(),te(),te())}};var ra=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},Wf=class{constructor(e,n){this.targetId=e,this.me=n}},Gf=class{constructor(e,n,i=Nt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},Kf=class{constructor(){this.fe=0,this.ge=ZR(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=te(),n=te(),i=te();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:L()}}),new Ll(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=ZR()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},$b=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=$i(),this.qe=YR(),this.Qe=new Ve(he)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:L()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let o=r.target;if(Pb(o))if(i===0){let s=new N(o.path);this.Ue(n,s,Rn.newNoDocument(s,q.min()))}else Ce(i===1);else{let s=this.Ye(n);if(s!==i){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}GR?.et(function(u,d,h,f,m){var g,_,C,z,G,ye;let ut={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},fe=d.unchangedNames;return fe&&(ut.bloomFilter={applied:m===0,hashCount:(g=fe?.hashCount)!==null&&g!==void 0?g:0,bitmapLength:(z=(C=(_=fe?.bits)===null||_===void 0?void 0:_.bitmap)===null||C===void 0?void 0:C.length)!==null&&z!==void 0?z:0,padding:(ye=(G=fe?.bits)===null||G===void 0?void 0:G.padding)!==null&&ye!==void 0?ye:0,mightContain:gt=>{var On;return(On=f?.mightContain(gt))!==null&&On!==void 0&&On}}),ut}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,s,a;try{s=Tr(i).toUint8Array()}catch(c){if(c instanceof Bf)return sa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Bb(s,r,o)}catch(c){return sa(c instanceof So?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Pb(a.target)){let c=new N(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Rn.newNoDocument(c,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let i=te();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let r=new qf(e,n,this.Qe,this.ke,i);return this.ke=$i(),this.qe=YR(),this.Qe=new Ve(he),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Kf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Et(he),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||S("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Kf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function YR(){return new Ve(N.comparator)}function ZR(){return new Ve(N.comparator)}var P5={asc:"ASCENDING",desc:"DESCENDING"},k5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},O5={and:"AND",or:"OR"},Hb=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function zb(t,e){return t.useProto3Json||pp(e)?e:{value:e}}function Qf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F5(t,e){return Qf(t,e.toTimestamp())}function ci(t){return Ce(!!t),q.fromTimestamp(function(n){let i=Bi(n);return new mt(i.seconds,i.nanos)}(t))}function Yw(t,e){return qb(t,e).canonicalString()}function qb(t,e){let n=function(r){return new Le(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kM(t){let e=Le.fromString(t);return Ce(jM(e)),e}function Wb(t,e){return Yw(t.databaseId,e.path)}function cb(t,e){let n=kM(e);if(n.get(1)!==t.databaseId.projectId)throw new A(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new A(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new N(FM(n))}function OM(t,e){return Yw(t.databaseId,e)}function L5(t){let e=kM(t);return e.length===4?Le.emptyPath():FM(e)}function Gb(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function FM(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function XR(t,e,n){return{name:Wb(t,e),fields:n.value.mapValue.fields}}function V5(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:L()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(l,u){return l.useProto3Json?(Ce(u===void 0||typeof u=="string"),Nt.fromBase64String(u||"")):(Ce(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Nt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let u=l.code===void 0?v.UNKNOWN:NM(l.code);return new A(u,l.message||"")}(s);n=new Gf(i,r,o,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=cb(t,i.document.name),o=ci(i.document.updateTime),s=i.document.createTime?ci(i.document.createTime):q.min(),a=new An({mapValue:{fields:i.document.fields}}),c=Rn.newFoundDocument(r,o,s,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new ra(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=cb(t,i.document),o=i.readTime?ci(i.readTime):q.min(),s=Rn.newNoDocument(r,o),a=i.removedTargetIds||[];n=new ra([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=cb(t,i.document),o=i.removedTargetIds||[];n=new ra([],o,r,null)}else{if(!("filter"in e))return L();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new Ub(r,o),a=i.targetId;n=new Wf(a,s)}}return n}function j5(t,e){let n;if(e instanceof Fo)n={update:XR(t,e.key,e.value)};else if(e instanceof zf)n={delete:Wb(t,e.key)};else if(e instanceof Hi)n={update:XR(t,e.key,e.data),updateMask:K5(e.fieldMask)};else{if(!(e instanceof Fb))return L();n={verify:Wb(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof pa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ko)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Oo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ma)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw L()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:F5(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:L()}(t,e.precondition)),n}function U5(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(r,o){let s=r.updateTime?ci(r.updateTime):ci(o);return s.isEqual(q.min())&&(s=ci(o)),new Ob(s,r.transformResults||[])}(n,e))):[]}function B5(t,e){return{documents:[OM(t,e.path)]}}function $5(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=OM(t,r);let o=function(l){if(l.length!==0)return VM(ui.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:ta(h.field),direction:q5(h.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=zb(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:r}}function H5(t){let e=L5(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){Ce(i===1);let u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(d){let h=LM(d);return h instanceof ui&&mM(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(m){return new da(na(m.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,pp(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new ua(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new ua(f,h)}(n.endAt)),p5(e,r,s,o,a,"F",c,l)}function z5(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return L()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=na(n.unaryFilter.field);return tt.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=na(n.unaryFilter.field);return tt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=na(n.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=na(n.unaryFilter.field);return tt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return L()}}(t):t.fieldFilter!==void 0?function(n){return tt.create(na(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return L()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ui.create(n.compositeFilter.filters.map(i=>LM(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return L()}}(n.compositeFilter.op))}(t):L()}function q5(t){return P5[t]}function W5(t){return k5[t]}function G5(t){return O5[t]}function ta(t){return{fieldPath:t.canonicalString()}}function na(t){return Zt.fromServerFormat(t.fieldPath)}function VM(t){return t instanceof tt?function(n){if(n.op==="=="){if(VR(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NAN"}};if(LR(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(VR(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NOT_NAN"}};if(LR(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(n.field),op:W5(n.op),value:n.value}}}(t):t instanceof ui?function(n){let i=n.getFilters().map(r=>VM(r));return i.length===1?i[0]:{compositeFilter:{op:G5(n.op),filters:i}}}(t):L()}function K5(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Vl=class t{constructor(e,n,i,r,o=q.min(),s=q.min(),a=Nt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Kb=class{constructor(e){this.ut=e}};function Q5(t){let e=H5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kb(e,e.limit,"L"):e}var Yf=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Fe(e.integerValue));else if("doubleValue"in e){let i=Fe(e.doubleValue);isNaN(i)?this.Tt(n,13):(this.Tt(n,15),kl(i)?n.Et(0):n.Et(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Tt(n,20),typeof i=="string"&&(i=Bi(i)),n.dt(`${i.seconds||""}`),n.Et(i.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Tr(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Tt(n,45),n.Et(i.latitude||0),n.Et(i.longitude||0)}else"mapValue"in e?hM(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):L()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let i=e.fields||{};this.Tt(n,55);for(let r of Object.keys(i))this.At(r,n),this.Pt(i[r],n)}yt(e,n){let i=e.values||[];this.Tt(n,50);for(let r of i)this.Pt(r,n)}ft(e,n){this.Tt(n,37),N.fromName(e).path.forEach(i=>{this.Tt(n,60),this.wt(i,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};Yf.St=new Yf;var Qb=class{constructor(){this.on=new Yb}addToCollectionParentIndex(e,n){return this.on.add(n),b.resolve()}getCollectionParents(e,n){return b.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return b.resolve()}deleteFieldIndex(e,n){return b.resolve()}deleteAllFieldIndexes(e){return b.resolve()}createTargetIndexes(e,n){return b.resolve()}getDocumentsMatchingTarget(e,n){return b.resolve(null)}getIndexType(e,n){return b.resolve(0)}getFieldIndexes(e,n){return b.resolve([])}getNextCollectionGroupToUpdate(e){return b.resolve(null)}getMinOffset(e,n){return b.resolve(No.min())}getMinOffsetFromCollectionGroup(e,n){return b.resolve(No.min())}updateCollectionGroup(e,n,i){return b.resolve()}updateIndexEntries(e,n){return b.resolve()}},Yb=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Et(Le.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Et(Le.comparator)).toArray()}};var vte=new Uint8Array(0);var ri=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(41943040,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);var jl=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var Zb=class{constructor(){this.changes=new Sr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?b.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Xb=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Jb=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Nl(i.mutation,r,oi.empty(),mt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,te()).next(()=>i))}getLocalViewOfDocuments(e,n,i=te()){let r=To();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let s=Sl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let i=To();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,te()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,i,r){let o=$i(),s=Ml(),a=function(){return Ml()}();return n.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof Hi)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),Nl(u.mutation,l,u.mutation.getFieldMask(),mt.now())):s.set(l.key,oi.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new Xb(u,(d=s.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let i=Ml(),r=new Ve((s,a)=>s-a),o=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=i.get(c)||oi.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||te()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=EM();u.forEach(h=>{if(!o.has(h)){let f=RM(n.get(h),i.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,d))}return b.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(s){return N.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):m5(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):b.resolve(To()),a=-1,c=o;return s.next(l=>b.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?b.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,te())).next(u=>({batchId:a,changes:IM(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new N(n)).next(i=>{let r=Sl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,s=Sl();return this.indexManager.getCollectionParents(e,o).next(a=>b.forEach(a,c=>{let l=function(d,h){return new ha(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,Rn.newInvalidDocument(u)))});let a=Sl();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&Nl(u.mutation,l,oi.empty(),mt.now()),gp(n,l)&&(a=a.insert(c,l))}),a})}};var ew=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return b.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ci(r.createTime)}}(n)),b.resolve()}getNamedQuery(e,n){return b.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(r){return{name:r.name,query:Q5(r.bundledQuery),readTime:ci(r.readTime)}}(n)),b.resolve()}};var tw=class{constructor(){this.overlays=new Ve(N.comparator),this.lr=new Map}getOverlay(e,n){return b.resolve(this.overlays.get(n))}getOverlays(e,n){let i=To();return b.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.lt(e,n,o)}),b.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.lr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(i)),b.resolve()}getOverlaysForCollection(e,n,i){let r=To(),o=n.length+1,s=new N(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return b.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Ve((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>i){let u=o.get(l.largestBatchId);u===null&&(u=To(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=To(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return b.resolve(a)}lt(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new jb(n,i));let o=this.lr.get(n);o===void 0&&(o=te(),this.lr.set(n,o)),this.lr.set(n,o.add(i.key))}};var Ul=class{constructor(){this.hr=new Et(Ze.Pr),this.Ir=new Et(Ze.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let i=new Ze(e,n);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.dr(new Ze(e,n))}Ar(e,n){e.forEach(i=>this.removeReference(i,n))}Rr(e){let n=new N(new Le([])),i=new Ze(n,e),r=new Ze(n,e+1),o=[];return this.Ir.forEachInRange([i,r],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new N(new Le([])),i=new Ze(n,e),r=new Ze(n,e+1),o=te();return this.Ir.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ze(e,0),i=this.hr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},Ze=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return N.comparator(e.key,n.key)||he(e.gr,n.gr)}static Tr(e,n){return he(e.gr,n.gr)||N.comparator(e.key,n.key)}};var nw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Et(Ze.Pr)}checkEmpty(e){return b.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Lb(o,n,i,r);this.mutationQueue.push(s);for(let a of r)this.yr=this.yr.add(new Ze(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return b.resolve(s)}lookupMutationBatch(e,n){return b.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.Sr(i),o=r<0?0:r;return b.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new Ze(n,0),r=new Ze(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([i,r],s=>{let a=this.wr(s.gr);o.push(a)}),b.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Et(he);return n.forEach(r=>{let o=new Ze(r,0),s=new Ze(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{i=i.add(a.gr)})}),b.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;N.isDocumentKey(o)||(o=o.child(""));let s=new Ze(new N(o),0),a=new Et(he);return this.yr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.gr)),!0)},s),b.resolve(this.br(a))}br(e){let n=[];return e.forEach(i=>{let r=this.wr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ce(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.yr;return b.forEach(n.mutations,r=>{let o=new Ze(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,n){let i=new Ze(n,0),r=this.yr.firstAfterOrEqual(i);return b.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,b.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var iw=class{constructor(e){this.Cr=e,this.docs=function(){return new Ve(N.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,s=this.Cr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return b.resolve(i?i.document.mutableCopy():Rn.newInvalidDocument(n))}getEntries(e,n){let i=$i();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Rn.newInvalidDocument(r))}),b.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=$i(),s=n.path,a=new N(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||r5(i5(u),i)<=0||(r.has(u.key)||gp(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return b.resolve(o)}getAllFromCollectionGroup(e,n,i,r){L()}vr(e,n){return b.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new rw(this)}getSize(e){return b.resolve(this.size)}},rw=class extends Zb{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),b.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var ow=class{constructor(e){this.persistence=e,this.Fr=new Sr(n=>Gw(n),Kw),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Ul,this.targetCount=0,this.Nr=jl.On()}forEachTarget(e,n){return this.Fr.forEach((i,r)=>n(r)),b.resolve()}getLastRemoteSnapshotVersion(e){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return b.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Mr&&(this.Mr=n),b.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new jl(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,b.resolve()}updateTargetData(e,n){return this.kn(n),b.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,b.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),b.waitFor(o).next(()=>r)}getTargetCount(e){return b.resolve(this.targetCount)}getTargetData(e,n){let i=this.Fr.get(n)||null;return b.resolve(i)}addMatchingKeys(e,n,i){return this.Or.Er(n,i),b.resolve()}removeMatchingKeys(e,n,i){this.Or.Ar(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),b.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),b.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Or.mr(n);return b.resolve(i)}containsKey(e,n){return b.resolve(this.Or.containsKey(n))}};var sw=class{constructor(e,n){this.Lr={},this.overlays={},this.Br=new uM(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new ow(this),this.indexManager=new Qb,this.remoteDocumentCache=function(r){return new iw(r)}(i=>this.referenceDelegate.Qr(i)),this.serializer=new Kb(n),this.Kr=new ew(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Lr[e.toKey()];return i||(i=new nw(n,this.referenceDelegate),this.Lr[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,i){S("MemoryPersistence","Starting transaction:",e);let r=new aw(this.Br.next());return this.referenceDelegate.$r(),i(r).next(o=>this.referenceDelegate.Ur(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Wr(e,n){return b.or(Object.values(this.Lr).map(i=>()=>i.containsKey(e,n)))}},aw=class extends bb{constructor(e){super(),this.currentSequenceNumber=e}},cw=class t{constructor(e){this.persistence=e,this.Gr=new Ul,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw L()}addReference(e,n,i){return this.Gr.addReference(i,n),this.Hr.delete(i.toString()),b.resolve()}removeReference(e,n,i){return this.Gr.removeReference(i,n),this.Hr.add(i.toString()),b.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),b.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(r=>this.Hr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Hr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.Hr,i=>{let r=N.fromPath(i);return this.Jr(e,r).next(o=>{o||n.removeEntry(r,q.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(i=>{i?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return b.or([()=>b.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var lw=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.ki=i,this.qi=r}static Qi(e,n){let i=te(),r=te();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var uw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var dw=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return $T()?8:s5(Je())>0?6:4}()}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new uw;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,i,r){return i.documentReadCount<this.Ui?(Tl()<=J.DEBUG&&S("QueryEngine","SDK will not create cache indexes for query:",ea(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),b.resolve()):(Tl()<=J.DEBUG&&S("QueryEngine","Query:",ea(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(Tl()<=J.DEBUG&&S("QueryEngine","The SDK decides to create cache indexes for query:",ea(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ai(n))):b.resolve())}zi(e,n){if($R(n))return b.resolve(null);let i=ai(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=kb(n,null,"F"),i=ai(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=te(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.Yi(n,a);return this.Zi(n,l,s,c.readTime)?this.zi(e,kb(n,null,"F")):this.Xi(e,l,n,c)}))})))}ji(e,n,i,r){return $R(n)||r.isEqual(q.min())?b.resolve(null):this.Gi.getDocuments(e,i).next(o=>{let s=this.Yi(n,o);return this.Zi(n,s,i,r)?b.resolve(null):(Tl()<=J.DEBUG&&S("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ea(n)),this.Xi(e,s,n,n5(r,-1)).next(a=>a))})}Yi(e,n){let i=new Et(bM(e));return n.forEach((r,o)=>{gp(e,o)&&(i=i.add(o))}),i}Zi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Hi(e,n,i){return Tl()<=J.DEBUG&&S("QueryEngine","Using full collection scan to execute query:",ea(n)),this.Gi.getDocumentsMatchingQuery(e,n,No.min(),i)}Xi(e,n,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var hw=class{constructor(e,n,i,r){this.persistence=e,this.es=n,this.serializer=r,this.ts=new Ve(he),this.ns=new Sr(o=>Gw(o),Kw),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jb(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function Y5(t,e,n,i){return new hw(t,e,n,i)}function UM(t,e){return p(this,null,function*(){let n=H(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.os(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],c=te();for(let l of r){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(i,c).next(l=>({_s:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Z5(t,e){let n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=b.resolve();return h.forEach(m=>{f=f.next(()=>u.getEntry(c,m)).next(g=>{let _=l.docVersions.get(m);Ce(_!==null),g.version.compareTo(_)<0&&(d.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=te();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function BM(t){let e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function X5(t,e){let n=H(t),i=e.snapshotVersion,r=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.ss.newChangeBuffer({trackRemovals:!0});r=n.ts;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(o,u.removedDocuments,d).next(()=>n.qr.addMatchingKeys(o,u.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Nt.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),function(g,_,C){return g.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(h,f,u)&&a.push(n.qr.updateTargetData(o,f))});let c=$i(),l=te();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(J5(o,s,e.documentUpdates).next(u=>{c=u.us,l=u.cs})),!i.isEqual(q.min())){let u=n.qr.getLastRemoteSnapshotVersion(o).next(d=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(u)}return b.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(n.ts=r,o))}function J5(t,e,n){let i=te(),r=te();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let s=$i();return n.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(q.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):S("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{us:s,cs:r}})}function eW(t,e){let n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function tW(t,e){let n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.qr.getTargetData(i,e).next(o=>o?(r=o,b.resolve(r)):n.qr.allocateTargetId(i).next(s=>(r=new Vl(e,s,"TargetPurposeListen",i.currentSequenceNumber),n.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(i.targetId,i),n.ns.set(e,i.targetId)),i})}function fw(t,e,n){return p(this,null,function*(){let i=H(t),r=i.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!ql(s))throw s;S("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)})}function JR(t,e,n){let i=H(t),r=q.min(),o=te();return i.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,u){let d=H(c),h=d.ns.get(u);return h!==void 0?b.resolve(d.ts.get(h)):d.qr.getTargetData(l,u)}(i,s,ai(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>i.es.getDocumentsMatchingQuery(s,e,n?r:q.min(),n?o:te())).next(a=>(nW(i,_5(e),a),{documents:a,ls:o})))}function nW(t,e,n){let i=t.rs.get(e)||q.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.rs.set(e,i)}var Zf=class{constructor(){this.activeTargetIds=E5()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var pw=class{constructor(){this.eo=new Zf,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,i){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Zf,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var mw=class{ro(e){}shutdown(){}};var Xf=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var kf=null;function lb(){return kf===null?kf=function(){return 268435456+Math.round(2147483648*Math.random())}():kf++,"0x"+kf.toString(16)}var iW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var gw=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}};var It="WebChannelConnection",_w=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.yo=i+"://"+n.host,this.wo=`projects/${r}/databases/${o}`,this.So=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get bo(){return!1}Do(n,i,r,o,s){let a=lb(),c=this.Co(n,i.toUriEncodedString());S("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(l,o,s),this.Fo(n,c,l,r).then(u=>(S("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw sa("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",r),u})}Mo(n,i,r,o,s,a){return this.Do(n,i,r,o,s)}vo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ba}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}Co(n,i){let r=iW[n];return`${this.yo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,n,i,r){let o=lb();return new Promise((s,a)=>{let c=new NR;c.setWithCredentials(!0),c.listenOnce(AR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Nf.NO_ERROR:let u=c.getResponseJson();S(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case Nf.TIMEOUT:S(It,`RPC '${e}' ${o} timed out`),a(new A(v.DEADLINE_EXCEEDED,"Request time out"));break;case Nf.HTTP_ERROR:let d=c.getStatus();if(S(It,`RPC '${e}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let m=function(_){let C=_.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(C)>=0?C:v.UNKNOWN}(f.status);a(new A(m,f.message))}else a(new A(v.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new A(v.UNAVAILABLE,"Connection failed."));break;default:L()}}finally{S(It,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(r);S(It,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",l,i,15)})}xo(e,n,i){let r=lb(),o=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=TR(),a=SR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new MR({})),this.vo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let u=o.join("");S(It,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=s.createWebChannel(u,c),h=!1,f=!1,m=new gw({co:_=>{f?S(It,`Not sending because RPC '${e}' stream ${r} is closed:`,_):(h||(S(It,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),S(It,`RPC '${e}' stream ${r} sending:`,_),d.send(_))},lo:()=>d.close()}),g=(_,C,z)=>{_.listen(C,G=>{try{z(G)}catch(ye){setTimeout(()=>{throw ye},0)}})};return g(d,Dl.EventType.OPEN,()=>{f||(S(It,`RPC '${e}' stream ${r} transport opened.`),m.Vo())}),g(d,Dl.EventType.CLOSE,()=>{f||(f=!0,S(It,`RPC '${e}' stream ${r} transport closed`),m.fo())}),g(d,Dl.EventType.ERROR,_=>{f||(f=!0,sa(It,`RPC '${e}' stream ${r} transport errored:`,_),m.fo(new A(v.UNAVAILABLE,"The operation could not be completed")))}),g(d,Dl.EventType.MESSAGE,_=>{var C;if(!f){let z=_.data[0];Ce(!!z);let G=z,ye=G.error||((C=G[0])===null||C===void 0?void 0:C.error);if(ye){S(It,`RPC '${e}' stream ${r} received error:`,ye);let ut=ye.status,fe=function(kr){let Yo=Ye[kr];if(Yo!==void 0)return NM(Yo)}(ut),gt=ye.message;fe===void 0&&(fe=v.INTERNAL,gt="Unknown error status: "+ut+" with message "+ye.message),f=!0,m.fo(new A(fe,gt)),d.close()}else S(It,`RPC '${e}' stream ${r} received:`,z),m.po(z)}}),g(a,RR.STAT_EVENT,_=>{_.stat===ab.PROXY?S(It,`RPC '${e}' stream ${r} detected buffering proxy`):_.stat===ab.NOPROXY&&S(It,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.mo()},0),m}};function ub(){return typeof document<"u"?document:null}function _p(t){return new Hb(t,!0)}var Jf=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.si=e,this.timerId=n,this.Oo=i,this.No=r,this.Lo=o,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();let n=Math.floor(this.Bo+this.$o()),i=Math.max(0,Date.now()-this.qo),r=Math.max(0,n-i);r>0&&S("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}};var ep=class{constructor(e,n,i,r,o,s,a,c){this.si=e,this.Wo=i,this.Go=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new Jf(e,n)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}stop(){return p(this,null,function*(){this.Yo()&&(yield this.close(0))})}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}n_(){return p(this,null,function*(){if(this.Zo())return this.close(0)})}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}close(e,n){return p(this,null,function*(){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,e!==4?this.Jo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(Ui(n.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Eo(n)})}o_(){}auth(){this.state=1;let e=this.__(this.zo),n=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.zo===n&&this.a_(i,r)},i=>{e(()=>{let r=new A(v.UNKNOWN,"Fetching auth token failed: "+i.message);return this.u_(r)})})}a_(e,n){let i=this.__(this.zo);this.stream=this.c_(e,n),this.stream.ho(()=>{i(()=>this.listener.ho())}),this.stream.Io(()=>{i(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(r=>{i(()=>this.u_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Xo(){this.state=5,this.Jo.Ko(()=>p(this,null,function*(){this.state=0,this.start()}))}u_(e){return S("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return n=>{this.si.enqueueAndForget(()=>this.zo===e?n():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},vw=class extends ep{constructor(e,n,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}c_(e,n){return this.connection.xo("Listen",e,n)}onMessage(e){this.Jo.reset();let n=V5(this.serializer,e),i=function(o){if(!("targetChange"in o))return q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?q.min():s.readTime?ci(s.readTime):q.min()}(e);return this.listener.l_(n,i)}h_(e){let n={};n.database=Gb(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=Pb(c)?{documents:B5(o,c)}:{query:$5(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=PM(o,s.resumeToken);let l=zb(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(q.min())>0){a.readTime=Qf(o,s.snapshotVersion.toTimestamp());let l=zb(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let i=z5(this.serializer,e);i&&(n.labels=i),this.r_(n)}P_(e){let n={};n.database=Gb(this.serializer),n.removeTarget=e,this.r_(n)}},yw=class extends ep{constructor(e,n,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,n){return this.connection.xo("Write",e,n)}onMessage(e){if(Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();let n=U5(e.writeResults,e.commitTime),i=ci(e.commitTime);return this.listener.d_(i,n)}return Ce(!e.writeResults||e.writeResults.length===0),this.I_=!0,this.listener.A_()}R_(){let e={};e.database=Gb(this.serializer),this.r_(e)}E_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>j5(this.serializer,i))};this.r_(n)}};var bw=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.V_=!1}m_(){if(this.V_)throw new A(v.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,n,i,r){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Do(e,qb(n,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new A(v.UNKNOWN,o.toString())})}Mo(e,n,i,r,o){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,qb(n,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new A(v.UNKNOWN,s.toString())})}terminate(){this.V_=!0,this.connection.terminate()}};var ww=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ui(n),this.y_=!1):S("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Iw=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.ro(s=>{i.enqueueAndForget(()=>p(this,null,function*(){Lo(this)&&(S("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let l=H(c);l.M_.add(4),yield Wl(l),l.N_.set("Unknown"),l.M_.delete(4),yield vp(l)})}(this))}))}),this.N_=new ww(i,r)}};function vp(t){return p(this,null,function*(){if(Lo(t))for(let e of t.x_)yield e(!0)})}function Wl(t){return p(this,null,function*(){for(let e of t.x_)yield e(!1)})}function $M(t,e){let n=H(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),eI(n)?Jw(n):Ia(n).Zo()&&Xw(n,e))}function Zw(t,e){let n=H(t),i=Ia(n);n.F_.delete(e),i.Zo()&&HM(n,e),n.F_.size===0&&(i.Zo()?i.t_():Lo(n)&&n.N_.set("Unknown"))}function Xw(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(q.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ia(t).h_(e)}function HM(t,e){t.L_.xe(e),Ia(t).P_(e)}function Jw(t){t.L_=new $b({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ia(t).start(),t.N_.w_()}function eI(t){return Lo(t)&&!Ia(t).Yo()&&t.F_.size>0}function Lo(t){return H(t).M_.size===0}function zM(t){t.L_=void 0}function rW(t){return p(this,null,function*(){t.N_.set("Online")})}function oW(t){return p(this,null,function*(){t.F_.forEach((e,n)=>{Xw(t,e)})})}function sW(t,e){return p(this,null,function*(){zM(t),eI(t)?(t.N_.D_(e),Jw(t)):t.N_.set("Unknown")})}function aW(t,e,n){return p(this,null,function*(){if(t.N_.set("Online"),e instanceof Gf&&e.state===2&&e.cause)try{yield function(r,o){return p(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.F_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.F_.delete(a),r.L_.removeTarget(a))})}(t,e)}catch(i){S("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield tp(t,i)}else if(e instanceof ra?t.L_.Ke(e):e instanceof Wf?t.L_.He(e):t.L_.We(e),!n.isEqual(q.min()))try{let i=yield BM(t.localStore);n.compareTo(i)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.F_.get(l);u&&o.F_.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.F_.get(c);if(!u)return;o.F_.set(c,u.withResumeToken(Nt.EMPTY_BYTE_STRING,u.snapshotVersion)),HM(o,c);let d=new Vl(u.target,c,l,u.sequenceNumber);Xw(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){S("RemoteStore","Failed to raise snapshot:",i),yield tp(t,i)}})}function tp(t,e,n){return p(this,null,function*(){if(!ql(e))throw e;t.M_.add(1),yield Wl(t),t.N_.set("Offline"),n||(n=()=>BM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){S("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield vp(t)}))})}function qM(t,e){return e().catch(n=>tp(t,n,e))}function yp(t){return p(this,null,function*(){let e=H(t),n=Ar(e),i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;cW(e);)try{let r=yield eW(e.localStore,i);if(r===null){e.v_.length===0&&n.t_();break}i=r.batchId,lW(e,r)}catch(r){yield tp(e,r)}WM(e)&&GM(e)})}function cW(t){return Lo(t)&&t.v_.length<10}function lW(t,e){t.v_.push(e);let n=Ar(t);n.Zo()&&n.T_&&n.E_(e.mutations)}function WM(t){return Lo(t)&&!Ar(t).Yo()&&t.v_.length>0}function GM(t){Ar(t).start()}function uW(t){return p(this,null,function*(){Ar(t).R_()})}function dW(t){return p(this,null,function*(){let e=Ar(t);for(let n of t.v_)e.E_(n.mutations)})}function hW(t,e,n){return p(this,null,function*(){let i=t.v_.shift(),r=Vb.from(i,e,n);yield qM(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield yp(t)})}function fW(t,e){return p(this,null,function*(){e&&Ar(t).T_&&(yield function(i,r){return p(this,null,function*(){if(function(s){return R5(s)&&s!==v.ABORTED}(r.code)){let o=i.v_.shift();Ar(i).e_(),yield qM(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield yp(i)}})}(t,e)),WM(t)&&GM(t)})}function eM(t,e){return p(this,null,function*(){let n=H(t);n.asyncQueue.verifyOperationInProgress(),S("RemoteStore","RemoteStore received new credentials");let i=Lo(n);n.M_.add(3),yield Wl(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield vp(n)})}function pW(t,e){return p(this,null,function*(){let n=H(t);e?(n.M_.delete(2),yield vp(n)):e||(n.M_.add(2),yield Wl(n),n.N_.set("Unknown"))})}function Ia(t){return t.B_||(t.B_=function(n,i,r){let o=H(n);return o.m_(),new vw(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{ho:rW.bind(null,t),Io:oW.bind(null,t),Eo:sW.bind(null,t),l_:aW.bind(null,t)}),t.x_.push(e=>p(this,null,function*(){e?(t.B_.e_(),eI(t)?Jw(t):t.N_.set("Unknown")):(yield t.B_.stop(),zM(t))}))),t.B_}function Ar(t){return t.k_||(t.k_=function(n,i,r){let o=H(n);return o.m_(),new yw(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{ho:()=>Promise.resolve(),Io:uW.bind(null,t),Eo:fW.bind(null,t),A_:dW.bind(null,t),d_:hW.bind(null,t)}),t.x_.push(e=>p(this,null,function*(){e?(t.k_.e_(),yield yp(t)):(yield t.k_.stop(),t.v_.length>0&&(S("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var Ew=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let s=Date.now()+i,a=new t(e,n,s,r,o);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new A(v.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function tI(t,e){if(Ui("AsyncQueue",`${e}: ${t}`),ql(t))return new A(v.UNAVAILABLE,`${e}: ${t}`);throw t}var np=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||N.comparator(n.key,i.key):(n,i)=>N.comparator(n.key,i.key),this.keyedMap=Sl(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var ip=class{constructor(){this.q_=new Ve(N.comparator)}track(e){let n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):L():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}},_a=class t{constructor(e,n,i,r,o,s,a,c,l){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,i,r,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,np.emptySet(n),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var xw=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},Cw=class{constructor(){this.queries=new Sr(e=>yM(e),mp),this.onlineState="Unknown",this.z_=new Set}};function mW(t,e){return p(this,null,function*(){let n=H(t),i=3,r=e.query,o=n.queries.get(r);o?!o.W_()&&e.G_()&&(i=2):(o=new xw,i=e.G_()?0:1);try{switch(i){case 0:o.K_=yield n.onListen(r,!0);break;case 1:o.K_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(s){let a=tI(s,`Initialization of query '${ea(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&nI(n)})}function gW(t,e){return p(this,null,function*(){let n=H(t),i=e.query,r=3,o=n.queries.get(i);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?r=e.G_()?0:1:!o.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function _W(t,e){let n=H(t),i=!1;for(let r of e){let o=r.query,s=n.queries.get(o);if(s){for(let a of s.U_)a.H_(r)&&(i=!0);s.K_=r}}i&&nI(n)}function vW(t,e,n){let i=H(t),r=i.queries.get(e);if(r)for(let o of r.U_)o.onError(n);i.queries.delete(e)}function nI(t){t.z_.forEach(e=>{e.next()})}var Dw,tM;(tM=Dw||(Dw={})).J_="default",tM.Cache="cache";var Tw=class{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new _a(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=_a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Dw.Cache}};var rp=class{constructor(e){this.key=e}},op=class{constructor(e){this.key=e}},Sw=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=te(),this.mutatedKeys=te(),this.Ia=bM(e),this.Ta=new np(this.Ia)}get Ea(){return this.la}da(e,n){let i=n?n.Aa:new ip,r=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,s=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),f=gp(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),_=!1;h&&f?h.data.isEqual(f.data)?m!==g&&(i.track({type:3,doc:f}),_=!0):this.Ra(h,f)||(i.track({type:2,doc:f}),_=!0,(c&&this.Ia(f,c)>0||l&&this.Ia(f,l)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),_=!0):h&&!f&&(i.track({type:1,doc:h}),_=!0,(c||l)&&(a=!0)),_&&(f?(s=s.add(f),o=g?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),i.track({type:1,doc:u})}return{Ta:s,Aa:i,Zi:a,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((u,d)=>function(f,m){let g=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return L()}};return g(f)-g(m)}(u.type,d.type)||this.Ia(u.doc,d.doc)),this.Va(i),r=r!=null&&r;let a=n&&!r?this.ma():[],c=this.Pa.size===0&&this.current&&!r?1:0,l=c!==this.ha;return this.ha=c,s.length!==0||l?{snapshot:new _a(this.query,e.Ta,o,s,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new ip,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=te(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new op(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new rp(i))}),n}pa(e){this.la=e.ls,this.Pa=te();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return _a.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Aw=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},Rw=class{constructor(e){this.key=e,this.wa=!1}},Mw=class{constructor(e,n,i,r,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Sr(a=>yM(a),mp),this.Da=new Map,this.Ca=new Set,this.va=new Ve(N.comparator),this.Fa=new Map,this.Ma=new Ul,this.xa={},this.Oa=new Map,this.Na=jl.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function yW(t,e,n=!0){return p(this,null,function*(){let i=JM(t),r,o=i.ba.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ya()):r=yield KM(i,e,n,!0),r})}function bW(t,e){return p(this,null,function*(){let n=JM(t);yield KM(n,e,!0,!1)})}function KM(t,e,n,i){return p(this,null,function*(){let r=yield tW(t.localStore,ai(e)),o=r.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return i&&(a=yield wW(t,e,o,s==="current",r.resumeToken)),t.isPrimaryClient&&n&&$M(t.remoteStore,r),a})}function wW(t,e,n,i,r){return p(this,null,function*(){t.Ba=(d,h,f)=>function(g,_,C,z){return p(this,null,function*(){let G=_.view.da(C);G.Zi&&(G=yield JR(g.localStore,_.query,!1).then(({documents:gt})=>_.view.da(gt,G)));let ye=z&&z.targetChanges.get(_.targetId),ut=z&&z.targetMismatches.get(_.targetId)!=null,fe=_.view.applyChanges(G,g.isPrimaryClient,ye,ut);return iM(g,_.targetId,fe.fa),fe.snapshot})}(t,d,h,f);let o=yield JR(t.localStore,e,!0),s=new Sw(e,o.ls),a=s.da(o.documents),c=Ll.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),l=s.applyChanges(a,t.isPrimaryClient,c);iM(t,n,l.fa);let u=new Aw(e,n,s);return t.ba.set(e,u),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function IW(t,e,n){return p(this,null,function*(){let i=H(t),r=i.ba.get(e),o=i.Da.get(r.targetId);if(o.length>1)return i.Da.set(r.targetId,o.filter(s=>!mp(s,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield fw(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Zw(i.remoteStore,r.targetId),Nw(i,r.targetId)}).catch(zl))):(Nw(i,r.targetId),yield fw(i.localStore,r.targetId,!0))})}function EW(t,e){return p(this,null,function*(){let n=H(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Zw(n.remoteStore,i.targetId))})}function xW(t,e,n){return p(this,null,function*(){let i=MW(t);try{let r=yield function(s,a){let c=H(s),l=mt.now(),u=a.reduce((f,m)=>f.add(m.key),te()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=$i(),g=te();return c.ss.getEntries(f,u).next(_=>{m=_,m.forEach((C,z)=>{z.isValidDocument()||(g=g.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,m)).next(_=>{d=_;let C=[];for(let z of a){let G=A5(z,d.get(z.key).overlayedDocument);G!=null&&C.push(new Hi(z.key,G,fM(G.value.mapValue),Ro.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,C,a)}).next(_=>{h=_;let C=_.applyToLocalDocumentSet(d,g);return c.documentOverlayCache.saveOverlays(f,_.batchId,C)})}).then(()=>({batchId:h.batchId,changes:IM(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,c){let l=s.xa[s.currentUser.toKey()];l||(l=new Ve(he)),l=l.insert(a,c),s.xa[s.currentUser.toKey()]=l}(i,r.batchId,n),yield Gl(i,r.changes),yield yp(i.remoteStore)}catch(r){let o=tI(r,"Failed to persist write");n.reject(o)}})}function QM(t,e){return p(this,null,function*(){let n=H(t);try{let i=yield X5(n.localStore,e);e.targetChanges.forEach((r,o)=>{let s=n.Fa.get(o);s&&(Ce(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.wa=!0:r.modifiedDocuments.size>0?Ce(s.wa):r.removedDocuments.size>0&&(Ce(s.wa),s.wa=!1))}),yield Gl(n,i,e)}catch(i){yield zl(i)}})}function nM(t,e,n){let i=H(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&r.push(a.snapshot)}),function(s,a){let c=H(s);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.U_)h.j_(a)&&(l=!0)}),l&&nI(c)}(i.eventManager,e),r.length&&i.Sa.l_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function CW(t,e,n){return p(this,null,function*(){let i=H(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Fa.get(e),o=r&&r.key;if(o){let s=new Ve(N.comparator);s=s.insert(o,Rn.newNoDocument(o,q.min()));let a=te().add(o),c=new qf(q.min(),new Map,new Ve(he),s,a);yield QM(i,c),i.va=i.va.remove(o),i.Fa.delete(e),iI(i)}else yield fw(i.localStore,e,!1).then(()=>Nw(i,e,n)).catch(zl)})}function DW(t,e){return p(this,null,function*(){let n=H(t),i=e.batch.batchId;try{let r=yield Z5(n.localStore,e);ZM(n,i,null),YM(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Gl(n,r)}catch(r){yield zl(r)}})}function TW(t,e,n){return p(this,null,function*(){let i=H(t);try{let r=yield function(s,a){let c=H(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(Ce(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(i.localStore,e);ZM(i,e,n),YM(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield Gl(i,r)}catch(r){yield zl(r)}})}function YM(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function ZM(t,e,n){let i=H(t),r=i.xa[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function Nw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Rr(e).forEach(i=>{t.Ma.containsKey(i)||XM(t,i)})}function XM(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Zw(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),iI(t))}function iM(t,e,n){for(let i of n)i instanceof rp?(t.Ma.addReference(i.key,e),SW(t,i)):i instanceof op?(S("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||XM(t,i.key)):L()}function SW(t,e){let n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(S("SyncEngine","New document in limbo: "+n),t.Ca.add(i),iI(t))}function iI(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new N(Le.fromString(e)),i=t.Na.next();t.Fa.set(i,new Rw(n)),t.va=t.va.insert(n,i),$M(t.remoteStore,new Vl(ai(Qw(n.path)),i,"TargetPurposeLimboResolution",uM.oe))}}function Gl(t,e,n){return p(this,null,function*(){let i=H(t),r=[],o=[],s=[];i.ba.isEmpty()||(i.ba.forEach((a,c)=>{s.push(i.Ba(c,e,n).then(l=>{if((l||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);let u=lw.Qi(c.targetId,l);o.push(u)}}))}),yield Promise.all(s),i.Sa.l_(r),yield function(c,l){return p(this,null,function*(){let u=H(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>b.forEach(l,h=>b.forEach(h.ki,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>b.forEach(h.qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ql(d))throw d;S("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ts.get(h),m=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(m);u.ts=u.ts.insert(h,g)}}})}(i.localStore,o))})}function AW(t,e){return p(this,null,function*(){let n=H(t);if(!n.currentUser.isEqual(e)){S("SyncEngine","User change. New user:",e.toKey());let i=yield UM(n.localStore,e);n.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(c=>{c.reject(new A(v.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Gl(n,i._s)}})}function RW(t,e){let n=H(t),i=n.Fa.get(e);if(i&&i.wa)return te().add(i.key);{let r=te(),o=n.Da.get(e);if(!o)return r;for(let s of o){let a=n.ba.get(s);r=r.unionWith(a.view.Ea)}return r}}function JM(t){let e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=QM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CW.bind(null,e),e.Sa.l_=_W.bind(null,e.eventManager),e.Sa.ka=vW.bind(null,e.eventManager),e}function MW(t){let e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TW.bind(null,e),e}var sp=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=_p(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Y5(this.persistence,new dw,e.initialUser,this.serializer)}createPersistence(e){return new sw(cw.jr,this.serializer)}createSharedClientState(e){return new pw}terminate(){return p(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Pw=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=AW.bind(null,this.syncEngine),yield pW(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Cw}()}createDatastore(e){let n=_p(e.databaseInfo.databaseId),i=function(o){return new _w(o)}(e.databaseInfo);return function(o,s,a,c){return new bw(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,s,a){return new Iw(i,r,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>nM(this.syncEngine,n,0),function(){return Xf.D()?new Xf:new mw}())}createSyncEngine(e,n){return function(r,o,s,a,c,l,u){let d=new Mw(r,o,s,a,c,l);return u&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return p(this,null,function*(){var e;yield function(i){return p(this,null,function*(){let r=H(i);S("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield Wl(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var kw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Ow=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ct.UNAUTHENTICATED,this.clientId=Vf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>p(this,null,function*(){S("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(S("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new A(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=tI(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function db(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>p(this,null,function*(){i.isEqual(r)||(yield UM(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function rM(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield PW(t);S("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>eM(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>eM(e.remoteStore,r)),t._onlineComponents=e})}function NW(t){return t.name==="FirebaseError"?t.code===v.FAILED_PRECONDITION||t.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function PW(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){S("FirestoreClient","Using user provided OfflineComponentProvider");try{yield db(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!NW(n))throw n;sa("Error using user provided cache. Falling back to memory cache: "+n),yield db(t,new sp)}}else S("FirestoreClient","Using default OfflineComponentProvider"),yield db(t,new sp);return t._offlineComponents})}function eN(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(S("FirestoreClient","Using user provided OnlineComponentProvider"),yield rM(t,t._uninitializedComponentsProvider._online)):(S("FirestoreClient","Using default OnlineComponentProvider"),yield rM(t,new Pw))),t._onlineComponents})}function kW(t){return eN(t).then(e=>e.syncEngine)}function oM(t){return p(this,null,function*(){let e=yield eN(t),n=e.eventManager;return n.onListen=yW.bind(null,e.syncEngine),n.onUnlisten=IW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bW.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=EW.bind(null,e.syncEngine),n})}function tN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var sM=new Map;function nN(t,e,n){if(!n)throw new A(v.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OW(t,e,n,i){if(e===!0&&i===!0)throw new A(v.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function aM(t){if(!N.isDocumentKey(t))throw new A(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cM(t){if(N.isDocumentKey(t))throw new A(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rI(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":L()}function Pl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new A(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=rI(t);throw new A(v.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var ap=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new A(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new A(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tN((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new A(v.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new A(v.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new A(v.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},va=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ap({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new A(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new A(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ap(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new hb;switch(i.type){case"firstParty":return new gb(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new A(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=sM.get(n);i&&(S("ComponentProvider","Removing Datastore"),sM.delete(n),i.terminate())}(this),Promise.resolve()}};function iN(t,e,n,i={}){var r;let o=(t=Pl(t,va))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=ct.MOCK_USER;else{a=Mh(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new A(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ct(l)}t._authCredentials=new fb(new Lf(a,c))}}var cp=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},dn=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Dr=class t extends cp{constructor(e,n,i){super(e,n,Qw(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new N(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function rN(t,e,...n){if(t=et(t),nN("collection","path",e),t instanceof va){let i=Le.fromString(e,...n);return cM(i),new Dr(t,null,i)}{if(!(t instanceof dn||t instanceof Dr))throw new A(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Le.fromString(e,...n));return cM(i),new Dr(t.firestore,null,i)}}function oN(t,e,...n){if(t=et(t),arguments.length===1&&(e=Vf.newId()),nN("doc","path",e),t instanceof va){let i=Le.fromString(e,...n);return aM(i),new dn(t,null,new N(i))}{if(!(t instanceof dn||t instanceof Dr))throw new A(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Le.fromString(e,...n));return aM(i),new dn(t.firestore,t instanceof Dr?t.converter:null,new N(i))}}var Fw=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new Jf(this,"async_queue_retry"),this.hu=()=>{let n=ub();n&&S("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Jo.Uo()};let e=ub();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=ub();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new ji;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return p(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!ql(e))throw e;S("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw Ui("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let r=Ew.createAndSchedule(this,e,n,i,o=>this.Eu(o));return this._u.push(r),r}Pu(){this.au&&L()}verifyOperationInProgress(){}du(){return p(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function lM(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var ya=class extends va{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new Fw}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cN(this),this._firestoreClient.terminate()}};function sN(t,e){let n=typeof t=="object"?t:_r(),i=typeof t=="string"?t:e||"(default)",r=po(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=Rh("firestore");o&&iN(r,...o)}return r}function aN(t){return t._firestoreClient||cN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function cN(t){var e,n,i;let r=t._freezeSettings(),o=function(a,c,l,u){return new wb(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,tN(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new Ow(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var Bl=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Nt.fromBase64String(e))}catch(n){throw new A(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var $l=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new A(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var lp=class{constructor(e){this._methodName=e}};var Hl=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new A(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new A(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}};var FW=/^__.*__$/,Lw=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fo(e,this.data,n,this.fieldTransforms)}};function lN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw L()}}var Vw=class t{constructor(e,n,i,r,o,s){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return up(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(lN(this.fu)&&FW.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},jw=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||_p(e)}Fu(e,n,i,r=!1){return new Vw({fu:e,methodName:n,vu:i,path:Zt.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function LW(t){let e=t._freezeSettings(),n=_p(t._databaseId);return new jw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function VW(t,e,n,i,r,o={}){let s=t.Fu(o.merge||o.mergeFields?2:0,e,n,r);fN("Data must be an object, but it was:",s,i);let a=dN(i,s),c,l;if(o.merge)c=new oi(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let d of o.mergeFields){let h=jW(e,d,n);if(!s.contains(h))throw new A(v.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);BW(u,h)||u.push(h)}c=new oi(u),l=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=s.fieldTransforms;return new Lw(new An(a),c,l)}function uN(t,e){if(hN(t=et(t)))return fN("Unsupported field value:",e,t),dN(t,e);if(t instanceof lp)return function(i,r){if(!lN(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let c=uN(a,r.bu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=et(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return x5(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=mt.fromDate(i);return{timestampValue:Qf(r.serializer,o)}}if(i instanceof mt){let o=new mt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Qf(r.serializer,o)}}if(i instanceof Hl)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Bl)return{bytesValue:PM(r.serializer,i._byteString)};if(i instanceof dn){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Yw(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${rI(i)}`)}(t,e)}function dN(t,e){let n={};return dM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wa(t,(i,r)=>{let o=uN(r,e.pu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function hN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof Hl||t instanceof Bl||t instanceof dn||t instanceof lp)}function fN(t,e,n){if(!hN(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=rI(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function jW(t,e,n){if((e=et(e))instanceof $l)return e._internalPath;if(typeof e=="string")return pN(t,e);throw up("Field path arguments must be of type string or ",t,!1,void 0,n)}var UW=new RegExp("[~\\*/\\[\\]]");function pN(t,e,n){if(e.search(UW)>=0)throw up(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $l(...e.split("."))._internalPath}catch{throw up(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function up(t,e,n,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new A(v.INVALID_ARGUMENT,a+t+c)}function BW(t,e){return t.some(n=>n.isEqual(e))}var dp=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Uw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(mN("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Uw=class extends dp{data(){return super.data()}};function mN(t,e){return typeof e=="string"?pN(t,e):e instanceof $l?e._internalPath:e._delegate._internalPath}function $W(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new A(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bw=class{convertValue(e,n="none"){switch(Po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw L()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return wa(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new Hl(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=qw(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ol(e));default:return null}}convertTimestamp(e){let n=Bi(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Le.fromString(e);Ce(jM(i));let r=new $f(i.get(1),i.get(3)),o=new N(i.popFirst(5));return r.isEqual(n)||Ui(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function HW(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var Ao=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hp=class extends dp{constructor(e,n,i,r,o,s){super(e,n,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new oa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(mN("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},oa=class extends hp{data(e={}){return super.data(e)}},$w=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ao(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new oa(this._firestore,this._userDataWriter,i.key,i,new Ao(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new A(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let c=new oa(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ao(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new oa(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ao(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:zW(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function zW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return L()}}var fp=class extends Bw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bl(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,n)}};function gN(t,e){let n=Pl(t.firestore,ya),i=oN(t),r=HW(t.converter,e);return qW(n,[VW(LW(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Ro.exists(!1))]).then(()=>i)}function oI(t,...e){var n,i,r;t=et(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||lM(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(lM(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[s+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let c,l,u;if(t instanceof dn)l=Pl(t.firestore,ya),u=Qw(t._key.path),c={next:d=>{e[s]&&e[s](WW(l,t,d))},error:e[s+1],complete:e[s+2]};else{let d=Pl(t,cp);l=Pl(d.firestore,ya),u=d._query;let h=new fp(l);c={next:f=>{e[s]&&e[s](new $w(l,h,d,f))},error:e[s+1],complete:e[s+2]},$W(t._query)}return function(h,f,m,g){let _=new kw(g),C=new Tw(f,_,m);return h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return mW(yield oM(h),C)})),()=>{_.$a(),h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return gW(yield oM(h),C)}))}}(aN(l),u,a,c)}function qW(t,e){return function(i,r){let o=new ji;return i.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return xW(yield kW(i),r,o)})),o.promise}(aN(t),e)}function WW(t,e,n){let i=n.docs.get(e._key),r=new fp(t);return new hp(t,r,e._key,i,new Ao(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){ba=r})(Xn),Zn(new Lt("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new ya(new pb(i.getProvider("auth-internal")),new vb(i.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new A(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $f(l.options.projectId,u)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Re(kR,"4.6.1",e),Re(kR,"4.6.1","esm2017")})();var bp=function(){return bp=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},bp.apply(this,arguments)};var QW={includeMetadataChanges:!1};function _N(t,e){return e===void 0&&(e=QW),new Q(function(n){var i=oI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function vN(t,e){var n;e===void 0&&(e={});var i=t.data(e);return!t.exists()||typeof i!="object"||i===null||!e.idField?i:bp(bp({},i),(n={},n[e.idField]=t.id,n))}function yN(t){return _N(t,{includeMetadataChanges:!0}).pipe($(function(e){return e.docs}))}function bN(t,e){return e===void 0&&(e={}),yN(t).pipe($(function(n){return n.map(function(i){return vN(i,e)})}))}var Vo=class{constructor(e){return e}},wN="firestore",sI=class{constructor(){return go(wN)}};var aI=new T("angularfire2.firestore-instances");function YW(t,e){let n=qs(wN,t,e);return n&&new Vo(n)}function ZW(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Vo(i)}}var XW={provide:sI,deps:[[new Ue,aI]]},JW={provide:Vo,useFactory:YW,deps:[[new Ue,aI],Dn]},eG=(()=>{class t{constructor(){Re("angularfire",Mi.full,"fst")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=re({type:t});static \u0275inj=ie({providers:[JW,XW]})}return t})();function IN(t,...e){return{ngModule:eG,providers:[{provide:aI,useFactory:ZW(t),multi:!0,deps:[O,ht,yr,Ni,[new Ue,wo],[new Ue,vr],...e]}]}}var EN=Vt(bN,!0);var xN=Vt(gN,!0);var cI=Vt(rN,!0);var CN=Vt(sN,!0);var PN=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(M(Ts),M(Ge))},e.\u0275dir=Be({type:e});let t=e;return t})(),nG=(()=>{let e=class e extends PN{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=uc(e)))(o||e)}})(),e.\u0275dir=Be({type:e,features:[sr]});let t=e;return t})(),kN=new T("");var iG={provide:kN,useExisting:sc(()=>Rr),multi:!0};function rG(){let t=Ti()?Ti().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var oG=new T(""),Rr=(()=>{let e=class e extends PN{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!rG())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(M(Ts),M(Ge),M(oG,8))},e.\u0275dir=Be({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Ke("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[eo([iG]),sr]});let t=e;return t})();var sG=new T(""),aG=new T("");function ON(t){return t!=null}function FN(t){return to(t)?Ae(t):t}function LN(t){let e={};return t.forEach(n=>{e=n!=null?w(w({},e),n):e}),Object.keys(e).length===0?null:e}function VN(t,e){return e.map(n=>n(t))}function cG(t){return!t.validate}function jN(t){return t.map(e=>cG(e)?e:n=>e.validate(n))}function lG(t){if(!t)return null;let e=t.filter(ON);return e.length==0?null:function(n){return LN(VN(n,e))}}function UN(t){return t!=null?lG(jN(t)):null}function uG(t){if(!t)return null;let e=t.filter(ON);return e.length==0?null:function(n){let i=VN(n,e).map(FN);return um(i).pipe($(LN))}}function BN(t){return t!=null?uG(jN(t)):null}function DN(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function dG(t){return t._rawValidators}function hG(t){return t._rawAsyncValidators}function lI(t){return t?Array.isArray(t)?t:[t]:[]}function Ip(t,e){return Array.isArray(t)?t.includes(e):t===e}function TN(t,e){let n=lI(e);return lI(t).forEach(r=>{Ip(n,r)||n.push(r)}),n}function SN(t,e){return lI(e).filter(n=>!Ip(t,n))}var Ep=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=UN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=BN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},uI=class extends Ep{get formDirective(){return null}get path(){return null}},Yl=class extends Ep{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},dI=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},fG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},fie=_e(w({},fG),{"[class.ng-submitted]":"isSubmitted"}),xa=(()=>{let e=class e extends dI{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(M(Yl,2))},e.\u0275dir=Be({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&zn("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[sr]});let t=e;return t})();var Kl="VALID",wp="INVALID",Ea="PENDING",Ql="DISABLED";function pG(t){return(xp(t)?t.validators:t)||null}function mG(t){return Array.isArray(t)?UN(t):t||null}function gG(t,e){return(xp(e)?e.asyncValidators:t)||null}function _G(t){return Array.isArray(t)?BN(t):t||null}function xp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var hI=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Kl}get invalid(){return this.status===wp}get pending(){return this.status==Ea}get disabled(){return this.status===Ql}get enabled(){return this.status!==Ql}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(TN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(SN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(SN(e,this._rawAsyncValidators))}hasValidator(e){return Ip(this._rawValidators,e)}hasAsyncValidator(e){return Ip(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ea,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ql,this.errors=null,this._forEachChild(i=>{i.disable(_e(w({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(_e(w({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Kl,this._forEachChild(i=>{i.enable(_e(w({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(_e(w({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kl||this.status===Ea)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ql:Kl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ea,this._hasOwnPendingAsyncValidator=!0;let n=FN(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new dt,this.statusChanges=new dt}_calculateStatus(){return this._allControlsDisabled()?Ql:this.errors?wp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ea)?Ea:this._anyControlsHaveStatus(wp)?wp:Kl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=mG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_G(this._rawAsyncValidators)}};var $N=new T("CallSetDisabledState",{providedIn:"root",factory:()=>fI}),fI="always";function vG(t,e){return[...e.path,t]}function yG(t,e,n=fI){wG(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),IG(t,e),xG(t,e),EG(t,e),bG(t,e)}function AN(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function bG(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function wG(t,e){let n=dG(t);e.validator!==null?t.setValidators(DN(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=hG(t);e.asyncValidator!==null?t.setAsyncValidators(DN(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();AN(e._rawValidators,r),AN(e._rawAsyncValidators,r)}function IG(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&HN(t,e)})}function EG(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&HN(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function HN(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function xG(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function CG(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function DG(t){return Object.getPrototypeOf(t.constructor)===nG}function TG(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(o=>{o.constructor===Rr?n=o:DG(o)?i=o:r=o}),r||i||n||null}function RN(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function MN(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var SG=class extends hI{constructor(e=null,n,i){super(pG(n),gG(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(MN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){RN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){RN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){MN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var AG={provide:Yl,useExisting:sc(()=>jo)},NN=Promise.resolve(),jo=(()=>{let e=class e extends Yl{constructor(i,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new SG,this._registered=!1,this.name="",this.update=new dt,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=TG(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),CG(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){yG(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){NN.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&En(r);NN.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?vG(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(M(uI,9),M(sG,10),M(aG,10),M(kN,10),M(Ei,8),M($N,8))},e.\u0275dir=Be({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[pe.None,"disabled","isDisabled"],model:[pe.None,"ngModel","model"],options:[pe.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[eo([AG]),sr,rr]});let t=e;return t})();var RG=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();var Ca=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:$N,useValue:i.callSetDisabledState??fI}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[RG]});let t=e;return t})();function MG(t,e){if(t&1&&(j(0,"tr")(1,"th",15),oe(2),P(),j(3,"td"),oe(4),P(),j(5,"td"),oe(6),sD(7,"date"),P()()),t&2){let n=e.$implicit,i=e.index;Me(2),lr(i+1),Me(2),lr(n.user),Me(2),lr(aD(7,3,n.fecha.seconds*1e3,"dd-MM-yy"))}}function NG(t,e){if(t&1&&(j(0,"div",9)(1,"h2",10),oe(2),P(),j(3,"table",11)(4,"thead",12)(5,"tr")(6,"th",13),oe(7,"#"),P(),j(8,"th",13),oe(9,"Usuario"),P(),j(10,"th",13),oe(11,"Fecha"),P()()(),j(12,"tbody"),wn(13,MG,8,6,"tr",14),P()()()),t&2){let n=In();Me(2),bi("Ingresos: ",n.conteoLogin,""),Me(11),As("ngForOf",n.coleccionLogin)}}var mI=(()=>{let e=class e{constructor(i){this.firestore=i,this.coleccionLogin=[],this.usuario="",this.conteoLogin=0}Login(){let i=cI(this.firestore,"logins");xN(i,{fecha:new Date,usuario:this.usuario})}GetData(){let i=cI(this.firestore,"logins"),r=EN(i);this.subcripciones=r.subscribe(o=>{this.coleccionLogin=o,this.conteoLogin=this.coleccionLogin.length,console.log(o)})}};e.\u0275fac=function(r){return new(r||e)(M(Vo))},e.\u0275cmp=nt({type:e,selectors:[["app-login"]],standalone:!0,features:[it],decls:12,vars:2,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"text-center","text-primary"],[1,"form-control","my-2",3,"ngModelChange","ngModel"],[1,"d-grid","gap-2"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"text-center","text-success"],[1,"table","table-bordered","table-hover"],[1,"thead-dark"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(r,o){r&1&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),oe(4,"Firestore"),P(),j(5,"input",4),Ii("ngModelChange",function(a){return ur(o.usuario,a)||(o.usuario=a),a}),P(),j(6,"div",5)(7,"button",6),Ke("click",function(){return o.Login()}),oe(8,"Login"),P(),j(9,"button",7),Ke("click",function(){return o.GetData()}),oe(10,"Obtener registros"),P()(),wn(11,NG,14,2,"div",8),P()()()),r&2&&(Me(5),wi("ngModel",o.usuario),Me(6),As("ngIf",o.coleccionLogin.length>0))},dependencies:[Ca,Rr,xa,jo,Si,RD,MD,ND],styles:[".error[_ngcontent-%COMP%]{color:red}"]});let t=e;return t})();function gI(t){return Array.isArray(t)?t:[t]}function Uo(t){return t instanceof Ge?t.nativeElement:t}var vI;try{vI=typeof Intl<"u"&&Intl.v8BreakIterator}catch{vI=!1}var Xt=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?p_(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||vI)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(x(on))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Zl;function PG(){if(Zl==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Zl=!0}))}finally{Zl=Zl||!1}return Zl}function Da(t){return PG()?t:!!t.capture}var _I;function kG(){if(_I==null){let t=typeof document<"u"?document.head:null;_I=!!(t&&(t.createShadowRoot||t.attachShadow))}return _I}function zN(t){if(kG()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Mr(t){return t.composedPath?t.composedPath()[0]:t.target}function qN(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var WN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();var OG=(()=>{let e=class e{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var GN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({providers:[OG]});let t=e;return t})();var KN=new Set,Bo,FG=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):VG}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&LG(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(x(Xt),x(hc,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function LG(t,e){if(!KN.has(t))try{Bo||(Bo=document.createElement("style"),e&&Bo.setAttribute("nonce",e),Bo.setAttribute("type","text/css"),document.head.appendChild(Bo)),Bo.sheet&&(Bo.sheet.insertRule(`@media ${t} {body{ }}`,0),KN.add(t))}catch(n){console.error(n)}}function VG(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var YN=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new He}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return QN(gI(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=QN(gI(i)).map(a=>this._registerQuery(a).observable),s=jr(o);return s=Yi(s.pipe(en(1)),s.pipe(Wa(1),$u(0))),s.pipe($(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),s={observable:new Q(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(us(r),$(({matches:a})=>({query:i,matches:a})),Br(this._destroySubject)),mql:r};return this._queries.set(i,s),s}};e.\u0275fac=function(r){return new(r||e)(x(FG),x(O))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function QN(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}function bI(t){return t.buttons===0||t.detail===0}function wI(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var jG=new T("cdk-input-modality-detector-options"),UG={ignoreKeys:[18,17,224,91,16]},JN=650,Ta=Da({passive:!0,capture:!0}),BG=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,s){this._platform=i,this._mostRecentTarget=null,this._modality=new Xe(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Mr(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<JN||(this._modality.next(bI(a)?"keyboard":"mouse"),this._mostRecentTarget=Mr(a))},this._onTouchstart=a=>{if(wI(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Mr(a)},this._options=w(w({},UG),s),this.modalityDetected=this._modality.pipe(Wa(1)),this.modalityChanged=this.modalityDetected.pipe(Hu()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Ta),o.addEventListener("mousedown",this._onMousedown,Ta),o.addEventListener("touchstart",this._onTouchstart,Ta)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ta),document.removeEventListener("mousedown",this._onMousedown,Ta),document.removeEventListener("touchstart",this._onTouchstart,Ta))}};e.\u0275fac=function(r){return new(r||e)(x(Xt),x(O),x(ke),x(jG,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Tp=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(Tp||{}),$G=new T("cdk-focus-monitor-default-options"),Dp=Da({passive:!0,capture:!0}),eP=(()=>{let e=class e{constructor(i,r,o,s,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new He,this._rootNodeFocusAndBlurListener=c=>{let l=Mr(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=s,this._detectionMode=a?.detectionMode||Tp.IMMEDIATE}monitor(i,r=!1){let o=Uo(i);if(!this._platform.isBrowser||o.nodeType!==1)return k();let s=zN(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new He,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=Uo(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){let s=Uo(i),a=this._getDocument().activeElement;s===a?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===Tp.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===Tp.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?JN:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(i,r){let o=this._elementInfo.get(r),s=Mr(i);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(i,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Dp),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Dp)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Br(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Dp),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Dp),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((o,s)=>{(s===i||o.checkChildren&&s.contains(i))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let s=i.labels;if(s){for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(x(O),x(Xt),x(BG),x(ke,8),x($G,8))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var $o=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}($o||{}),ZN="cdk-high-contrast-black-on-white",XN="cdk-high-contrast-white-on-black",yI="cdk-high-contrast-active",tP=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=y(YN).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return $o.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return $o.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return $o.BLACK_ON_WHITE}return $o.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(yI,ZN,XN),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===$o.BLACK_ON_WHITE?i.add(yI,ZN):r===$o.WHITE_ON_BLACK&&i.add(yI,XN)}}};e.\u0275fac=function(r){return new(r||e)(x(Xt),x(ke))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var II=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({});let t=e;return t})();function qG(){return!0}var WG=new T("mat-sanity-checks",{providedIn:"root",factory:qG}),Mn=(()=>{let e=class e{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return qN()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(x(tP),x(WG,8),x(ke))},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[II,II]});let t=e;return t})();var hn=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(hn||{}),CI=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=hn.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},nP=Da({passive:!0,capture:!0}),DI=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=Mr(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){let o=this._events.get(n);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,nP)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,nP)))}},iP={enterDuration:225,exitDuration:150},GG=800,rP=Da({passive:!0,capture:!0}),oP=["mousedown","touchstart"],sP=["mouseup","mouseleave","touchend","touchcancel"],Xl=class Xl{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Uo(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=w(w({},iP),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let s=i.radius||KG(e,n,r),a=e-r.left,c=n-r.top,l=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${c-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,m=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,g=new CI(this,u,i,m);u.style.transform="scale3d(1, 1, 1)",g.state=hn.FADING_IN,i.persistent||(this._mostRecentTransientRipple=g);let _=null;return!m&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let C=()=>this._finishRippleTransition(g),z=()=>this._destroyRipple(g);u.addEventListener("transitionend",C),u.addEventListener("transitioncancel",z),_={onTransitionEnd:C,onTransitionCancel:z}}),this._activeRipples.set(g,_),(m||!l)&&this._finishRippleTransition(g),g}fadeOutRipple(e){if(e.state===hn.FADING_OUT||e.state===hn.HIDDEN)return;let n=e.element,i=w(w({},iP),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=hn.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=Uo(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,oP.forEach(i=>{Xl._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{sP.forEach(n=>{this._triggerElement.addEventListener(n,this,rP)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===hn.FADING_IN?this._startFadeOutTransition(e):e.state===hn.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=hn.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=hn.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=bI(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+GG;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!wI(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===hn.VISIBLE||e.config.terminateOnPointerUp&&e.state===hn.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(oP.forEach(n=>Xl._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&sP.forEach(n=>e.removeEventListener(n,this,rP)))}};Xl._eventManager=new DI;var TI=Xl;function KG(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var dP=new T("mat-ripple-global-options"),QG=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,s,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new TI(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:w(w(w({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,w(w({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,w(w({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(M(Ge),M(O),M(Xt),M(dP,8),M(dc,8))},e.\u0275dir=Be({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&zn("mat-ripple-unbounded",o.unbounded)},inputs:{color:[pe.None,"matRippleColor","color"],unbounded:[pe.None,"matRippleUnbounded","unbounded"],centered:[pe.None,"matRippleCentered","centered"],radius:[pe.None,"matRippleRadius","radius"],animation:[pe.None,"matRippleAnimation","animation"],disabled:[pe.None,"matRippleDisabled","disabled"],trigger:[pe.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),hP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[Mn,Mn]});let t=e;return t})();var aP={capture:!0},cP=["focus","click","mouseenter","touchstart"],EI="mat-ripple-loader-uninitialized",xI="mat-ripple-loader-class-name",lP="mat-ripple-loader-centered",Sp="mat-ripple-loader-disabled",fP=(()=>{let e=class e{constructor(){this._document=y(ke,{optional:!0}),this._animationMode=y(dc,{optional:!0}),this._globalRippleOptions=y(dP,{optional:!0}),this._platform=y(Xt),this._ngZone=y(O),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let o=i.target.closest(`[${EI}]`);o&&this._createRipple(o)},this._ngZone.runOutsideAngular(()=>{for(let i of cP)this._document?.addEventListener(i,this._onInteraction,aP)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of cP)this._document?.removeEventListener(r,this._onInteraction,aP)}configureRipple(i,r){i.setAttribute(EI,""),(r.className||!i.hasAttribute(xI))&&i.setAttribute(xI,r.className||""),r.centered&&i.setAttribute(lP,""),r.disabled&&i.setAttribute(Sp,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let o=this._hosts.get(i);if(o){o.disabled=r;return}r?i.setAttribute(Sp,""):i.removeAttribute(Sp)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",i.getAttribute(xI)),i.append(o);let s=new QG(new Ge(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=i,s.centered=i.hasAttribute(lP),s.disabled=i.hasAttribute(Sp),this.attachRipple(i,s),s}attachRipple(i,r){i.removeAttribute(EI),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var SI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[Mn,Si,GN,Mn]});let t=e;return t})();var pP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[Mn,SI,SI,WN,Mn]});let t=e;return t})();var YG=["mat-button",""],ZG=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],XG=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var JG=new T("MAT_BUTTON_CONFIG");var e3=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],t3=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,o,s){this._elementRef=i,this._platform=r,this._ngZone=o,this._animationMode=s,this._focusMonitor=y(eP),this._rippleLoader=y(fP),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let a=y(JG,{optional:!0}),c=i.nativeElement,l=c.classList;this.disabledInteractive=a?.disabledInteractive??!1,this._rippleLoader?.configureRipple(c,{className:"mat-mdc-button-ripple"});for(let{attribute:u,mdcClasses:d}of e3)c.hasAttribute(u)&&l.add(...d)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){kd()},e.\u0275dir=Be({type:e,inputs:{color:"color",disableRipple:[pe.HasDecoratorInputTransform,"disableRipple","disableRipple",En],disabled:[pe.HasDecoratorInputTransform,"disabled","disabled",En],ariaDisabled:[pe.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",En],disabledInteractive:[pe.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",En]},features:[ar]});let t=e;return t})();var mP=(()=>{let e=class e extends t3{constructor(i,r,o,s){super(i,r,o,s)}};e.\u0275fac=function(r){return new(r||e)(M(Ge),M(Xt),M(O),M(dc,8))},e.\u0275cmp=nt({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(yi("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),JC(o.color?"mat-"+o.color:""),zn("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[sr,it],attrs:YG,ngContentSelectors:XG,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(Hd(ZG),sn(0,"span",0),Rs(1),j(2,"span",1),Rs(3,1),P(),Rs(4,2),sn(5,"span",2)(6,"span",3)),r&2&&zn("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let t=e;return t})();var gP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ie({imports:[Mn,hP,Mn]});let t=e;return t})();var _P=(()=>{let e=class e{constructor(i){this.router=i}Ingresar(){this.router.navigate(["login"])}Registrarse(){this.router.navigate(["signUp"])}QuienSoy(){this.router.navigate(["quien-soy"])}};e.\u0275fac=function(r){return new(r||e)(M(Ft))},e.\u0275cmp=nt({type:e,selectors:[["app-home"]],standalone:!0,features:[it],decls:6,vars:0,consts:[["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","accent",3,"click"]],template:function(r,o){r&1&&(j(0,"button",0),Ke("click",function(){return o.Ingresar()}),oe(1,"Ingresar"),P(),j(2,"button",1),Ke("click",function(){return o.Registrarse()}),oe(3,"Crear Cuenta"),P(),j(4,"button",2),Ke("click",function(){return o.QuienSoy()}),oe(5,"Quien Soy"),P())},dependencies:[pP,gP,mP]});let t=e;return t})();var vP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=nt({type:e,selectors:[["app-quien-soy"]],standalone:!0,features:[it],decls:15,vars:0,consts:[[1,"contenedor-imagen"],["src","../../../assets/imagenAlumno.jpg","alt","Foto Alumno"]],template:function(r,o){r&1&&(j(0,"div")(1,"label"),oe(2,"Nombre Alumno: "),P(),j(3,"p"),oe(4,"Tobias Nahuel Moretti"),P(),j(5,"label"),oe(6,"Legajo: "),P(),j(7,"p"),oe(8,"111024"),P(),j(9,"label"),oe(10,"Dni: "),P(),j(11,"p"),oe(12,"41668744"),P(),j(13,"div",0),sn(14,"img",1),P()())},styles:[".contenedor-imagen[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto;display:block}"]});let t=e;return t})();function i3(t,e){if(t&1&&(j(0,"h2",3),oe(1),P()),t&2){let n=In();Me(),bi("Usuario registrado: ",n.usuarioLogeado,"")}}function r3(t,e){if(t&1&&(j(0,"p",3),oe(1),P()),t&2){let n=In();Me(),lr(n.mensaje)}}var yP=(()=>{let e=class e{constructor(i){this.auth=i,this.nuevoMail="",this.nuevaClave="",this.router=new Ft,this.usuarioLogeado="",this.errorDeDatos=!1,this.mensaje=""}Registrarse(){aA(this.auth,this.nuevoMail,this.nuevaClave).then(i=>{i.user.email!==null&&(this.usuarioLogeado=i.user.email),this.errorDeDatos=!1,this.mensaje="Usuario Logeado",this.router.navigate(["home"])}).catch(i=>{switch(this.errorDeDatos=!0,i.code){case"auth/invalid-email":this.mensaje="Email invalido";break;case"auth/email-already-in-use":this.mensaje="Email ya en uso";break;default:this.mensaje=i.code;break}})}};e.\u0275fac=function(r){return new(r||e)(M(Fi))},e.\u0275cmp=nt({type:e,selectors:[["app-sign-up"]],standalone:!0,features:[it],decls:12,vars:4,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"text-center","text-primary"],[1,"form-control","my-2",3,"ngModelChange","ngModel"],[1,"d-grid","gap-2"],[1,"btn","btn-primary",3,"click"]],template:function(r,o){r&1&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),oe(4,"Ingresar usuario"),P(),j(5,"input",4),Ii("ngModelChange",function(a){return ur(o.nuevoMail,a)||(o.nuevoMail=a),a}),P(),j(6,"input",4),Ii("ngModelChange",function(a){return ur(o.nuevaClave,a)||(o.nuevaClave=a),a}),P(),j(7,"div",5)(8,"button",6),Ke("click",function(){return o.Registrarse()}),oe(9,"Registrarse"),P()(),wn(10,i3,2,1,"h2",3)(11,r3,2,1,"p",3),P()()()),r&2&&(Me(5),wi("ngModel",o.nuevoMail),Me(),wi("ngModel",o.nuevaClave),Me(4),cr(10,o.usuarioLogeado!=""?10:-1),Me(),cr(11,o.errorDeDatos?11:-1))},dependencies:[Ca,Rr,xa,jo,Si,Dh]});let t=e;return t})();function o3(t,e){if(t&1){let n=$d();j(0,"button",7),Ke("click",function(){Sd(n);let r=In();return Ad(r.CerrarSesion())}),oe(1,"Cerrar sesi\xF3n"),P()}}function s3(t,e){if(t&1){let n=$d();j(0,"button",7),Ke("click",function(){Sd(n);let r=In();return Ad(r.Login())}),oe(1,"Login"),P()}}function a3(t,e){if(t&1&&(j(0,"h2",3),oe(1),P()),t&2){let n=In();Me(),bi("Usuario logueado: ",n.auth.currentUser==null?null:n.auth.currentUser.email,"")}}var bP=(()=>{let e=class e{constructor(i){this.auth=i,this.mailUsuario="",this.claveUsuario="",this.usuarioLogeado="",this.errorDeDatos=!1,this.mensaje="",this.router=new Ft}Login(){lA(this.auth,this.mailUsuario,this.claveUsuario).then(()=>{this.router.navigate(["home"])}).catch(i=>{switch(this.errorDeDatos=!0,i.code){case"auth/invalid-email":this.mensaje="Email invalido";break;case"auth/email-already-in-use":this.mensaje="Email ya en uso";break;default:this.mensaje=i.code;break}})}CerrarSesion(){uA(this.auth).then(()=>{console.log(this.auth.currentUser?.email)})}};e.\u0275fac=function(r){return new(r||e)(M(Fi))},e.\u0275cmp=nt({type:e,selectors:[["app-verificacion-login"]],standalone:!0,features:[it],decls:11,vars:4,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"text-center","text-primary"],[1,"form-control","my-2",3,"ngModelChange","ngModel"],[1,"d-grid","gap-2"],[1,"btn","btn-primary"],[1,"btn","btn-primary",3,"click"]],template:function(r,o){r&1&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),oe(4,"Ingresar usuario"),P(),j(5,"input",4),Ii("ngModelChange",function(a){return ur(o.mailUsuario,a)||(o.mailUsuario=a),a}),P(),j(6,"input",4),Ii("ngModelChange",function(a){return ur(o.claveUsuario,a)||(o.claveUsuario=a),a}),P(),j(7,"div",5),wn(8,o3,2,0,"button",6)(9,s3,2,0),P(),wn(10,a3,2,1,"h2",3),P()()()),r&2&&(Me(5),wi("ngModel",o.mailUsuario),Me(),wi("ngModel",o.claveUsuario),Me(2),cr(8,o.auth.currentUser!=null&&o.auth.currentUser.email?8:9),Me(2),cr(10,o.auth.currentUser!=null&&o.auth.currentUser.email?10:-1))},dependencies:[Si,Ca,Rr,xa,jo,Dh]});let t=e;return t})();var wP=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"firestore",component:mI},{path:"home",component:_P},{path:"login",component:bP},{path:"signUp",component:yP},{path:"quien-soy",component:vP},{path:"**",component:mI}];var IP="@firebase/database",EP="1.0.4";var D0="";function c3(t){D0=t}var FI=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ot(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Bs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var LI=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Kn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var tk=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new FI(e)}}catch{}return new LI},zo=tk("localStorage"),VI=tk("sessionStorage");var Ma=new Qn("@firebase/database"),l3=function(){let t=1;return function(){return t++}}(),nk=function(t){let e=QT(t),n=new Th;n.update(e);let i=n.digest();return Sh.encodeByteArray(i)},du=function(...t){let e="";for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=du.apply(null,i):typeof i=="object"?e+=ot(i):e+=i,e+=" "}return e},qo=null,xP=!0,u3=function(t,e){I(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ma.logLevel=J.VERBOSE,qo=Ma.log.bind(Ma),e&&VI.set("logging_enabled",!0)):typeof t=="function"?qo=t:(qo=null,VI.remove("logging_enabled"))},xt=function(...t){if(xP===!0&&(xP=!1,qo===null&&VI.get("logging_enabled")===!0&&u3(!0)),qo){let e=du.apply(null,t);qo(e)}},hu=function(t){return function(...e){xt(t,...e)}},jI=function(...t){let e="FIREBASE INTERNAL ERROR: "+du(...t);Ma.error(e)},qi=function(...t){let e=`FIREBASE FATAL ERROR: ${du(...t)}`;throw Ma.error(e),new Error(e)},Jt=function(...t){let e="FIREBASE WARNING: "+du(...t);Ma.warn(e)},d3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Jt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ik=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},h3=function(t){if(Gn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Pa="[MIN_NAME]",Wo="[MAX_NAME]",Ua=function(t,e){if(t===e)return 0;if(t===Pa||e===Wo)return-1;if(e===Pa||t===Wo)return 1;{let n=CP(t),i=CP(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},f3=function(t,e){return t===e?0:t<e?-1:1},Jl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ot(e))},T0=function(t){if(typeof t!="object"||t===null)return ot(t);let e=[];for(let i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=ot(e[i]),n+=":",n+=T0(t[e[i]]);return n+="}",n},rk=function(t,e){let n=t.length;if(n<=e)return[t];let i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function mn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var ok=function(t){I(!ik(t),"Invalid JSON number");let e=11,n=52,i=(1<<e-1)-1,r,o,s,a,c;t===0?(o=0,s=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=a+i,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-i-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(r?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},p3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},m3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var g3=new RegExp("^-?(0*)\\d{1,10}$"),_3=-2147483648,v3=2147483647,CP=function(t){if(g3.test(t)){let e=Number(t);if(e>=_3&&e<=v3)return e}return null},fu=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Jt("Exception was thrown by user callback.",n),e},Math.floor(0))}},y3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ru=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var UI=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Jt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var BI=class{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(xt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Jt(e)}},ou=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Rp="5",sk="v",ak="s",ck="r",lk="f",uk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dk="ls",hk="p",$I="ac",fk="websocket",pk="long_polling";var Mp=class{constructor(e,n,i,r,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function b3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function mk(t,e,n){I(typeof e=="string","typeof type must == string"),I(typeof n=="object","typeof params must == object");let i;if(e===fk)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===pk)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);b3(t)&&(n.ns=t.namespace);let r=[];return mn(n,(o,s)=>{r.push(o+"="+s)}),i+r.join("&")}var HI=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Kn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return VT(this.counters_)}};var AI={},RI={};function S0(t){let e=t.toString();return AI[e]||(AI[e]=new HI),AI[e]}function w3(t,e){let n=t.toString();return RI[n]||(RI[n]=e()),RI[n]}var zI=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&fu(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var DP="start",I3="close",E3="pLPCommand",x3="pRTLPCB",gk="id",_k="pw",vk="ser",C3="cb",D3="seg",T3="ts",S3="d",A3="dframe",yk=1870,bk=30,R3=yk-bk,M3=25e3,N3=3e4,qI=class t{constructor(e,n,i,r,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hu(e),this.stats_=S0(n),this.urlFn=c=>(this.appCheckToken&&(c[$I]=this.appCheckToken),mk(n,pk,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new zI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(N3)),h3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new WI((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===DP)this.id=a,this.password=c;else if(s===I3)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[DP]="t",i[vk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[C3]=this.scriptTagHolder.uniqueCallbackIdentifier),i[sk]=Rp,this.transportSessionId&&(i[ak]=this.transportSessionId),this.lastSessionId&&(i[dk]=this.lastSessionId),this.applicationId&&(i[hk]=this.applicationId),this.appCheckToken&&(i[$I]=this.appCheckToken),typeof location<"u"&&location.hostname&&uk.test(location.hostname)&&(i[ck]=lk);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Gn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!p3()&&!m3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=ot(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=hv(n),r=rk(i,R3);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Gn())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[A3]="t",i[gk]=e,i[_k]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=ot(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},WI=class t{constructor(e,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Gn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=l3(),window[E3+this.uniqueCallbackIdentifier]=e,window[x3+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){xt("frame writing exception"),a.stack&&xt(a.stack),xt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||xt("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[gk]=this.myID,e[_k]=this.myPW,e[vk]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+bk+i.length<=yk;){let s=this.pendingSegs.shift();i=i+"&"+D3+r+"="+s.seg+"&"+T3+r+"="+s.ts+"&"+S3+r+"="+s.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(M3)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){Gn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{xt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var P3=16384,k3=45e3,Np=null;typeof MozWebSocket<"u"?Np=MozWebSocket:typeof WebSocket<"u"&&(Np=WebSocket);var eu=(()=>{class t{constructor(n,i,r,o,s,a,c){this.connId=n,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hu(this.connId),this.stats_=S0(i),this.connURL=t.connectionURL_(i,a,c,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,r,o,s){let a={};return a[sk]=Rp,!Gn()&&typeof location<"u"&&location.hostname&&uk.test(location.hostname)&&(a[ck]=lk),i&&(a[ak]=i),r&&(a[dk]=r),o&&(a[$I]=o),s&&(a[hk]=s),mk(n,fk,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zo.set("previous_websocket_failure",!0);try{let r;if(Gn()){let o=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Rp}/${D0}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Np(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&Np!==null&&!t.forceDisallow_}static previouslyFailed(){return zo.isInMemoryStorage||zo.get("previous_websocket_failure")===!0}markConnectionHealthy(){zo.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=Bs(i);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(I(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();let i=ot(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=rk(i,P3);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(k3))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),O3=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[qI,eu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=eu&&eu.isAvailable(),r=i&&!eu.previouslyFailed();if(n.webSocketOnly&&(i||Jt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[eu];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),F3=6e4,L3=5e3,V3=10*1024,j3=100*1024,MI="t",TP="d",U3="s",SP="r",B3="e",AP="o",RP="a",MP="n",NP="p",$3="h",GI=class{constructor(e,n,i,r,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hu("c:"+this.id+":"),this.transportManager_=new O3(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=ru(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>j3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>V3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(MI in e){let n=e[MI];n===RP?this.upgradeIfSecondaryHealthy_():n===SP?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===AP&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Jl("t",e),i=Jl("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:NP,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:RP,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:MP,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Jl("t",e),i=Jl("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Jl(MI,e);if(TP in e){let i=e[TP];if(n===$3){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===MP){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===U3?this.onConnectionShutdown_(i):n===SP?this.onReset_(i):n===B3?jI("Server Error: "+i):n===AP?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jI("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Rp!==i&&Jt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),ru(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(F3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ru(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(L3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:NP,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Pp=class{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}};var kp=class{constructor(e){this.allowedEvents_=e,this.listeners_={},I(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});let r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){I(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Op=class t extends kp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Hc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return I(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var PP=32,kP=768,Ee=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function be(){return new Ee("")}function ae(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Pr(t){return t.pieces_.length-t.pieceNum_}function Se(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ee(t.pieces_,e)}function wk(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function H3(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ik(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Ek(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ee(e,0)}function lt(t,e){let n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Ee)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Ee(n,0)}function ne(t){return t.pieceNum_>=t.pieces_.length}function fn(t,e){let n=ae(t),i=ae(e);if(n===null)return e;if(n===i)return fn(Se(t),Se(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function xk(t,e){if(Pr(t)!==Pr(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Pn(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Pr(t)>Pr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}var KI=class{constructor(e,n){this.errorPrefix_=n,this.parts_=Ik(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Wc(this.parts_[i]);Ck(this)}};function z3(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Wc(e),Ck(t)}function q3(t){let e=t.parts_.pop();t.byteLength_-=Wc(e),t.parts_.length>0&&(t.byteLength_-=1)}function Ck(t){if(t.byteLength_>kP)throw new Error(t.errorPrefix_+"has a key path longer than "+kP+" bytes ("+t.byteLength_+").");if(t.parts_.length>PP)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+PP+") or object contains a cycle "+Ho(t))}function Ho(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var QI=class t extends kp{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new t}getInitialEvent(e){return I(e==="visible","Unknown event type: "+e),[this.visible_]}};var tu=1e3,W3=60*5*1e3,OP=30*1e3,G3=1.3,K3=3e4,Q3="server_kill",FP=3,A0=(()=>{class t extends Pp{constructor(n,i,r,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=hu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tu,this.maxReconnectDelay_=W3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Gn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");QI.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Op.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,r){let o=++this.requestNumber_,s={r:o,a:n,b:i};this.log_(ot(s)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[o]=r)}get(n){this.initConnection_();let i=new so,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),i.promise}listen(n,i,r,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:i,query:n,tag:r};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(n){let i=n.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);let s={p:r},a="q";n.tag&&(s.q=i._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,i),(this.listens.get(r)&&this.listens.get(r).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(r,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&Kn(n,"w")){let r=co(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',s=i._path.toString();Jt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||WT(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=OP)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=qT(n)?"auth":"gauth",r={cred:n};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,r=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(n,i){let r=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,n._queryObject,i)}sendUnlisten_(n,i,r,o){this.log_("Unlisten on "+n+" for "+i);let s={p:n},a="n";o&&(s.q=r,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:r})}onDisconnectMerge(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:r})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,r,o){let s={p:i,d:r};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,i,r,o){this.putInternal("p",n,i,r,o)}merge(n,i,r,o){this.putInternal("m",n,i,r,o)}putInternal(n,i,r,o,s){this.initConnection_();let a={p:i,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,r,s=>{this.log_(i+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+ot(n));let i=n.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):jI("Unrecognized action received from server: "+ot(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tu,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=tu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>K3&&(this.reconnectDelay_=tu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*G3)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,r())},u=function(h){I(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?xt("getToken() completed but was canceled"):(xt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new GI(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,r,m=>{Jt(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(Q3)},s))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Jt(h),l())}}})}interrupt(n){xt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){xt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],zc(this.interruptReasons_)&&(this.reconnectDelay_=tu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let r;i?r=i.map(s=>T0(s)).join("$"):r="default";let o=this.removeListen_(n,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,i){let r=new Ee(n).toString(),o;if(this.listens.has(r)){let s=this.listens.get(r);o=s.get(i),s.delete(i),s.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(n,i){xt("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=FP&&(this.reconnectDelay_=OP,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){xt("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=FP&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";Gn()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+D0.replace(/\./g,"-")]=1,Hc()?n["framework.cordova"]=1:Nh()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Op.getInstance().currentlyOnline();return zc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),ce=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var ka=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let i=new ce(Pa,e),r=new ce(Pa,n);return this.compare(i,r)!==0}minPost(){return ce.MIN}};var Ap,Fp=class extends ka{static get __EMPTY_NODE(){return Ap}static set __EMPTY_NODE(e){Ap=e}compare(e,n){return Ua(e.name,n.name)}isDefinedOn(e){throw ao("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ce.MIN}maxPost(){return new ce(Wo,Ap)}makePost(e,n){return I(typeof e=="string","KeyIndex indexValue must always be a string."),new ce(e,Ap)}toString(){return".key"}},Na=new Fp;var Aa=class{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?i(e.key,n):1,r&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Nn=(()=>{class t{constructor(n,i,r,o,s){this.key=n,this.value=i,this.color=r??t.RED,this.left=o??pn.EMPTY_NODE,this.right=s??pn.EMPTY_NODE}copy(n,i,r,o,s){return new t(n??this.key,i??this.value,r??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let o=this,s=r(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,i,r),null):s===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return pn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let r,o;if(r=this,i(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(n,r.key)===0){if(r.right.isEmpty())return pn.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),YI=class{copy(e,n,i,r,o){return this}insert(e,n,i){return new Nn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},pn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Nn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nn.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Aa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Aa(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Aa(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Aa(this.root_,null,this.comparator_,!0,e)}};pn.EMPTY_NODE=new YI;function Y3(t,e){return Ua(t.name,e.name)}function R0(t,e){return Ua(t,e)}var ZI;function Z3(t){ZI=t}var Dk=function(t){return typeof t=="number"?"number:"+ok(t):"string:"+t},Tk=function(t){if(t.isLeafNode()){let e=t.val();I(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Kn(e,".sv"),"Priority must be a string or number.")}else I(t===ZI||t.isEmpty(),"priority of unexpected type.");I(t===ZI||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var LP,Oa=(()=>{class t{constructor(n,i=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,I(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Tk(this.priorityNode_)}static set __childrenNodeConstructor(n){LP=n}static get __childrenNodeConstructor(){return LP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ne(n)?this:ae(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let r=ae(n);return r===null?i:i.isEmpty()&&r!==".priority"?this:(I(r!==".priority"||Pr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Se(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Dk(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=ok(this.value_):n+=this.value_,this.lazyHash_=nk(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(I(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(i),s=t.VALUE_TYPE_ORDER.indexOf(r);return I(o>=0,"Unknown leaf type: "+i),I(s>=0,"Unknown leaf type: "+r),o===s?r==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),Sk,Ak;function X3(t){Sk=t}function J3(t){Ak=t}var XI=class extends ka{compare(e,n){let i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?Ua(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ce.MIN}maxPost(){return new ce(Wo,new Oa("[PRIORITY-POST]",Ak))}makePost(e,n){let i=Sk(e);return new ce(n,new Oa("[PRIORITY-POST]",i))}toString(){return".priority"}},Dt=new XI;var e6=Math.log(2),JI=class{constructor(e){let n=o=>parseInt(Math.log(o)/e6,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Lp=function(t,e,n,i){t.sort(e);let r=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new Nn(h,d.node,Nn.BLACK,null,null);{let f=parseInt(u/2,10)+c,m=r(c,f),g=r(f+1,l);return d=t[f],h=n?n(d):d,new Nn(h,d.node,Nn.BLACK,m,g)}},o=function(c){let l=null,u=null,d=t.length,h=function(m,g){let _=d-m,C=d;d-=m;let z=r(_+1,C),G=t[_],ye=n?n(G):G;f(new Nn(ye,G.node,g,null,z))},f=function(m){l?(l.left=m,l=m):(u=m,l=m)};for(let m=0;m<c.count;++m){let g=c.nextBitIsOne(),_=Math.pow(2,c.count-(m+1));g?h(_,Nn.BLACK):(h(_,Nn.BLACK),h(_,Nn.RED))}return u},s=new JI(t.length),a=o(s);return new pn(i||e,a)};var NI,Sa={},Fa=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return I(Sa&&Dt,"ChildrenNode.ts has not been loaded"),NI=NI||new t({".priority":Sa},{".priority":Dt}),NI}get(e){let n=co(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof pn?n:null}hasIndex(e){return Kn(this.indexSet_,e.toString())}addIndex(e,n){I(e!==Na,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,o=n.getIterator(ce.Wrap),s=o.getNext();for(;s;)r=r||e.isDefinedOn(s.node),i.push(s),s=o.getNext();let a;r?a=Lp(i,e.getCompare()):a=Sa;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let i=qc(this.indexes_,(r,o)=>{let s=co(this.indexSet_,o);if(I(s,"Missing index implementation for "+o),r===Sa)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(ce.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Lp(a,s.getCompare())}else return Sa;else{let a=n.get(e.name),c=r;return a&&(c=c.remove(new ce(e.name,a))),c.insert(e,e.node)}});return new t(i,this.indexSet_)}removeFromIndexes(e,n){let i=qc(this.indexes_,r=>{if(r===Sa)return r;{let o=n.get(e.name);return o?r.remove(new ce(e.name,o)):r}});return new t(i,this.indexSet_)}};var nu,Ne=(()=>{class t{constructor(n,i,r){this.children_=n,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Tk(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return nu||(nu=new t(new pn(R0),null,Fa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nu}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?nu:i}}getChild(n){let i=ae(n);return i===null?this:this.getImmediateChild(i).getChild(Se(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(I(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let r=new ce(n,i),o,s;i.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(n,i),s=this.indexMap_.addToIndexes(r,this.children_));let a=o.isEmpty()?nu:this.priorityNode_;return new t(o,a,s)}}updateChild(n,i){let r=ae(n);if(r===null)return i;{I(ae(n)!==".priority"||Pr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(r).updateChild(Se(n),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},r=0,o=0,s=!0;if(this.forEachChild(Dt,(a,c)=>{i[a]=c.val(n),r++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*r){let a=[];for(let c in i)a[c]=i[c];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Dk(this.getPriority().val())+":"),this.forEachChild(Dt,(i,r)=>{let o=r.hash();o!==""&&(n+=":"+i+":"+o)}),this.lazyHash_=n===""?"":nk(n)}return this.lazyHash_}getPredecessorChildName(n,i,r){let o=this.resolveIndex_(r);if(o){let s=o.getPredecessorKey(new ce(n,i));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new ce(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new ce(i,this.children_.get(i)):null}forEachChild(n,i){let r=this.resolveIndex_(n);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,ce.Wrap),s=o.peek();for(;s!=null&&i.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,ce.Wrap),s=o.peek();for(;s!=null&&i.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===pu?-1:0}withIndex(n){if(n===Na||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===Na||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(Dt),o=i.getIterator(Dt),s=r.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Na?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),e0=class extends Ne{constructor(){super(new pn(R0),Ne.EMPTY_NODE,Fa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ne.EMPTY_NODE}isEmpty(){return!1}},pu=new e0;Object.defineProperties(ce,{MIN:{value:new ce(Pa,Ne.EMPTY_NODE)},MAX:{value:new ce(Wo,pu)}});Fp.__EMPTY_NODE=Ne.EMPTY_NODE;Oa.__childrenNodeConstructor=Ne;Z3(pu);J3(pu);var t6=!0;function Ct(t,e=null){if(t===null)return Ne.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),I(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Oa(n,Ct(e))}if(!(t instanceof Array)&&t6){let n=[],i=!1;if(mn(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=Ct(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),n.push(new ce(s,c)))}}),n.length===0)return Ne.EMPTY_NODE;let o=Lp(n,Y3,s=>s.name,R0);if(i){let s=Lp(n,Dt.getCompare());return new Ne(o,Ct(e),new Fa({".priority":s},{".priority":Dt}))}else return new Ne(o,Ct(e),Fa.Default)}else{let n=Ne.EMPTY_NODE;return mn(t,(i,r)=>{if(Kn(t,i)&&i.substring(0,1)!=="."){let o=Ct(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(Ct(e))}}X3(Ct);var t0=class extends ka{constructor(e){super(),this.indexPath_=e,I(!ne(e)&&ae(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?Ua(e.name,n.name):o}makePost(e,n){let i=Ct(e),r=Ne.EMPTY_NODE.updateChild(this.indexPath_,i);return new ce(n,r)}maxPost(){let e=Ne.EMPTY_NODE.updateChild(this.indexPath_,pu);return new ce(Wo,e)}toString(){return Ik(this.indexPath_,0).join("/")}};var n0=class extends ka{compare(e,n){let i=e.node.compareTo(n.node);return i===0?Ua(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ce.MIN}maxPost(){return ce.MAX}makePost(e,n){let i=Ct(e);return new ce(n,i)}toString(){return".value"}},n6=new n0;function i6(t){return{type:"value",snapshotNode:t}}function r6(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function o6(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function VP(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function s6(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var i0=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Pa}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Dt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function jP(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Dt?n="$priority":t.index_===n6?n="$value":t.index_===Na?n="$key":(I(t.index_ instanceof t0,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ot(n),t.startSet_){let i=t.startAfterSet_?"startAfter":"startAt";e[i]=ot(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+ot(t.indexStartName_))}if(t.endSet_){let i=t.endBeforeSet_?"endBefore":"endAt";e[i]=ot(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+ot(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function UP(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Dt&&(e.i=t.index_.toString()),e}var r0=class t extends Pp{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=hu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(I(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,i),a={};this.listens_[s]=a;let c=jP(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,i),co(this.listens_,s)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",r(h,null)}})}unlisten(e,n){let i=t.getListenId_(e,n);delete this.listens_[i]}get(e){let n=jP(e._queryParams),i=e._path.toString(),r=new so;return this.restRequest_(i+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+uo(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Bs(a.responseText)}catch{Jt("Failed to parse JSON response for "+s+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&Jt("Got unsuccessful REST response for "+s+" Status: "+a.status),i(a.status);i=null}},a.open("GET",s,!0),a.send()})}};var o0=class{constructor(){this.rootNode_=Ne.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Vp(){return{value:null,children:new Map}}function Rk(t,e,n){if(ne(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let i=ae(e);t.children.has(i)||t.children.set(i,Vp());let r=t.children.get(i);e=Se(e),Rk(r,e,n)}}function s0(t,e,n){t.value!==null?n(e,t.value):a6(t,(i,r)=>{let o=new Ee(e.toString()+"/"+i);s0(r,o,n)})}function a6(t,e){t.children.forEach((n,i)=>{e(i,n)})}var a0=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&mn(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}};var BP=10*1e3,c6=30*1e3,l6=5*60*1e3,c0=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new a0(e);let i=BP+(c6-BP)*Math.random();ru(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),n={},i=!1;mn(e,(r,o)=>{o>0&&Kn(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),ru(this.reportStats_.bind(this),Math.floor(Math.random()*2*l6))}};var zi=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(zi||{});function Mk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Nk(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Pk(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var l0=class t{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=zi.ACK_USER_WRITE,this.source=Mk()}operationForChild(e){if(ne(this.path)){if(this.affectedTree.value!=null)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Ee(e));return new t(be(),n,this.revert)}}else return I(ae(this.path)===e,"operationForChild called for unrelated child."),new t(Se(this.path),this.affectedTree,this.revert)}};var La=class t{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=zi.OVERWRITE}operationForChild(e){return ne(this.path)?new t(this.source,be(),this.snap.getImmediateChild(e)):new t(this.source,Se(this.path),this.snap)}};var jp=class t{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=zi.MERGE}operationForChild(e){if(ne(this.path)){let n=this.children.subtree(new Ee(e));return n.isEmpty()?null:n.value?new La(this.source,be(),n.value):new t(this.source,be(),n)}else return I(ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Se(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var cu=class{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ne(e))return this.isFullyInitialized()&&!this.filtered_;let n=ae(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function u6(t,e,n,i){let r=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(s6(s.childName,s.snapshotNode))}),iu(t,r,"child_removed",e,i,n),iu(t,r,"child_added",e,i,n),iu(t,r,"child_moved",o,i,n),iu(t,r,"child_changed",e,i,n),iu(t,r,"value",e,i,n),r}function iu(t,e,n,i,r,o){let s=i.filter(a=>a.type===n);s.sort((a,c)=>h6(t,a,c)),s.forEach(a=>{let c=d6(t,a,o);r.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function d6(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function h6(t,e,n){if(e.childName==null||n.childName==null)throw ao("Should only compare child_ events.");let i=new ce(e.childName,e.snapshotNode),r=new ce(n.childName,n.snapshotNode);return t.index_.compare(i,r)}function kk(t,e){return{eventCache:t,serverCache:e}}function su(t,e,n,i){return kk(new cu(e,n,i),t.serverCache)}function Ok(t,e,n,i){return kk(t.eventCache,new cu(e,n,i))}function u0(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Go(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var PI,f6=()=>(PI||(PI=new pn(f3)),PI),jt=class t{constructor(e,n=f6()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return mn(e,(i,r)=>{n=n.set(new Ee(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:be(),value:this.value};if(ne(e))return null;{let i=ae(e),r=this.children.get(i);if(r!==null){let o=r.findRootMostMatchingPathAndValue(Se(e),n);return o!=null?{path:lt(new Ee(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ne(e))return this;{let n=ae(e),i=this.children.get(n);return i!==null?i.subtree(Se(e)):new t(null)}}set(e,n){if(ne(e))return new t(n,this.children);{let i=ae(e),o=(this.children.get(i)||new t(null)).set(Se(e),n),s=this.children.insert(i,o);return new t(this.value,s)}}remove(e){if(ne(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=ae(e),i=this.children.get(n);if(i){let r=i.remove(Se(e)),o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(ne(e))return this.value;{let n=ae(e),i=this.children.get(n);return i?i.get(Se(e)):null}}setTree(e,n){if(ne(e))return n;{let i=ae(e),o=(this.children.get(i)||new t(null)).setTree(Se(e),n),s;return o.isEmpty()?s=this.children.remove(i):s=this.children.insert(i,o),new t(this.value,s)}}fold(e){return this.fold_(be(),e)}fold_(e,n){let i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(lt(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,be(),n)}findOnPath_(e,n,i){let r=this.value?i(n,this.value):!1;if(r)return r;if(ne(e))return null;{let o=ae(e),s=this.children.get(o);return s?s.findOnPath_(Se(e),lt(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,be(),n)}foreachOnPath_(e,n,i){if(ne(e))return this;{this.value&&i(n,this.value);let r=ae(e),o=this.children.get(r);return o?o.foreachOnPath_(Se(e),lt(n,r),i):new t(null)}}foreach(e){this.foreach_(be(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(lt(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}};var kn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new jt(null))}};function au(t,e,n){if(ne(e))return new kn(new jt(n));{let i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,o=i.value,s=fn(r,e);return o=o.updateChild(s,n),new kn(t.writeTree_.set(r,o))}else{let r=new jt(n),o=t.writeTree_.setTree(e,r);return new kn(o)}}}function $P(t,e,n){let i=t;return mn(n,(r,o)=>{i=au(i,lt(e,r),o)}),i}function HP(t,e){if(ne(e))return kn.empty();{let n=t.writeTree_.setTree(e,new jt(null));return new kn(n)}}function d0(t,e){return Ko(t,e)!=null}function Ko(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(fn(n.path,e)):null}function zP(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Dt,(i,r)=>{e.push(new ce(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new ce(i,r.value))}),e}function Nr(t,e){if(ne(e))return t;{let n=Ko(t,e);return n!=null?new kn(new jt(n)):new kn(t.writeTree_.subtree(e))}}function h0(t){return t.writeTree_.isEmpty()}function Va(t,e){return Fk(be(),t.writeTree_,e)}function Fk(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(I(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=Fk(lt(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(lt(t,".priority"),i)),n}}function Lk(t,e){return $k(e,t)}function p6(t,e,n,i,r){I(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=au(t.visibleWrites,e,n)),t.lastWriteId=i}function m6(t,e){for(let n=0;n<t.allWrites.length;n++){let i=t.allWrites[n];if(i.writeId===e)return i}return null}function g6(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);I(n>=0,"removeWrite called with nonexistent writeId.");let i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,s=t.allWrites.length-1;for(;r&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&_6(a,i.path)?r=!1:Pn(i.path,a.path)&&(o=!0)),s--}if(r){if(o)return v6(t),!0;if(i.snap)t.visibleWrites=HP(t.visibleWrites,i.path);else{let a=i.children;mn(a,c=>{t.visibleWrites=HP(t.visibleWrites,lt(i.path,c))})}return!0}else return!1}function _6(t,e){if(t.snap)return Pn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Pn(lt(t.path,n),e))return!0;return!1}function v6(t){t.visibleWrites=Vk(t.allWrites,y6,be()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function y6(t){return t.visible}function Vk(t,e,n){let i=kn.empty();for(let r=0;r<t.length;++r){let o=t[r];if(e(o)){let s=o.path,a;if(o.snap)Pn(n,s)?(a=fn(n,s),i=au(i,a,o.snap)):Pn(s,n)&&(a=fn(s,n),i=au(i,be(),o.snap.getChild(a)));else if(o.children){if(Pn(n,s))a=fn(n,s),i=$P(i,a,o.children);else if(Pn(s,n))if(a=fn(s,n),ne(a))i=$P(i,be(),o.children);else{let c=co(o.children,ae(a));if(c){let l=c.getChild(Se(a));i=au(i,be(),l)}}}else throw ao("WriteRecord should have .snap or .children")}}return i}function jk(t,e,n,i,r){if(!i&&!r){let o=Ko(t.visibleWrites,e);if(o!=null)return o;{let s=Nr(t.visibleWrites,e);if(h0(s))return n;if(n==null&&!d0(s,be()))return null;{let a=n||Ne.EMPTY_NODE;return Va(s,a)}}}else{let o=Nr(t.visibleWrites,e);if(!r&&h0(o))return n;if(!r&&n==null&&!d0(o,be()))return null;{let s=function(l){return(l.visible||r)&&(!i||!~i.indexOf(l.writeId))&&(Pn(l.path,e)||Pn(e,l.path))},a=Vk(t.allWrites,s,e),c=n||Ne.EMPTY_NODE;return Va(a,c)}}}function b6(t,e,n){let i=Ne.EMPTY_NODE,r=Ko(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Dt,(o,s)=>{i=i.updateImmediateChild(o,s)}),i;if(n){let o=Nr(t.visibleWrites,e);return n.forEachChild(Dt,(s,a)=>{let c=Va(Nr(o,new Ee(s)),a);i=i.updateImmediateChild(s,c)}),zP(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}else{let o=Nr(t.visibleWrites,e);return zP(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}}function w6(t,e,n,i,r){I(i||r,"Either existingEventSnap or existingServerSnap must exist");let o=lt(e,n);if(d0(t.visibleWrites,o))return null;{let s=Nr(t.visibleWrites,o);return h0(s)?r.getChild(n):Va(s,r.getChild(n))}}function I6(t,e,n,i){let r=lt(e,n),o=Ko(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){let s=Nr(t.visibleWrites,r);return Va(s,i.getNode().getImmediateChild(n))}else return null}function E6(t,e){return Ko(t.visibleWrites,e)}function x6(t,e,n,i,r,o,s){let a,c=Nr(t.visibleWrites,e),l=Ko(c,be());if(l!=null)a=l;else if(n!=null)a=Va(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(i,s):a.getIteratorFrom(i,s),f=h.getNext();for(;f&&u.length<r;)d(f,i)!==0&&u.push(f),f=h.getNext();return u}else return[]}function C6(){return{visibleWrites:kn.empty(),allWrites:[],lastWriteId:-1}}function f0(t,e,n,i){return jk(t.writeTree,t.treePath,e,n,i)}function Uk(t,e){return b6(t.writeTree,t.treePath,e)}function qP(t,e,n,i){return w6(t.writeTree,t.treePath,e,n,i)}function Up(t,e){return E6(t.writeTree,lt(t.treePath,e))}function D6(t,e,n,i,r,o){return x6(t.writeTree,t.treePath,e,n,i,r,o)}function M0(t,e,n){return I6(t.writeTree,t.treePath,e,n)}function Bk(t,e){return $k(lt(t.treePath,e),t.writeTree)}function $k(t,e){return{treePath:t,writeTree:e}}var p0=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,i=e.childName;I(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),I(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,VP(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,o6(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,r6(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,VP(i,e.snapshotNode,r.oldSnap));else throw ao("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var m0=class{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}},Hk=new m0,lu=class{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new cu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return M0(this.writes_,e,i)}}getChildAfterChild(e,n,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Go(this.viewCache_),o=D6(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}};function T6(t,e){I(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),I(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function S6(t,e,n,i,r){let o=new p0,s,a;if(n.type===zi.OVERWRITE){let l=n;l.source.fromUser?s=g0(t,e,l.path,l.snap,i,r,o):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ne(l.path),s=Bp(t,e,l.path,l.snap,i,r,a,o))}else if(n.type===zi.MERGE){let l=n;l.source.fromUser?s=R6(t,e,l.path,l.children,i,r,o):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=_0(t,e,l.path,l.children,i,r,a,o))}else if(n.type===zi.ACK_USER_WRITE){let l=n;l.revert?s=P6(t,e,l.path,i,r,o):s=M6(t,e,l.path,l.affectedTree,i,r,o)}else if(n.type===zi.LISTEN_COMPLETE)s=N6(t,e,n.path,i,o);else throw ao("Unknown operation type: "+n.type);let c=o.getChanges();return A6(e,s,c),{viewCache:s,changes:c}}function A6(t,e,n){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=u0(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(i6(u0(e)))}}function zk(t,e,n,i,r,o){let s=e.eventCache;if(Up(i,n)!=null)return e;{let a,c;if(ne(n))if(I(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Go(e),u=l instanceof Ne?l:Ne.EMPTY_NODE,d=Uk(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=f0(i,Go(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=ae(n);if(l===".priority"){I(Pr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=qP(i,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=Se(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let h=qP(i,n,s.getNode(),c);h!=null?d=s.getNode().getImmediateChild(l).updateChild(u,h):d=s.getNode().getImmediateChild(l)}else d=M0(i,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,r,o):a=s.getNode()}}return su(e,a,s.isFullyInitialized()||ne(n),t.filter.filtersNodes())}}function Bp(t,e,n,i,r,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(ne(n))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,i);l=u.updateFullNode(c.getNode(),f,null)}else{let f=ae(n);if(!c.isCompleteForPath(n)&&Pr(n)>1)return e;let m=Se(n),_=c.getNode().getImmediateChild(f).updateChild(m,i);f===".priority"?l=u.updatePriority(c.getNode(),_):l=u.updateChild(c.getNode(),f,_,m,Hk,null)}let d=Ok(e,l,c.isFullyInitialized()||ne(n),u.filtersNodes()),h=new lu(r,d,o);return zk(t,d,n,r,h,a)}function g0(t,e,n,i,r,o,s){let a=e.eventCache,c,l,u=new lu(r,e,o);if(ne(n))l=t.filter.updateFullNode(e.eventCache.getNode(),i,s),c=su(e,l,!0,t.filter.filtersNodes());else{let d=ae(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),i),c=su(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=Se(n),f=a.getNode().getImmediateChild(d),m;if(ne(h))m=i;else{let g=u.getCompleteChild(d);g!=null?wk(h)===".priority"&&g.getChild(Ek(h)).isEmpty()?m=g:m=g.updateChild(h,i):m=Ne.EMPTY_NODE}if(f.equals(m))c=e;else{let g=t.filter.updateChild(a.getNode(),d,m,h,u,s);c=su(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function WP(t,e){return t.eventCache.isCompleteForChild(e)}function R6(t,e,n,i,r,o,s){let a=e;return i.foreach((c,l)=>{let u=lt(n,c);WP(e,ae(u))&&(a=g0(t,a,u,l,r,o,s))}),i.foreach((c,l)=>{let u=lt(n,c);WP(e,ae(u))||(a=g0(t,a,u,l,r,o,s))}),a}function GP(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function _0(t,e,n,i,r,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;ne(n)?l=i:l=new jt(null).setTree(n,i);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),m=GP(t,f,h);c=Bp(t,c,new Ee(d),m,r,o,s,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let m=e.serverCache.getNode().getImmediateChild(d),g=GP(t,m,h);c=Bp(t,c,new Ee(d),g,r,o,s,a)}}),c}function M6(t,e,n,i,r,o,s){if(Up(r,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(i.value!=null){if(ne(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Bp(t,e,n,c.getNode().getChild(n),r,o,a,s);if(ne(n)){let l=new jt(null);return c.getNode().forEachChild(Na,(u,d)=>{l=l.set(new Ee(u),d)}),_0(t,e,n,l,r,o,a,s)}else return e}else{let l=new jt(null);return i.foreach((u,d)=>{let h=lt(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),_0(t,e,n,l,r,o,a,s)}}function N6(t,e,n,i,r){let o=e.serverCache,s=Ok(e,o.getNode(),o.isFullyInitialized()||ne(n),o.isFiltered());return zk(t,s,n,i,Hk,r)}function P6(t,e,n,i,r,o){let s;if(Up(i,n)!=null)return e;{let a=new lu(i,e,r),c=e.eventCache.getNode(),l;if(ne(n)||ae(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=f0(i,Go(e));else{let d=e.serverCache.getNode();I(d instanceof Ne,"serverChildren would be complete if leaf node"),u=Uk(i,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=ae(n),d=M0(i,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Se(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,Ne.EMPTY_NODE,Se(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=f0(i,Go(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||Up(i,be())!=null,su(e,l,s,t.filter.filtersNodes())}}function k6(t,e){let n=Go(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ne(e)&&!n.getImmediateChild(ae(e)).isEmpty())?n.getChild(e):null}function KP(t,e,n,i){e.type===zi.MERGE&&e.source.queryId!==null&&(I(Go(t.viewCache_),"We should always have a full cache before handling merges"),I(u0(t.viewCache_),"Missing event cache, even though we have a server cache"));let r=t.viewCache_,o=S6(t.processor_,r,e,n,i);return T6(t.processor_,o.viewCache),I(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,O6(t,o.changes,o.viewCache.eventCache.getNode(),null)}function O6(t,e,n,i){let r=i?[i]:t.eventRegistrations_;return u6(t.eventGenerator_,e,n,r)}var QP;function F6(t){I(!QP,"__referenceConstructor has already been defined"),QP=t}function N0(t,e,n,i){let r=e.source.queryId;if(r!==null){let o=t.views.get(r);return I(o!=null,"SyncTree gave us an op for an invalid query."),KP(o,e,n,i)}else{let o=[];for(let s of t.views.values())o=o.concat(KP(s,e,n,i));return o}}function P0(t,e){let n=null;for(let i of t.views.values())n=n||k6(i,e);return n}var YP;function L6(t){I(!YP,"__referenceConstructor has already been defined"),YP=t}var $p=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new jt(null),this.pendingWriteTree_=C6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function V6(t,e,n,i,r){return p6(t.pendingWriteTree_,e,n,i,r),r?zp(t,new La(Mk(),e,n)):[]}function Ra(t,e,n=!1){let i=m6(t.pendingWriteTree_,e);if(g6(t.pendingWriteTree_,e)){let o=new jt(null);return i.snap!=null?o=o.set(be(),!0):mn(i.children,s=>{o=o.set(new Ee(s),!0)}),zp(t,new l0(i.path,o,n))}else return[]}function Hp(t,e,n){return zp(t,new La(Nk(),e,n))}function j6(t,e,n){let i=jt.fromObject(n);return zp(t,new jp(Nk(),e,i))}function U6(t,e,n,i){let r=Kk(t,i);if(r!=null){let o=Qk(r),s=o.path,a=o.queryId,c=fn(s,e),l=new La(Pk(a),c,n);return Yk(t,s,l)}else return[]}function B6(t,e,n,i){let r=Kk(t,i);if(r){let o=Qk(r),s=o.path,a=o.queryId,c=fn(s,e),l=jt.fromObject(n),u=new jp(Pk(a),c,l);return Yk(t,s,u)}else return[]}function qk(t,e,n){let r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=fn(s,e),l=P0(a,c);if(l)return l});return jk(r,e,o,n,!0)}function zp(t,e){return Wk(e,t.syncPointTree_,null,Lk(t.pendingWriteTree_,be()))}function Wk(t,e,n,i){if(ne(t.path))return Gk(t,e,n,i);{let r=e.get(be());n==null&&r!=null&&(n=P0(r,be()));let o=[],s=ae(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=Bk(i,s);o=o.concat(Wk(a,c,l,u))}return r&&(o=o.concat(N0(r,t,i,n))),o}}function Gk(t,e,n,i){let r=e.get(be());n==null&&r!=null&&(n=P0(r,be()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=Bk(i,s),u=t.operationForChild(s);u&&(o=o.concat(Gk(u,a,c,l)))}),r&&(o=o.concat(N0(r,t,i,n))),o}function Kk(t,e){return t.tagToQueryMap.get(e)}function Qk(t){let e=t.indexOf("$");return I(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ee(t.substr(0,e))}}function Yk(t,e,n){let i=t.syncPointTree_.get(e);I(i,"Missing sync point for query tag that we're tracking");let r=Lk(t.pendingWriteTree_,e);return N0(i,n,r,null)}var v0=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},y0=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=lt(this.path_,e);return new t(this.syncTree_,n)}node(){return qk(this.syncTree_,this.path_)}},$6=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},ZP=function(t,e,n){if(!t||typeof t!="object")return t;if(I(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return H6(t[".sv"],e,n);if(typeof t[".sv"]=="object")return z6(t[".sv"],e);I(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},H6=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:I(!1,"Unexpected server value: "+t)}},z6=function(t,e,n){t.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let i=t.increment;typeof i!="number"&&I(!1,"Unexpected increment value: "+i);let r=e.node();if(I(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let s=r.getValue();return typeof s!="number"?i:s+i},q6=function(t,e,n,i){return k0(e,new y0(n,t),i)},W6=function(t,e,n){return k0(t,new v0(e),n)};function k0(t,e,n){let i=t.getPriority().val(),r=ZP(i,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=ZP(s.getValue(),e,n);return a!==s.getValue()||r!==s.getPriority().val()?new Oa(a,Ct(r)):t}else{let s=t;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new Oa(r))),s.forEachChild(Dt,(a,c)=>{let l=k0(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var uu=class{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}};function O0(t,e){let n=e instanceof Ee?e:new Ee(e),i=t,r=ae(n);for(;r!==null;){let o=co(i.node.children,r)||{children:{},childCount:0};i=new uu(r,i,o),n=Se(n),r=ae(n)}return i}function Ba(t){return t.node.value}function Zk(t,e){t.node.value=e,b0(t)}function Xk(t){return t.node.childCount>0}function G6(t){return Ba(t)===void 0&&!Xk(t)}function qp(t,e){mn(t.node.children,(n,i)=>{e(new uu(n,t,i))})}function Jk(t,e,n,i){n&&!i&&e(t),qp(t,r=>{Jk(r,e,!0,i)}),n&&i&&e(t)}function K6(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function mu(t){return new Ee(t.parent===null?t.name:mu(t.parent)+"/"+t.name)}function b0(t){t.parent!==null&&Q6(t.parent,t.name,t)}function Q6(t,e,n){let i=G6(n),r=Kn(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,b0(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,b0(t))}var Y6=/[\[\].#$\/\u0000-\u001F\u007F]/,Z6=/[\[\].#$\u0000-\u001F\u007F]/,kI=10*1024*1024,e1=function(t){return typeof t=="string"&&t.length!==0&&!Y6.test(t)},X6=function(t){return typeof t=="string"&&t.length!==0&&!Z6.test(t)},J6=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),X6(t)};var t1=function(t,e,n){let i=n instanceof Ee?new KI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ho(i));if(typeof e=="function")throw new Error(t+"contains a function "+Ho(i)+" with contents = "+e.toString());if(ik(e))throw new Error(t+"contains "+e.toString()+" "+Ho(i));if(typeof e=="string"&&e.length>kI/3&&Wc(e)>kI)throw new Error(t+"contains a string greater than "+kI+" utf8 bytes "+Ho(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(mn(e,(s,a)=>{if(s===".value")r=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!e1(s)))throw new Error(t+" contains an invalid key ("+s+") "+Ho(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);z3(i,s),t1(t,a,i),q3(i)}),r&&o)throw new Error(t+' contains ".value" child '+Ho(i)+" in addition to actual children.")}};var e9=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!e1(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!J6(n))throw new Error(KT(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var w0=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function t9(t,e){let n=null;for(let i=0;i<e.length;i++){let r=e[i],o=r.getPath();n!==null&&!xk(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function Qo(t,e,n){t9(t,n),n9(t,i=>Pn(i,e)||Pn(e,i))}function n9(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){let r=t.eventLists_[i];if(r){let o=r.path;e(o)?(i9(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function i9(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let i=n.getEventRunner();qo&&xt("event: "+n.toString()),fu(i)}}}var r9="repo_interrupt",o9=25,I0=class{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new w0,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vp(),this.transactionQueueTree_=new uu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function s9(t,e,n){if(t.stats_=S0(t.repoInfo_),t.forceRestClient_||y3())t.server_=new r0(t.repoInfo_,(i,r,o,s)=>{XP(t,i,r,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>JP(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ot(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new A0(t.repoInfo_,e,(i,r,o,s)=>{XP(t,i,r,o,s)},i=>{JP(t,i)},i=>{c9(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=w3(t.repoInfo_,()=>new c0(t.stats_,t.server_)),t.infoData_=new o0,t.infoSyncTree_=new $p({startListening:(i,r,o,s)=>{let a=[],c=t.infoData_.getNode(i._path);return c.isEmpty()||(a=Hp(t.infoSyncTree_,i._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),F0(t,"connected",!1),t.serverSyncTree_=new $p({startListening:(i,r,o,s)=>(t.server_.listen(i,o,r,(a,c)=>{let l=s(a,c);Qo(t.eventQueue_,i._path,l)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function a9(t){let n=t.infoData_.getNode(new Ee(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function n1(t){return $6({timestamp:a9(t)})}function XP(t,e,n,i,r){t.dataUpdateCount++;let o=new Ee(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(r)if(i){let c=qc(n,l=>Ct(l));s=B6(t.serverSyncTree_,o,c,r)}else{let c=Ct(n);s=U6(t.serverSyncTree_,o,c,r)}else if(i){let c=qc(n,l=>Ct(l));s=j6(t.serverSyncTree_,o,c)}else{let c=Ct(n);s=Hp(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=V0(t,o)),Qo(t.eventQueue_,a,s)}function JP(t,e){F0(t,"connected",e),e===!1&&u9(t)}function c9(t,e){mn(e,(n,i)=>{F0(t,n,i)})}function F0(t,e,n){let i=new Ee("/.info/"+e),r=Ct(n);t.infoData_.updateSnapshot(i,r);let o=Hp(t.infoSyncTree_,i,r);Qo(t.eventQueue_,i,o)}function l9(t){return t.nextWriteId_++}function u9(t){i1(t,"onDisconnectEvents");let e=n1(t),n=Vp();s0(t.onDisconnect_,be(),(r,o)=>{let s=q6(r,o,t.serverSyncTree_,e);Rk(n,r,s)});let i=[];s0(n,be(),(r,o)=>{i=i.concat(Hp(t.serverSyncTree_,r,o));let s=p9(t,r);V0(t,s)}),t.onDisconnect_=Vp(),Qo(t.eventQueue_,be(),i)}function d9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(r9)}function i1(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),xt(n,...e)}function r1(t,e,n){return qk(t.serverSyncTree_,e,n)||Ne.EMPTY_NODE}function L0(t,e=t.transactionQueueTree_){if(e||Wp(t,e),Ba(e)){let n=s1(t,e);I(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&h9(t,mu(e),n)}else Xk(e)&&qp(e,n=>{L0(t,n)})}function h9(t,e,n){let i=n.map(l=>l.currentWriteId),r=r1(t,e,i),o=r,s=r.hash();for(let l=0;l<n.length;l++){let u=n[l];I(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=fn(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{i1(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Ra(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Wp(t,O0(t.transactionQueueTree_,e)),L0(t,t.transactionQueueTree_),Qo(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)fu(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Jt("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}V0(t,e)}},s)}function V0(t,e){let n=o1(t,e),i=mu(n),r=s1(t,n);return f9(t,r,i),i}function f9(t,e,n){if(e.length===0)return;let i=[],r=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=fn(n,c.path),u=!1,d;if(I(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,r=r.concat(Ra(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=o9)u=!0,d="maxretry",r=r.concat(Ra(t.serverSyncTree_,c.currentWriteId,!0));else{let h=r1(t,c.path,s);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){t1("transaction failed: Data returned ",f,c.path);let m=Ct(f);typeof f=="object"&&f!=null&&Kn(f,".priority")||(m=m.updatePriority(h.getPriority()));let _=c.currentWriteId,C=n1(t),z=W6(m,h,C);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=z,c.currentWriteId=l9(t),s.splice(s.indexOf(_),1),r=r.concat(V6(t.serverSyncTree_,c.path,z,c.currentWriteId,c.applyLocally)),r=r.concat(Ra(t.serverSyncTree_,_,!0))}else u=!0,d="nodata",r=r.concat(Ra(t.serverSyncTree_,c.currentWriteId,!0))}Qo(t.eventQueue_,n,r),r=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(d),!1,null))))}Wp(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)fu(i[a]);L0(t,t.transactionQueueTree_)}function o1(t,e){let n,i=t.transactionQueueTree_;for(n=ae(e);n!==null&&Ba(i)===void 0;)i=O0(i,n),e=Se(e),n=ae(e);return i}function s1(t,e){let n=[];return a1(t,e,n),n.sort((i,r)=>i.order-r.order),n}function a1(t,e,n){let i=Ba(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);qp(e,r=>{a1(t,r,n)})}function Wp(t,e){let n=Ba(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,Zk(e,n.length>0?n:void 0)}qp(e,i=>{Wp(t,i)})}function p9(t,e){let n=mu(o1(t,e)),i=O0(t.transactionQueueTree_,e);return K6(i,r=>{OI(t,r)}),OI(t,i),Jk(i,r=>{OI(t,r)}),n}function OI(t,e){let n=Ba(e);if(n){let i=[],r=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(I(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(I(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),r=r.concat(Ra(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&i.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Zk(e,void 0):n.length=o+1,Qo(t.eventQueue_,mu(e),r);for(let s=0;s<i.length;s++)fu(i[s])}}function m9(t){let e="",n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function g9(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Jt(`Invalid query segment '${n}' in query '${t}'`)}return e}var ek=function(t,e){let n=_9(t),i=n.namespace;n.domain==="firebase.com"&&qi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&qi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||d3();let r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Mp(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new Ee(n.pathString)}},_9=function(t){let e="",n="",i="",r="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(r=m9(t.substring(u,d)));let h=g9(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let m=e.indexOf(".");i=e.substring(0,m).toLowerCase(),n=e.substring(m+1),o=i}"ns"in h&&(o=h.ns)}return{host:e,port:c,domain:n,subdomain:i,secure:s,scheme:a,pathString:r,namespace:o}};var E0=class t{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return ne(this._path)?null:wk(this._path)}get ref(){return new ja(this._repo,this._path)}get _queryIdentifier(){let e=UP(this._queryParams),n=T0(e);return n==="{}"?"default":n}get _queryObject(){return UP(this._queryParams)}isEqual(e){if(e=et(e),!(e instanceof t))return!1;let n=this._repo===e._repo,i=xk(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+H3(this._path)}};var ja=class t extends E0{constructor(e,n){super(e,n,new i0,!1)}get parent(){let e=Ek(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};F6(ja);L6(ja);var v9="FIREBASE_DATABASE_EMULATOR_HOST",x0={},y9=!1;function b9(t,e,n,i){t.repoInfo_=new Mp(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function w9(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||qi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xt("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=ek(o,r),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[v9]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=ek(o,r),a=s.repoInfo):c=!s.repoInfo.secure;let u=r&&c?new ou(ou.OWNER):new BI(t.name,t.options,e);e9("Invalid Firebase Database URL",s),ne(s.path)||qi("Database URL must point to the root of a Firebase Database (not including a child path).");let d=E9(a,t,u,new UI(t.name,n));return new C0(d,t)}function I9(t,e){let n=x0[e];(!n||n[t.key]!==t)&&qi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),d9(t),delete n[t.key]}function E9(t,e,n,i){let r=x0[e.name];r||(r={},x0[e.name]=r);let o=r[t.toURLString()];return o&&qi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new I0(t,y9,n,i),r[t.toURLString()]=o,o}var C0=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(s9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ja(this._repo,be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(I9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qi("Cannot call "+e+" on a deleted database.")}};function c1(t=_r(),e){let n=po(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let i=Rh("database");i&&l1(n,...i)}return n}function l1(t,e,n,i={}){t=et(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&qi("Cannot call useEmulator() after instance has already been initialized.");let r=t._repoInternal,o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&qi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ou(ou.OWNER);else if(i.mockUserToken){let s=typeof i.mockUserToken=="string"?i.mockUserToken:Mh(i.mockUserToken,t.app.options.projectId);o=new ou(s)}b9(r,e,n,o)}function x9(t){c3(Xn),Zn(new Lt("database",(e,{instanceIdentifier:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return w9(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),Re(IP,EP,t),Re(IP,EP,"esm2017")}A0.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};A0.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};x9();var gu=class{constructor(e){return e}},u1="database",j0=class{constructor(){return go(u1)}};var U0=new T("angularfire2.database-instances");function C9(t,e){let n=qs(u1,t,e);return n&&new gu(n)}function D9(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new gu(i)}}var T9={provide:j0,deps:[[new Ue,U0]]},S9={provide:gu,useFactory:C9,deps:[[new Ue,U0],Dn]},A9=(()=>{class t{constructor(){Re("angularfire",Mi.full,"rtdb")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=re({type:t});static \u0275inj=ie({providers:[S9,T9]})}return t})();function d1(t,...e){return{ngModule:A9,providers:[{provide:U0,useFactory:D9(t),multi:!0,deps:[O,ht,yr,Ni,[new Ue,wo],[new Ue,vr],...e]}]}}var h1=Vt(c1,!0);var f1={};var p1={providers:[MT(wP),Cs(uS(()=>dS(f1))),Cs(sA(()=>cA())),Cs(IN(()=>CN())),Cs(d1(()=>h1()))]};var m1=(()=>{let e=class e{constructor(){this.title="TpSalaDeJuegos"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=nt({type:e,selectors:[["app-root"]],standalone:!0,features:[it],decls:1,vars:0,template:function(r,o){r&1&&sn(0,"router-outlet")},dependencies:[tv]});let t=e;return t})();BD(m1,p1).catch(t=>console.error(t));
