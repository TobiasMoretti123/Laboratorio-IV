import{c as Me,d as xe,e as Se}from"./chunk-AS57ESEQ.js";import{a as q,b as R,c as fe,d as z,e as ue}from"./chunk-Y7OHETLP.js";import{a as G,b as $,c as he,d as ge,e as be,g as Z,h as Ce,i as J,k as _e,l as ve}from"./chunk-GXDLTZJD.js";import{b as w,c as f,e as A,f as O,g as j,i as v,k as F,l as N,m as D,n as V,o as ce,p as pe}from"./chunk-JNPN6GIP.js";import{V as me,_ as se,oa as H,pa as de,ua as T}from"./chunk-DSM67ULI.js";import"./chunk-WXI33M2S.js";import{b as ae,g as le,i as U}from"./chunk-IFLVTF5H.js";import{Ab as _,Ca as oe,La as m,Ma as g,a as W,ab as h,ba as Y,ca as B,cb as s,ga as L,gb as a,hb as r,ib as p,jb as b,jc as E,kb as C,lb as ie,lc as re,ma as S,na as P,ob as u,qb as x,va as ee,wa as te,x as X,yb as l,zb as ne}from"./chunk-IIOBNL57.js";var I=class{constructor(e,d,i,n){this.sabor=e,this.tipo=d,this.precio=i,this.peso=n}};function y(){return function(o){let e=o.get("tipo"),d={noCoincide:"El tipo de helado solo puede ser agua/crema"};if(e){let i=e.value?e.value.toLowerCase():"";return i!=="agua"&&i!=="crema"?(e.setErrors(d),d):(e.setErrors(null),null)}return null}}var M=(()=>{let e=class e{constructor(i,n){this.firestore=i,this.snackBar=n,this.helados=null}LeerRepartidores(){let i=G(this.firestore,"Helado"),n=$(i,he("precio","desc"));this.helados=Z(n)}AltaHelado(i){let n=G(this.firestore,"Helado");ge(n,{sabor:i.sabor,tipo:i.tipo,precio:i.precio,peso:i.peso}).then(()=>this.AbrirSnackBar("Helado Ingresado Correctamente")).catch(t=>this.AbrirSnackBar(`Error al Ingresar Helado: ${t}`))}BajaHelado(i){let n=J(this.firestore,"Helado",i);Ce(n).then(()=>this.AbrirSnackBar("Helado Eliminado Correctamente")).catch(t=>this.AbrirSnackBar(`Error al Eliminar Helado: ${t}`))}BuscarHeladosPorSabor(i){let n=G(this.firestore,"Helado"),t=$(n,ve("sabor","==",i));return Z(t,{idField:"id"}).pipe(X(c=>c.map(Q=>{let Pe=Q,Te=Q.id;return W({id:Te},Pe)})))}ModificarHelado(i,n){let t=J(this.firestore,"Helado",i);_e(t,{sabor:n.sabor,tipo:n.tipo,precio:n.precio,peso:n.peso}).then(()=>this.AbrirSnackBar("Helado Modificado Correctamente")).catch(c=>this.AbrirSnackBar(`Error al Modificar Helado: ${c}`))}AbrirSnackBar(i){this.snackBar.open(i,"Cerrar",{duration:2e3})}};e.\u0275fac=function(n){return new(n||e)(L(be),L(T))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();function Fe(o,e){o&1&&(b(0),a(1,"small",6),l(2,"El precio no puede ser negativo"),r(),C())}function Ne(o,e){o&1&&(b(0),a(1,"small",6),l(2,"El peso debe ser m\xEDnimo 250"),r(),C())}function De(o,e){o&1&&(b(0),a(1,"small",6),l(2,"El peso debe ser m\xE1ximo 1000"),r(),C())}var Ie=(()=>{let e=class e{constructor(i){this.heladoService=i,this.helado=null,this.heladoModificado=null,this.mostrarTooltip=!1,this.mostrarBotones=!1}ModificarHelado(){if(this.heladoService.BuscarHeladosPorSabor(this.helado?.sabor).subscribe(i=>{i.forEach(n=>{this.idDelHelado=n.id})}),this.form.valid){let i=this.form.value.tipo,n=this.form.value.precio,t=this.form.value.peso;this.heladoModificado=new I(this.helado?.sabor,i,n,t),this.heladoService.ModificarHelado(this.idDelHelado,this.heladoModificado)}}ngOnInit(){this.form=new j({tipo:new v(this.helado?.tipo,[f.required,y()]),precio:new v(this.helado?.precio,[f.required,f.min(0)]),peso:new v(this.helado?.peso,[f.required,f.min(250),f.max(1e3)])},[y()])}get precio(){return this.form.get("precio")}get tipo(){return this.form.get("tipo")}get peso(){return this.form.get("peso")}};e.\u0275fac=function(n){return new(n||e)(g(M))},e.\u0275cmp=S({type:e,selectors:[["app-helado-modificacion"]],inputs:{helado:"helado"},decls:27,vars:6,consts:[[1,"contenedor"],[3,"ngSubmit","formGroup"],[1,"dato"],["appearance","fill"],["for","tipo",1,"form-label"],["matInput","","type","text","id","tipo","formControlName","tipo",1,"form-control"],[1,"text-danger"],["for","precio",1,"form-label"],["matInput","","type","number","id","precio","formControlName","precio",1,"form-control"],[4,"ngIf"],["for","peso",1,"form-label"],["matInput","","type","number","id","peso","formControlName","peso",1,"form-control"],["mat-raised-button","","type","submit",1,"form-button",3,"disabled"]],template:function(n,t){n&1&&(a(0,"div",0)(1,"form",1),u("ngSubmit",function(){return t.ModificarHelado()}),a(2,"h2"),l(3,"Ingresar Un Helado"),r(),a(4,"div",2)(5,"mat-form-field",3)(6,"mat-label",4),l(7,"Tipo"),r(),p(8,"input",5),a(9,"small",6),l(10),r()()(),a(11,"div",2)(12,"mat-form-field",3)(13,"mat-label",7),l(14,"Precio"),r(),p(15,"input",8),h(16,Fe,3,0,"ng-container",9),r()(),a(17,"div",2)(18,"mat-form-field",3)(19,"mat-label",10),l(20,"Peso"),r(),p(21,"input",11),h(22,Ne,3,0,"ng-container",9)(23,De,3,0,"ng-container",9),r()(),a(24,"div",2)(25,"button",12),l(26,"Enviar"),r()()()()),n&2&&(m(),s("formGroup",t.form),m(9),_(" ",t.tipo==null?null:t.tipo.getError("noCoincide")," "),m(6),s("ngIf",t.precio==null?null:t.precio.hasError("min")),m(6),s("ngIf",t.peso==null?null:t.peso.hasError("min")),m(),s("ngIf",t.peso==null?null:t.peso.hasError("max")),m(2),s("disabled",!t.form.valid))},dependencies:[E,F,w,N,A,O,D,V,H,z,R,q],styles:[".contenedor[_ngcontent-%COMP%]{width:30%;margin:0 auto;position:absolute;top:50%;left:60%;transform:translate(-50%,-50%);border:1px solid #ccc;padding:10px;background-color:#443f8833;z-index:1000}.dato[_ngcontent-%COMP%]{margin-bottom:20px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%] > .mat-form-field-wrapper[_ngcontent-%COMP%]{padding:5px 12px}.mat-input-element[_ngcontent-%COMP%]{font-size:16px}.mat-form-field-underline[_ngcontent-%COMP%], .mat-form-field-ripple[_ngcontent-%COMP%]{background-color:#2196f3}.text-danger[_ngcontent-%COMP%]{color:#f44336}.form-button[_ngcontent-%COMP%]{width:100%;background-color:#4caf50;color:#fff}.form-button[_ngcontent-%COMP%]:hover{background-color:#45a049}@media screen and (max-width: 480px){.contenedor[_ngcontent-%COMP%]{width:90%}}"]});let o=e;return o})();function qe(o,e){if(o&1){let d=ie();a(0,"div",2)(1,"div",3)(2,"ol",4)(3,"h2"),l(4,"Seguro que quiere eliminar este helado?"),r(),a(5,"p"),l(6),r(),p(7,"br"),a(8,"p"),l(9),r(),p(10,"br"),a(11,"p"),l(12),r(),p(13,"br"),a(14,"p"),l(15),r(),p(16,"br"),a(17,"button",5),u("click",function(){ee(d);let n=x();return te(n.BorrarHelado())}),l(18,"Si"),r(),p(19,"br"),r()()()}if(o&2){let d=x();m(6),_("Sabor: ",d.helado.sabor,""),m(3),_("Tipo: ",d.helado.tipo,""),m(3),_("Precio: ",d.helado.precio,""),m(3),_("peso: ",d.helado.peso,"")}}var ye=(()=>{let e=class e{constructor(i){this.heladoService=i,this.helado=null}BorrarHelado(){this.heladoService.BuscarHeladosPorSabor(this.helado?.sabor).subscribe(i=>{i.forEach(n=>{this.idDelHelado=n.id})}),this.heladoService.BajaHelado(this.idDelHelado)}};e.\u0275fac=function(n){return new(n||e)(g(M))},e.\u0275cmp=S({type:e,selectors:[["app-helado-baja"]],inputs:{helado:"helado"},decls:2,vars:1,consts:[[1,"contenedor"],["class","repartidor",4,"ngIf"],[1,"repartidor"],[1,"info"],[1,"data-list"],["mat-raised-button","",3,"click"]],template:function(n,t){n&1&&(a(0,"div",0),h(1,qe,20,4,"div",1),r()),n&2&&(m(),s("ngIf",t.helado))},dependencies:[E,H],styles:[".contenedor[_ngcontent-%COMP%]{width:20%;margin:0 auto;position:absolute;top:50%;left:90%;transform:translate(-50%,-50%);border:1px solid #ccc;padding:10px;background-color:#443f8833;z-index:1000}p[_ngcontent-%COMP%]{font-size:20px}h2[_ngcontent-%COMP%]{font-size:30px}"]});let o=e;return o})();function ze(o,e){if(o&1&&(a(0,"div",23),l(1),r()),o&2){let d=x();m(),ne(d.auth.currentUser==null?null:d.auth.currentUser.email)}}function Ge(o,e){o&1&&(b(0),a(1,"small",15),l(2,"S\xF3lo debe contener letras"),r(),C())}function Le(o,e){o&1&&(b(0),a(1,"small",15),l(2,"El precio no puede ser negativo"),r(),C())}function Ue(o,e){o&1&&(b(0),a(1,"small",15),l(2,"El peso debe ser m\xEDnimo 250"),r(),C())}function $e(o,e){o&1&&(b(0),a(1,"small",15),l(2,"El peso debe ser m\xE1ximo 1000"),r(),C())}function Ze(o,e){if(o&1&&(a(0,"div",24),p(1,"app-helado-modificacion",25),r()),o&2){let d=x();m(),s("helado",d.helado)}}function Je(o,e){if(o&1&&(a(0,"div",24),p(1,"app-helado-baja",25),r()),o&2){let d=x();m(),s("helado",d.helado)}}var ke=(()=>{let e=class e{constructor(i,n,t,c){this.auth=i,this.heladoService=n,this.snackBar=t,this.router=c,this.heladoCreado=new oe,this.helado=null,this.mostrarTooltip=!1,this.mostrarBotones=!1,this.mostrarBaja=!1,this.mostrarModificacion=!1}AltaHelado(){if(this.form.valid){let i=this.form.value.sabor,n=this.form.value.tipo,t=this.form.value.precio,c=this.form.value.peso;this.helado=new I(i,n,t,c),this.heladoService.AltaHelado(this.helado),this.heladoCreado.emit(this.helado),this.mostrarBotones=!0}}ngOnInit(){this.form=new j({sabor:new v("",[f.required,f.pattern("^[a-zA-Z\\s]+$")]),tipo:new v("",[f.required,y()]),precio:new v("",[f.required,f.min(0)]),peso:new v("",[f.required,f.min(250),f.max(1e3)])},[y()])}MostrarBaja(){this.mostrarBaja=!0}MostrarModificacion(){this.mostrarModificacion=!0}get sabor(){return this.form.get("sabor")}get precio(){return this.form.get("precio")}get tipo(){return this.form.get("tipo")}get peso(){return this.form.get("peso")}CancelarModificacion(){this.mostrarModificacion=!1}CancelarBaja(){this.mostrarBaja=!1}CerrarSession(){se(this.auth),this.AbrirSnackBar("Se a cerrado la sesion"),this.AbrirRuta("/home")}AbrirSnackBar(i){this.snackBar.open(i,"Cerrar",{duration:2e3})}mostrarTexto(){this.mostrarTooltip=!0}ocultarTexto(){this.mostrarTooltip=!1}AbrirRuta(i){this.router.navigate([i])}};e.\u0275fac=function(n){return new(n||e)(g(me),g(M),g(T),g(le))},e.\u0275cmp=S({type:e,selectors:[["app-helado-alta"]],outputs:{heladoCreado:"heladoCreado"},decls:51,vars:12,consts:[[1,"button-grid"],["mat-raised-button","",3,"click","disabled"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"material-icons",3,"mouseover","mouseleave"],["class","tooltip",4,"ngIf"],[1,"contenedor"],[3,"ngSubmit","formGroup"],[1,"dato"],["appearance","fill"],["for","sabor",1,"form-label"],["matInput","","type","text","id","sabor","formControlName","sabor",1,"form-control"],[4,"ngIf"],["for","tipo",1,"form-label"],["matInput","","type","text","id","tipo","formControlName","tipo",1,"form-control"],[1,"text-danger"],["for","precio",1,"form-label"],["matInput","","type","number","id","precio","formControlName","precio",1,"form-control"],["for","peso",1,"form-label"],["matInput","","type","number","id","peso","formControlName","peso",1,"form-control"],["mat-raised-button","","type","submit",1,"form-button",3,"disabled"],["mat-raised-button","",1,"form-button",3,"click"],["class","modificar",4,"ngIf"],[1,"tooltip"],[1,"modificar"],[3,"helado"]],template:function(n,t){n&1&&(a(0,"div",0)(1,"button",1),u("click",function(){return t.MostrarBaja()}),l(2,"Eliminar Helado"),r(),a(3,"button",1),u("click",function(){return t.MostrarModificacion()}),l(4,"Modificar Helado"),r(),a(5,"button",2),u("click",function(){return t.AbrirRuta("/home")}),l(6,"Volver"),r(),a(7,"button",3),u("click",function(){return t.CerrarSession()}),l(8,"Cerrar Sesi\xF3n"),r(),a(9,"i",4),u("mouseover",function(){return t.mostrarTexto()})("mouseleave",function(){return t.ocultarTexto()}),l(10,"account_circle"),r(),h(11,ze,2,1,"div",5),r(),a(12,"div",6)(13,"form",7),u("ngSubmit",function(){return t.AltaHelado()}),a(14,"h2"),l(15,"Ingresar Un Helado"),r(),a(16,"div",8)(17,"mat-form-field",9)(18,"mat-label",10),l(19,"Sabor"),r(),p(20,"input",11),h(21,Ge,3,0,"ng-container",12),r()(),a(22,"div",8)(23,"mat-form-field",9)(24,"mat-label",13),l(25,"Tipo"),r(),p(26,"input",14),a(27,"small",15),l(28),r()()(),a(29,"div",8)(30,"mat-form-field",9)(31,"mat-label",16),l(32,"Precio"),r(),p(33,"input",17),h(34,Le,3,0,"ng-container",12),r()(),a(35,"div",8)(36,"mat-form-field",9)(37,"mat-label",18),l(38,"Peso"),r(),p(39,"input",19),h(40,Ue,3,0,"ng-container",12)(41,$e,3,0,"ng-container",12),r()(),a(42,"div",8)(43,"button",20),l(44,"Enviar"),r()()(),a(45,"button",21),u("click",function(){return t.CancelarModificacion()}),l(46,"Cancelar Modificacion"),r(),a(47,"button",21),u("click",function(){return t.CancelarBaja()}),l(48,"Cancelar Baja"),r()(),h(49,Ze,2,1,"div",22)(50,Je,2,1,"div",22)),n&2&&(m(),s("disabled",!t.mostrarBotones),m(2),s("disabled",!t.mostrarBotones),m(8),s("ngIf",t.mostrarTooltip),m(2),s("formGroup",t.form),m(8),s("ngIf",t.sabor==null?null:t.sabor.hasError("pattern")),m(7),_(" ",t.tipo==null?null:t.tipo.getError("noCoincide")," "),m(6),s("ngIf",t.precio==null?null:t.precio.hasError("min")),m(6),s("ngIf",t.peso==null?null:t.peso.hasError("min")),m(),s("ngIf",t.peso==null?null:t.peso.hasError("max")),m(2),s("disabled",!t.form.valid),m(6),s("ngIf",t.mostrarModificacion),m(),s("ngIf",t.mostrarBaja))},dependencies:[E,F,w,N,A,O,D,V,H,z,R,q,Ie,ye],styles:[".button-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;background-color:#00000080;padding:10px;display:flex;justify-content:flex-end}.button-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;margin-bottom:10px;padding:20px 30px;font-size:20px}.content[_ngcontent-%COMP%]{padding-top:50px}.material-icons[_ngcontent-%COMP%]{margin-left:10px;margin-top:2px;font-size:40px}.tooltip[_ngcontent-%COMP%]{position:absolute;background-color:#000c;color:#fff;padding:5px;border-radius:3px;z-index:9999}.contenedor[_ngcontent-%COMP%]{width:30%;margin:0 auto;position:absolute;top:50%;left:20%;transform:translate(-50%,-50%);border:1px solid #ccc;padding:10px;background-color:#443f8833;z-index:1000}.dato[_ngcontent-%COMP%]{margin-bottom:20px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%] > .mat-form-field-wrapper[_ngcontent-%COMP%]{padding:5px 12px}.mat-input-element[_ngcontent-%COMP%]{font-size:16px}.mat-form-field-underline[_ngcontent-%COMP%], .mat-form-field-ripple[_ngcontent-%COMP%]{background-color:#2196f3}.text-danger[_ngcontent-%COMP%]{color:#f44336}.form-button[_ngcontent-%COMP%]{width:100%;background-color:#4caf50;color:#fff}.form-button[_ngcontent-%COMP%]:hover{background-color:#45a049}@media screen and (max-width: 480px){.contenedor[_ngcontent-%COMP%]{width:90%}}"]});let o=e;return o})();var Ke=[{path:"",component:ke}],Be=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=P({type:e}),e.\u0275inj=B({imports:[U.forChild(Ke),U]});let o=e;return o})();var Ft=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=P({type:e}),e.\u0275inj=B({providers:[M],imports:[re,Be,ae,pe,ce,de,xe,Se,ue,fe,Me]});let o=e;return o})();export{Ft as HeladoAltaModule};
